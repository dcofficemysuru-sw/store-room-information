/*! For license information please see main.e30d1653.js.LICENSE.txt */
(()=>{"use strict";var e={4:(e,t,n)=>{var r=n(853),s=n(43),i=n(950);function a(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function l(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function c(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function u(e){if(l(e)!==e)throw Error(a(188))}function d(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=d(e)))return t;e=e.sibling}return null}var h=Object.assign,f=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),y=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),b=Symbol.for("react.provider"),w=Symbol.for("react.consumer"),x=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),E=Symbol.for("react.suspense_list"),k=Symbol.for("react.memo"),_=Symbol.for("react.lazy");Symbol.for("react.scope");var T=Symbol.for("react.activity");Symbol.for("react.legacy_hidden"),Symbol.for("react.tracing_marker");var C=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var I=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=I&&e[I]||e["@@iterator"])?e:null}var A=Symbol.for("react.client.reference");function P(e){if(null==e)return null;if("function"===typeof e)return e.$$typeof===A?null:e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case g:return"Fragment";case v:return"Profiler";case y:return"StrictMode";case S:return"Suspense";case E:return"SuspenseList";case T:return"Activity"}if("object"===typeof e)switch(e.$$typeof){case p:return"Portal";case x:return(e.displayName||"Context")+".Provider";case w:return(e._context.displayName||"Context")+".Consumer";case N:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case k:return null!==(t=e.displayName||null)?t:P(e.type)||"Memo";case _:t=e._payload,e=e._init;try{return P(e(t))}catch(Ni){}}return null}var R=Array.isArray,D=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,O=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,L={pending:!1,data:null,method:null,action:null},M=[],F=-1;function U(e){return{current:e}}function V(e){0>F||(e.current=M[F],M[F]=null,F--)}function z(e,t){F++,M[F]=e.current,e.current=t}var q=U(null),B=U(null),H=U(null),G=U(null);function W(e,t){switch(z(H,t),z(B,e),z(q,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?id(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=ad(t=id(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}V(q),z(q,e)}function K(){V(q),V(B),V(H)}function Q(e){null!==e.memoizedState&&z(G,e);var t=q.current,n=ad(t,e.type);t!==n&&(z(B,e),z(q,n))}function Y(e){B.current===e&&(V(q),V(B)),G.current===e&&(V(G),Yd._currentValue=L)}var X=Object.prototype.hasOwnProperty,J=r.unstable_scheduleCallback,$=r.unstable_cancelCallback,Z=r.unstable_shouldYield,ee=r.unstable_requestPaint,te=r.unstable_now,ne=r.unstable_getCurrentPriorityLevel,re=r.unstable_ImmediatePriority,se=r.unstable_UserBlockingPriority,ie=r.unstable_NormalPriority,ae=r.unstable_LowPriority,oe=r.unstable_IdlePriority,le=r.log,ce=r.unstable_setDisableYieldValue,ue=null,de=null;function he(e){if("function"===typeof le&&ce(e),de&&"function"===typeof de.setStrictMode)try{de.setStrictMode(ue,e)}catch(t){}}var fe=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(me(e)/pe|0)|0},me=Math.log,pe=Math.LN2;var ge=256,ye=4194304;function ve(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194048&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function be(e,t,n){var r=e.pendingLanes;if(0===r)return 0;var s=0,i=e.suspendedLanes,a=e.pingedLanes;e=e.warmLanes;var o=134217727&r;return 0!==o?0!==(r=o&~i)?s=ve(r):0!==(a&=o)?s=ve(a):n||0!==(n=o&~e)&&(s=ve(n)):0!==(o=r&~i)?s=ve(o):0!==a?s=ve(a):n||0!==(n=r&~e)&&(s=ve(n)),0===s?0:0!==t&&t!==s&&0===(t&i)&&((i=s&-s)>=(n=t&-t)||32===i&&0!==(4194048&n))?t:s}function we(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function xe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Ne(){var e=ge;return 0===(4194048&(ge<<=1))&&(ge=256),e}function Se(){var e=ye;return 0===(62914560&(ye<<=1))&&(ye=4194304),e}function Ee(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function ke(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function _e(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var r=31-fe(t);e.entangledLanes|=t,e.entanglements[r]=1073741824|e.entanglements[r]|4194090&n}function Te(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-fe(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}function Ce(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ie(e){return 2<(e&=-e)?8<e?0!==(134217727&e)?32:268435456:8:2}function je(){var e=O.p;return 0!==e?e:void 0===(e=window.event)?32:uh(e.type)}var Ae=Math.random().toString(36).slice(2),Pe="__reactFiber$"+Ae,Re="__reactProps$"+Ae,De="__reactContainer$"+Ae,Oe="__reactEvents$"+Ae,Le="__reactListeners$"+Ae,Me="__reactHandles$"+Ae,Fe="__reactResources$"+Ae,Ue="__reactMarker$"+Ae;function Ve(e){delete e[Pe],delete e[Re],delete e[Oe],delete e[Le],delete e[Me]}function ze(e){var t=e[Pe];if(t)return t;for(var n=e.parentNode;n;){if(t=n[De]||n[Pe]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=wd(e);null!==e;){if(n=e[Pe])return n;e=wd(e)}return t}n=(e=n).parentNode}return null}function qe(e){if(e=e[Pe]||e[De]){var t=e.tag;if(5===t||6===t||13===t||26===t||27===t||3===t)return e}return null}function Be(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(a(33))}function He(e){var t=e[Fe];return t||(t=e[Fe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function Ge(e){e[Ue]=!0}var We=new Set,Ke={};function Qe(e,t){Ye(e,t),Ye(e+"Capture",t)}function Ye(e,t){for(Ke[e]=t,e=0;e<t.length;e++)We.add(t[e])}var Xe,Je,$e=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ze={},et={};function tt(e,t,n){if(s=t,X.call(et,s)||!X.call(Ze,s)&&($e.test(s)?et[s]=!0:(Ze[s]=!0,0)))if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var r=t.toLowerCase().slice(0,5);if("data-"!==r&&"aria-"!==r)return void e.removeAttribute(t)}e.setAttribute(t,""+n)}var s}function nt(e,t,n){if(null===n)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+n)}}function rt(e,t,n,r){if(null===r)e.removeAttribute(n);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(n)}e.setAttributeNS(t,n,""+r)}}function st(e){if(void 0===Xe)try{throw Error()}catch(Ni){var t=Ni.stack.trim().match(/\n( *(at )?)/);Xe=t&&t[1]||"",Je=-1<Ni.stack.indexOf("\n    at")?" (<anonymous>)":-1<Ni.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+Xe+e+Je}var it=!1;function at(e,t){if(!e||it)return"";it=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var r={DetermineComponentFrameRoot:function(){try{if(t){var n=function(){throw Error()};if(Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(n,[])}catch(Ni){var r=Ni}Reflect.construct(e,[],n)}else{try{n.call()}catch(s){r=s}e.call(n.prototype)}}else{try{throw Error()}catch(i){r=i}(n=e())&&"function"===typeof n.catch&&n.catch(function(){})}}catch(a){if(a&&r&&"string"===typeof a.stack)return[a.stack,r.stack]}return[null,null]}};r.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(r.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(r.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var i=r.DetermineComponentFrameRoot(),a=i[0],o=i[1];if(a&&o){var l=a.split("\n"),c=o.split("\n");for(s=r=0;r<l.length&&!l[r].includes("DetermineComponentFrameRoot");)r++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(r===l.length||s===c.length)for(r=l.length-1,s=c.length-1;1<=r&&0<=s&&l[r]!==c[s];)s--;for(;1<=r&&0<=s;r--,s--)if(l[r]!==c[s]){if(1!==r||1!==s)do{if(r--,0>--s||l[r]!==c[s]){var u="\n"+l[r].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=r&&0<=s);break}}}finally{it=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?st(n):""}function ot(e){switch(e.tag){case 26:case 27:case 5:return st(e.type);case 16:return st("Lazy");case 13:return st("Suspense");case 19:return st("SuspenseList");case 0:case 15:return at(e.type,!1);case 11:return at(e.type.render,!1);case 1:return at(e.type,!0);case 31:return st("Activity");default:return""}}function lt(e){try{var t="";do{t+=ot(e),e=e.return}while(e);return t}catch(Ni){return"\nError generating stack: "+Ni.message+"\n"+Ni.stack}}function ct(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ut(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function dt(e){e._valueTracker||(e._valueTracker=function(e){var t=ut(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var s=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,i.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function ht(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=ut(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function ft(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var mt=/[\n"\\]/g;function pt(e){return e.replace(mt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function gt(e,t,n,r,s,i,a,o){e.name="",null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a?e.type=a:e.removeAttribute("type"),null!=t?"number"===a?(0===t&&""===e.value||e.value!=t)&&(e.value=""+ct(t)):e.value!==""+ct(t)&&(e.value=""+ct(t)):"submit"!==a&&"reset"!==a||e.removeAttribute("value"),null!=t?vt(e,a,ct(t)):null!=n?vt(e,a,ct(n)):null!=r&&e.removeAttribute("value"),null==s&&null!=i&&(e.defaultChecked=!!i),null!=s&&(e.checked=s&&"function"!==typeof s&&"symbol"!==typeof s),null!=o&&"function"!==typeof o&&"symbol"!==typeof o&&"boolean"!==typeof o?e.name=""+ct(o):e.removeAttribute("name")}function yt(e,t,n,r,s,i,a,o){if(null!=i&&"function"!==typeof i&&"symbol"!==typeof i&&"boolean"!==typeof i&&(e.type=i),null!=t||null!=n){if(!("submit"!==i&&"reset"!==i||void 0!==t&&null!==t))return;n=null!=n?""+ct(n):"",t=null!=t?""+ct(t):n,o||t===e.value||(e.value=t),e.defaultValue=t}r="function"!==typeof(r=null!=r?r:s)&&"symbol"!==typeof r&&!!r,e.checked=o?e.checked:!!r,e.defaultChecked=!!r,null!=a&&"function"!==typeof a&&"symbol"!==typeof a&&"boolean"!==typeof a&&(e.name=a)}function vt(e,t,n){"number"===t&&ft(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function bt(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+ct(n),t=null,s=0;s<e.length;s++){if(e[s].value===n)return e[s].selected=!0,void(r&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function wt(e,t,n){null==t||((t=""+ct(t))!==e.value&&(e.value=t),null!=n)?e.defaultValue=null!=n?""+ct(n):"":e.defaultValue!==t&&(e.defaultValue=t)}function xt(e,t,n,r){if(null==t){if(null!=r){if(null!=n)throw Error(a(92));if(R(r)){if(1<r.length)throw Error(a(93));r=r[0]}n=r}null==n&&(n=""),t=n}n=ct(t),e.defaultValue=n,(r=e.textContent)===n&&""!==r&&null!==r&&(e.value=r)}function Nt(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var St=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Et(e,t,n){var r=0===t.indexOf("--");null==n||"boolean"===typeof n||""===n?r?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":r?e.setProperty(t,n):"number"!==typeof n||0===n||St.has(t)?"float"===t?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function kt(e,t,n){if(null!=t&&"object"!==typeof t)throw Error(a(62));if(e=e.style,null!=n){for(var r in n)!n.hasOwnProperty(r)||null!=t&&t.hasOwnProperty(r)||(0===r.indexOf("--")?e.setProperty(r,""):"float"===r?e.cssFloat="":e[r]="");for(var s in t)r=t[s],t.hasOwnProperty(s)&&n[s]!==r&&Et(e,s,r)}else for(var i in t)t.hasOwnProperty(i)&&Et(e,i,t[i])}function _t(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Tt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ct=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function It(e){return Ct.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}var jt=null;function At(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Pt=null,Rt=null;function Dt(e){var t=qe(e);if(t&&(e=t.stateNode)){var n=e[Re]||null;e:switch(e=t.stateNode,t.type){case"input":if(gt(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+pt(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=r[Re]||null;if(!s)throw Error(a(90));gt(r,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name)}}for(t=0;t<n.length;t++)(r=n[t]).form===e.form&&ht(r)}break e;case"textarea":wt(e,n.value,n.defaultValue);break e;case"select":null!=(t=n.value)&&bt(e,!!n.multiple,t,!1)}}}var Ot=!1;function Lt(e,t,n){if(Ot)return e(t,n);Ot=!0;try{return e(t)}finally{if(Ot=!1,(null!==Pt||null!==Rt)&&(qc(),Pt&&(t=Pt,e=Rt,Rt=Pt=null,Dt(t),e)))for(t=0;t<e.length;t++)Dt(e[t])}}function Mt(e,t){var n=e.stateNode;if(null===n)return null;var r=n[Re]||null;if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(a(231,t,typeof n));return n}var Ft=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),Ut=!1;if(Ft)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Ut=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(Dh){Ut=!1}var zt=null,qt=null,Bt=null;function Ht(){if(Bt)return Bt;var e,t,n=qt,r=n.length,s="value"in zt?zt.value:zt.textContent,i=s.length;for(e=0;e<r&&n[e]===s[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===s[i-t];t++);return Bt=s.slice(e,1<t?1-t:void 0)}function Gt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Wt(){return!0}function Kt(){return!1}function Qt(e){function t(t,n,r,s,i){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=i,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Wt:Kt,this.isPropagationStopped=Kt,this}return h(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Wt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Wt)},persist:function(){},isPersistent:Wt}),t}var Yt,Xt,Jt,$t={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Zt=Qt($t),en=h({},$t,{view:0,detail:0}),tn=Qt(en),nn=h({},en,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mn,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Jt&&(Jt&&"mousemove"===e.type?(Yt=e.screenX-Jt.screenX,Xt=e.screenY-Jt.screenY):Xt=Yt=0,Jt=e),Yt)},movementY:function(e){return"movementY"in e?e.movementY:Xt}}),rn=Qt(nn),sn=Qt(h({},nn,{dataTransfer:0})),an=Qt(h({},en,{relatedTarget:0})),on=Qt(h({},$t,{animationName:0,elapsedTime:0,pseudoElement:0})),ln=Qt(h({},$t,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),cn=Qt(h({},$t,{data:0})),un={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},dn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function fn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=hn[e])&&!!t[e]}function mn(){return fn}var pn=Qt(h({},en,{key:function(e){if(e.key){var t=un[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Gt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?dn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mn,charCode:function(e){return"keypress"===e.type?Gt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Gt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),gn=Qt(h({},nn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),yn=Qt(h({},en,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mn})),vn=Qt(h({},$t,{propertyName:0,elapsedTime:0,pseudoElement:0})),bn=Qt(h({},nn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),wn=Qt(h({},$t,{newState:0,oldState:0})),xn=[9,13,27,32],Nn=Ft&&"CompositionEvent"in window,Sn=null;Ft&&"documentMode"in document&&(Sn=document.documentMode);var En=Ft&&"TextEvent"in window&&!Sn,kn=Ft&&(!Nn||Sn&&8<Sn&&11>=Sn),_n=String.fromCharCode(32),Tn=!1;function Cn(e,t){switch(e){case"keyup":return-1!==xn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function In(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var jn=!1;var An={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!An[e.type]:"textarea"===t}function Rn(e,t,n,r){Pt?Rt?Rt.push(r):Rt=[r]:Pt=r,0<(t=Gu(t,"onChange")).length&&(n=new Zt("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Dn=null,On=null;function Ln(e){Mu(e,0)}function Mn(e){if(ht(Be(e)))return e}function Fn(e,t){if("change"===e)return t}var Un=!1;if(Ft){var Vn;if(Ft){var zn="oninput"in document;if(!zn){var qn=document.createElement("div");qn.setAttribute("oninput","return;"),zn="function"===typeof qn.oninput}Vn=zn}else Vn=!1;Un=Vn&&(!document.documentMode||9<document.documentMode)}function Bn(){Dn&&(Dn.detachEvent("onpropertychange",Hn),On=Dn=null)}function Hn(e){if("value"===e.propertyName&&Mn(On)){var t=[];Rn(t,On,e,At(e)),Lt(Ln,t)}}function Gn(e,t,n){"focusin"===e?(Bn(),On=n,(Dn=t).attachEvent("onpropertychange",Hn)):"focusout"===e&&Bn()}function Wn(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Mn(On)}function Kn(e,t){if("click"===e)return Mn(t)}function Qn(e,t){if("input"===e||"change"===e)return Mn(t)}var Yn="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function Xn(e,t){if(Yn(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!X.call(t,s)||!Yn(e[s],t[s]))return!1}return!0}function Jn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function $n(e,t){var n,r=Jn(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Jn(r)}}function Zn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?Zn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function er(e){for(var t=ft((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=ft((e=t.contentWindow).document)}return t}function tr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var nr=Ft&&"documentMode"in document&&11>=document.documentMode,rr=null,sr=null,ir=null,ar=!1;function or(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;ar||null==rr||rr!==ft(r)||("selectionStart"in(r=rr)&&tr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},ir&&Xn(ir,r)||(ir=r,0<(r=Gu(sr,"onSelect")).length&&(t=new Zt("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=rr)))}function lr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var cr={animationend:lr("Animation","AnimationEnd"),animationiteration:lr("Animation","AnimationIteration"),animationstart:lr("Animation","AnimationStart"),transitionrun:lr("Transition","TransitionRun"),transitionstart:lr("Transition","TransitionStart"),transitioncancel:lr("Transition","TransitionCancel"),transitionend:lr("Transition","TransitionEnd")},ur={},dr={};function hr(e){if(ur[e])return ur[e];if(!cr[e])return e;var t,n=cr[e];for(t in n)if(n.hasOwnProperty(t)&&t in dr)return ur[e]=n[t];return e}Ft&&(dr=document.createElement("div").style,"AnimationEvent"in window||(delete cr.animationend.animation,delete cr.animationiteration.animation,delete cr.animationstart.animation),"TransitionEvent"in window||delete cr.transitionend.transition);var fr=hr("animationend"),mr=hr("animationiteration"),pr=hr("animationstart"),gr=hr("transitionrun"),yr=hr("transitionstart"),vr=hr("transitioncancel"),br=hr("transitionend"),wr=new Map,xr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){wr.set(e,t),Qe(t,[e])}xr.push("scrollEnd");var Sr=new WeakMap;function Er(e,t){if("object"===typeof e&&null!==e){var n=Sr.get(e);return void 0!==n?n:(t={value:e,source:t,stack:lt(t)},Sr.set(e,t),t)}return{value:e,source:t,stack:lt(t)}}var kr=[],_r=0,Tr=0;function Cr(){for(var e=_r,t=Tr=_r=0;t<e;){var n=kr[t];kr[t++]=null;var r=kr[t];kr[t++]=null;var s=kr[t];kr[t++]=null;var i=kr[t];if(kr[t++]=null,null!==r&&null!==s){var a=r.pending;null===a?s.next=s:(s.next=a.next,a.next=s),r.pending=s}0!==i&&Pr(n,s,i)}}function Ir(e,t,n,r){kr[_r++]=e,kr[_r++]=t,kr[_r++]=n,kr[_r++]=r,Tr|=r,e.lanes|=r,null!==(e=e.alternate)&&(e.lanes|=r)}function jr(e,t,n,r){return Ir(e,t,n,r),Rr(e)}function Ar(e,t){return Ir(e,null,null,t),Rr(e)}function Pr(e,t,n){e.lanes|=n;var r=e.alternate;null!==r&&(r.lanes|=n);for(var s=!1,i=e.return;null!==i;)i.childLanes|=n,null!==(r=i.alternate)&&(r.childLanes|=n),22===i.tag&&(null===(e=i.stateNode)||1&e._visibility||(s=!0)),e=i,i=i.return;return 3===e.tag?(i=e.stateNode,s&&null!==t&&(s=31-fe(n),null===(r=(e=i.hiddenUpdates)[s])?e[s]=[t]:r.push(t),t.lane=536870912|n),i):null}function Rr(e){if(50<Rc)throw Rc=0,Dc=null,Error(a(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var Dr={};function Or(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Lr(e,t,n,r){return new Or(e,t,n,r)}function Mr(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fr(e,t){var n=e.alternate;return null===n?((n=Lr(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=65011712&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Ur(e,t){e.flags&=65011714;var n=e.alternate;return null===n?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vr(e,t,n,r,s,i){var o=0;if(r=e,"function"===typeof e)Mr(e)&&(o=1);else if("string"===typeof e)o=function(e,t,n){if(1===n||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!==typeof t.precedence||"string"!==typeof t.href||""===t.href)break;return!0;case"link":if("string"!==typeof t.rel||"string"!==typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"===typeof t.precedence&&null==e);case"script":if(t.async&&"function"!==typeof t.async&&"symbol"!==typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"===typeof t.src)return!0}return!1}(e,n,q.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case T:return(e=Lr(31,n,t,s)).elementType=T,e.lanes=i,e;case g:return zr(n.children,s,i,t);case y:o=8,s|=24;break;case v:return(e=Lr(12,n,t,2|s)).elementType=v,e.lanes=i,e;case S:return(e=Lr(13,n,t,s)).elementType=S,e.lanes=i,e;case E:return(e=Lr(19,n,t,s)).elementType=E,e.lanes=i,e;default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case b:case x:o=10;break e;case w:o=9;break e;case N:o=11;break e;case k:o=14;break e;case _:o=16,r=null;break e}o=29,n=Error(a(130,null===e?"null":typeof e,"")),r=null}return(t=Lr(o,n,t,s)).elementType=e,t.type=r,t.lanes=i,t}function zr(e,t,n,r){return(e=Lr(7,e,r,t)).lanes=n,e}function qr(e,t,n){return(e=Lr(6,e,null,t)).lanes=n,e}function Br(e,t,n){return(t=Lr(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Hr=[],Gr=0,Wr=null,Kr=0,Qr=[],Yr=0,Xr=null,Jr=1,$r="";function Zr(e,t){Hr[Gr++]=Kr,Hr[Gr++]=Wr,Wr=e,Kr=t}function es(e,t,n){Qr[Yr++]=Jr,Qr[Yr++]=$r,Qr[Yr++]=Xr,Xr=e;var r=Jr;e=$r;var s=32-fe(r)-1;r&=~(1<<s),n+=1;var i=32-fe(t)+s;if(30<i){var a=s-s%5;i=(r&(1<<a)-1).toString(32),r>>=a,s-=a,Jr=1<<32-fe(t)+s|n<<s|r,$r=i+e}else Jr=1<<i|n<<s|r,$r=e}function ts(e){null!==e.return&&(Zr(e,1),es(e,1,0))}function ns(e){for(;e===Wr;)Wr=Hr[--Gr],Hr[Gr]=null,Kr=Hr[--Gr],Hr[Gr]=null;for(;e===Xr;)Xr=Qr[--Yr],Qr[Yr]=null,$r=Qr[--Yr],Qr[Yr]=null,Jr=Qr[--Yr],Qr[Yr]=null}var rs=null,ss=null,is=!1,as=null,os=!1,ls=Error(a(519));function cs(e){throw ps(Er(Error(a(418,"")),e)),ls}function us(e){var t=e.stateNode,n=e.type,r=e.memoizedProps;switch(t[Pe]=e,t[Re]=r,n){case"dialog":Fu("cancel",t),Fu("close",t);break;case"iframe":case"object":case"embed":Fu("load",t);break;case"video":case"audio":for(n=0;n<Ou.length;n++)Fu(Ou[n],t);break;case"source":Fu("error",t);break;case"img":case"image":case"link":Fu("error",t),Fu("load",t);break;case"details":Fu("toggle",t);break;case"input":Fu("invalid",t),yt(t,r.value,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name,!0),dt(t);break;case"select":Fu("invalid",t);break;case"textarea":Fu("invalid",t),xt(t,r.value,r.defaultValue,r.children),dt(t)}"string"!==typeof(n=r.children)&&"number"!==typeof n&&"bigint"!==typeof n||t.textContent===""+n||!0===r.suppressHydrationWarning||Ju(t.textContent,n)?(null!=r.popover&&(Fu("beforetoggle",t),Fu("toggle",t)),null!=r.onScroll&&Fu("scroll",t),null!=r.onScrollEnd&&Fu("scrollend",t),null!=r.onClick&&(t.onclick=$u),t=!0):t=!1,t||cs(e)}function ds(e){for(rs=e.return;rs;)switch(rs.tag){case 5:case 13:return void(os=!1);case 27:case 3:return void(os=!0);default:rs=rs.return}}function hs(e){if(e!==rs)return!1;if(!is)return ds(e),is=!0,!1;var t,n=e.tag;if((t=3!==n&&27!==n)&&((t=5===n)&&(t=!("form"!==(t=e.type)&&"button"!==t)||od(e.type,e.memoizedProps)),t=!t),t&&ss&&cs(e),ds(e),13===n){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(a(317));e:{for(e=e.nextSibling,n=0;e;){if(8===e.nodeType)if("/$"===(t=e.data)){if(0===n){ss=vd(e.nextSibling);break e}n--}else"$"!==t&&"$!"!==t&&"$?"!==t||n++;e=e.nextSibling}ss=null}}else 27===n?(n=ss,md(e.type)?(e=bd,bd=null,ss=e):ss=n):ss=rs?vd(e.stateNode.nextSibling):null;return!0}function fs(){ss=rs=null,is=!1}function ms(){var e=as;return null!==e&&(null===wc?wc=e:wc.push.apply(wc,e),as=null),e}function ps(e){null===as?as=[e]:as.push(e)}var gs=U(null),ys=null,vs=null;function bs(e,t,n){z(gs,t._currentValue),t._currentValue=n}function ws(e){e._currentValue=gs.current,V(gs)}function xs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ns(e,t,n,r){var s=e.child;for(null!==s&&(s.return=e);null!==s;){var i=s.dependencies;if(null!==i){var o=s.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=s;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=n,null!==(l=i.alternate)&&(l.lanes|=n),xs(i.return,n,e),r||(o=null);break e}i=l.next}}else if(18===s.tag){if(null===(o=s.return))throw Error(a(341));o.lanes|=n,null!==(i=o.alternate)&&(i.lanes|=n),xs(o,n,e),o=null}else o=s.child;if(null!==o)o.return=s;else for(o=s;null!==o;){if(o===e){o=null;break}if(null!==(s=o.sibling)){s.return=o.return,o=s;break}o=o.return}s=o}}function Ss(e,t,n,r){e=null;for(var s=t,i=!1;null!==s;){if(!i)if(0!==(524288&s.flags))i=!0;else if(0!==(262144&s.flags))break;if(10===s.tag){var o=s.alternate;if(null===o)throw Error(a(387));if(null!==(o=o.memoizedProps)){var l=s.type;Yn(s.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(s===G.current){if(null===(o=s.alternate))throw Error(a(387));o.memoizedState.memoizedState!==s.memoizedState.memoizedState&&(null!==e?e.push(Yd):e=[Yd])}s=s.return}null!==e&&Ns(t,e,n,r),t.flags|=262144}function Es(e){for(e=e.firstContext;null!==e;){if(!Yn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ks(e){ys=e,vs=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function _s(e){return Cs(ys,e)}function Ts(e,t){return null===ys&&ks(e),Cs(e,t)}function Cs(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},null===vs){if(null===e)throw Error(a(308));vs=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else vs=vs.next=t;return n}var Is="undefined"!==typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,n){e.push(n)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},js=r.unstable_scheduleCallback,As=r.unstable_NormalPriority,Ps={$$typeof:x,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rs(){return{controller:new Is,data:new Map,refCount:0}}function Ds(e){e.refCount--,0===e.refCount&&js(As,function(){e.controller.abort()})}var Os=null,Ls=0,Ms=0,Fs=null;function Us(){if(0===--Ls&&null!==Os){null!==Fs&&(Fs.status="fulfilled");var e=Os;Os=null,Ms=0,Fs=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Vs=D.S;D.S=function(e,t){"object"===typeof t&&null!==t&&"function"===typeof t.then&&function(e,t){if(null===Os){var n=Os=[];Ls=0,Ms=ju(),Fs={status:"pending",value:void 0,then:function(e){n.push(e)}}}Ls++,t.then(Us,Us)}(0,t),null!==Vs&&Vs(e,t)};var zs=U(null);function qs(){var e=zs.current;return null!==e?e:sc.pooledCache}function Bs(e,t){z(zs,null===t?zs.current:t.pool)}function Hs(){var e=qs();return null===e?null:{parent:Ps._currentValue,pool:e}}var Gs=Error(a(460)),Ws=Error(a(474)),Ks=Error(a(542)),Qs={then:function(){}};function Ys(e){return"fulfilled"===(e=e.status)||"rejected"===e}function Xs(){}function Js(e,t,n){switch(void 0===(n=e[n])?e.push(t):n!==t&&(t.then(Xs,Xs),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e;default:if("string"===typeof t.status)t.then(Xs,Xs);else{if(null!==(e=sc)&&100<e.shellSuspendCounter)throw Error(a(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var n=t;n.status="fulfilled",n.value=e}},function(e){if("pending"===t.status){var n=t;n.status="rejected",n.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw ei(e=t.reason),e}throw $s=t,Gs}}var $s=null;function Zs(){if(null===$s)throw Error(a(459));var e=$s;return $s=null,e}function ei(e){if(e===Gs||e===Ks)throw Error(a(483))}var ti=!1;function ni(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ri(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function si(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ii(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&rc)){var s=r.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),r.pending=t,t=Rr(e),Pr(e,null,n),t}return Ir(e,r,t,n),Rr(e)}function ai(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194048&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Te(e,n)}}function oi(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var s=null,i=null;if(null!==(n=n.firstBaseUpdate)){do{var a={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};null===i?s=i=a:i=i.next=a,n=n.next}while(null!==n);null===i?s=i=t:i=i.next=t}else s=i=t;return n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:i,shared:r.shared,callbacks:r.callbacks},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var li=!1;function ci(){if(li){if(null!==Fs)throw Fs}}function ui(e,t,n,r){li=!1;var s=e.updateQueue;ti=!1;var i=s.firstBaseUpdate,a=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?i=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==i){var d=s.baseState;for(a=0,u=c=l=null,o=i;;){var f=-536870913&o.lane,m=f!==o.lane;if(m?(ac&f)===f:(r&f)===f){0!==f&&f===Ms&&(li=!0),null!==u&&(u=u.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var p=e,g=o;f=t;var y=n;switch(g.tag){case 1:if("function"===typeof(p=g.payload)){d=p.call(y,d,f);break e}d=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(f="function"===typeof(p=g.payload)?p.call(y,d,f):p)||void 0===f)break e;d=h({},d,f);break e;case 2:ti=!0}}null!==(f=o.callback)&&(e.flags|=64,m&&(e.flags|=8192),null===(m=s.callbacks)?s.callbacks=[f]:m.push(f))}else m={lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=m,l=d):u=u.next=m,a|=f;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(m=o).next,m.next=null,s.lastBaseUpdate=m,s.shared.pending=null}}null===u&&(l=d),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=u,null===i&&(s.shared.lanes=0),mc|=a,e.lanes=a,e.memoizedState=d}}function di(e,t){if("function"!==typeof e)throw Error(a(191,e));e.call(t)}function hi(e,t){var n=e.callbacks;if(null!==n)for(e.callbacks=null,e=0;e<n.length;e++)di(n[e],t)}var fi=U(null),mi=U(0);function pi(e,t){z(mi,e=hc),z(fi,t),hc=e|t.baseLanes}function gi(){z(mi,hc),z(fi,fi.current)}function yi(){hc=mi.current,V(fi),V(mi)}var vi=0,bi=null,wi=null,xi=null,Si=!1,Ei=!1,ki=!1,_i=0,Ti=0,Ci=null,Ii=0;function ji(){throw Error(a(321))}function Ai(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Yn(e[n],t[n]))return!1;return!0}function Pi(e,t,n,r,s,i){return vi=i,bi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,D.H=null===e||null===e.memoizedState?Wa:Ka,ki=!1,i=n(r,s),ki=!1,Ei&&(i=Di(t,n,r,s)),Ri(e),i}function Ri(e){D.H=Ga;var t=null!==wi&&null!==wi.next;if(vi=0,xi=wi=bi=null,Si=!1,Ti=0,Ci=null,t)throw Error(a(300));null===e||Co||null!==(e=e.dependencies)&&Es(e)&&(Co=!0)}function Di(e,t,n,r){bi=e;var s=0;do{if(Ei&&(Ci=null),Ti=0,Ei=!1,25<=s)throw Error(a(301));if(s+=1,xi=wi=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}D.H=Qa,i=t(n,r)}while(Ei);return i}function Oi(){var e=D.H,t=e.useState()[0];return t="function"===typeof t.then?zi(t):t,e=e.useState()[0],(null!==wi?wi.memoizedState:null)!==e&&(bi.flags|=1024),t}function Li(){var e=0!==_i;return _i=0,e}function Mi(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function Fi(e){if(Si){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Si=!1}vi=0,xi=wi=bi=null,Ei=!1,Ti=_i=0,Ci=null}function Ui(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===xi?bi.memoizedState=xi=e:xi=xi.next=e,xi}function Vi(){if(null===wi){var e=bi.alternate;e=null!==e?e.memoizedState:null}else e=wi.next;var t=null===xi?bi.memoizedState:xi.next;if(null!==t)xi=t,wi=e;else{if(null===e){if(null===bi.alternate)throw Error(a(467));throw Error(a(310))}e={memoizedState:(wi=e).memoizedState,baseState:wi.baseState,baseQueue:wi.baseQueue,queue:wi.queue,next:null},null===xi?bi.memoizedState=xi=e:xi=xi.next=e}return xi}function zi(e){var t=Ti;return Ti+=1,null===Ci&&(Ci=[]),e=Js(Ci,e,t),t=bi,null===(null===xi?t.memoizedState:xi.next)&&(t=t.alternate,D.H=null===t||null===t.memoizedState?Wa:Ka),e}function qi(e){if(null!==e&&"object"===typeof e){if("function"===typeof e.then)return zi(e);if(e.$$typeof===x)return _s(e)}throw Error(a(438,String(e)))}function Bi(e){var t=null,n=bi.updateQueue;if(null!==n&&(t=n.memoCache),null==t){var r=bi.alternate;null!==r&&(null!==(r=r.updateQueue)&&(null!=(r=r.memoCache)&&(t={data:r.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===n&&(n={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=n),n.memoCache=t,void 0===(n=t.data[t.index]))for(n=t.data[t.index]=Array(e),r=0;r<e;r++)n[r]=C;return t.index++,n}function Hi(e,t){return"function"===typeof t?t(e):t}function Gi(e){return Wi(Vi(),wi,e)}function Wi(e,t,n){var r=e.queue;if(null===r)throw Error(a(311));r.lastRenderedReducer=n;var s=e.baseQueue,i=r.pending;if(null!==i){if(null!==s){var o=s.next;s.next=i.next,i.next=o}t.baseQueue=s=i,r.pending=null}if(i=e.baseState,null===s)e.memoizedState=i;else{var l=o=null,c=null,u=t=s.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(ac&h)===h:(vi&h)===h){var f=u.revertLane;if(0===f)null!==c&&(c=c.next={lane:0,revertLane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Ms&&(d=!0);else{if((vi&f)===f){u=u.next,f===Ms&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,bi.lanes|=f,mc|=f}h=u.action,ki&&n(i,h),i=u.hasEagerState?u.eagerState:n(i,h)}else f={lane:h,revertLane:u.revertLane,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=f,o=i):c=c.next=f,bi.lanes|=h,mc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=i:c.next=l,!Yn(i,e.memoizedState)&&(Co=!0,d&&null!==(n=Fs)))throw n;e.memoizedState=i,e.baseState=o,e.baseQueue=c,r.lastRenderedState=i}return null===s&&(r.lanes=0),[e.memoizedState,r.dispatch]}function Ki(e){var t=Vi(),n=t.queue;if(null===n)throw Error(a(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,i=t.memoizedState;if(null!==s){n.pending=null;var o=s=s.next;do{i=e(i,o.action),o=o.next}while(o!==s);Yn(i,t.memoizedState)||(Co=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Qi(e,t,n){var r=bi,s=Vi(),i=is;if(i){if(void 0===n)throw Error(a(407));n=n()}else n=t();var o=!Yn((wi||s).memoizedState,n);if(o&&(s.memoizedState=n,Co=!0),s=s.queue,ya(2048,8,Ji.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||null!==xi&&1&xi.memoizedState.tag){if(r.flags|=2048,ma(9,{destroy:void 0,resource:void 0},Xi.bind(null,r,s,n,t),null),null===sc)throw Error(a(349));i||0!==(124&vi)||Yi(r,t,n)}return n}function Yi(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=bi.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Xi(e,t,n,r){t.value=n,t.getSnapshot=r,$i(t)&&Zi(e)}function Ji(e,t,n){return n(function(){$i(t)&&Zi(e)})}function $i(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Yn(e,n)}catch(r){return!0}}function Zi(e){var t=Ar(e,2);null!==t&&Mc(t,e,2)}function ea(e){var t=Ui();if("function"===typeof e){var n=e;if(e=n(),ki){he(!0);try{n()}finally{he(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:e},t}function ta(e,t,n,r){return e.baseState=n,Wi(e,wi,"function"===typeof r?r:Hi)}function na(e,t,n,r,s){if(qa(e))throw Error(a(485));if(null!==(e=t.action)){var i={payload:s,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==D.T?n(!0):i.isTransition=!1,r(i),null===(n=t.pending)?(i.next=t.pending=i,ra(t,i)):(i.next=n.next,t.pending=n.next=i)}}function ra(e,t){var n=t.action,r=t.payload,s=e.state;if(t.isTransition){var i=D.T,a={};D.T=a;try{var o=n(s,r),l=D.S;null!==l&&l(a,o),sa(e,t,o)}catch(c){aa(e,t,c)}finally{D.T=i}}else try{sa(e,t,i=n(s,r))}catch(u){aa(e,t,u)}}function sa(e,t,n){null!==n&&"object"===typeof n&&"function"===typeof n.then?n.then(function(n){ia(e,t,n)},function(n){return aa(e,t,n)}):ia(e,t,n)}function ia(e,t,n){t.status="fulfilled",t.value=n,oa(t),e.state=n,null!==(t=e.pending)&&((n=t.next)===t?e.pending=null:(n=n.next,t.next=n,ra(e,n)))}function aa(e,t,n){var r=e.pending;if(e.pending=null,null!==r){r=r.next;do{t.status="rejected",t.reason=n,oa(t),t=t.next}while(t!==r)}e.action=null}function oa(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function la(e,t){return t}function ca(e,t){if(is){var n=sc.formState;if(null!==n){e:{var r=bi;if(is){if(ss){t:{for(var s=ss,i=os;8!==s.nodeType;){if(!i){s=null;break t}if(null===(s=vd(s.nextSibling))){s=null;break t}}s="F!"===(i=s.data)||"F"===i?s:null}if(s){ss=vd(s.nextSibling),r="F!"===s.data;break e}}cs(r)}r=!1}r&&(t=n[0])}}return(n=Ui()).memoizedState=n.baseState=t,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:la,lastRenderedState:t},n.queue=r,n=Ua.bind(null,bi,r),r.dispatch=n,r=ea(!1),i=za.bind(null,bi,!1,r.queue),s={state:t,dispatch:null,action:e,pending:null},(r=Ui()).queue=s,n=na.bind(null,bi,s,i,n),s.dispatch=n,r.memoizedState=e,[t,n,!1]}function ua(e){return da(Vi(),wi,e)}function da(e,t,n){if(t=Wi(e,t,la)[0],e=Gi(Hi)[0],"object"===typeof t&&null!==t&&"function"===typeof t.then)try{var r=zi(t)}catch(Ni){if(Ni===Gs)throw Ks;throw Ni}else r=t;var s=(t=Vi()).queue,i=s.dispatch;return n!==t.memoizedState&&(bi.flags|=2048,ma(9,{destroy:void 0,resource:void 0},ha.bind(null,s,n),null)),[r,i,e]}function ha(e,t){e.action=t}function fa(e){var t=Vi(),n=wi;if(null!==n)return da(t,n,e);Vi(),t=t.memoizedState;var r=(n=Vi()).queue.dispatch;return n.memoizedState=e,[t,r,!1]}function ma(e,t,n,r){return e={tag:e,create:n,deps:r,inst:t,next:null},null===(t=bi.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},bi.updateQueue=t),null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function pa(){return Vi().memoizedState}function ga(e,t,n,r){var s=Ui();r=void 0===r?null:r,bi.flags|=e,s.memoizedState=ma(1|t,{destroy:void 0,resource:void 0},n,r)}function ya(e,t,n,r){var s=Vi();r=void 0===r?null:r;var i=s.memoizedState.inst;null!==wi&&null!==r&&Ai(r,wi.memoizedState.deps)?s.memoizedState=ma(t,i,n,r):(bi.flags|=e,s.memoizedState=ma(1|t,i,n,r))}function va(e,t){ga(8390656,8,e,t)}function ba(e,t){ya(2048,8,e,t)}function wa(e,t){return ya(4,2,e,t)}function xa(e,t){return ya(4,4,e,t)}function Na(e,t){if("function"===typeof t){e=e();var n=t(e);return function(){"function"===typeof n?n():t(null)}}if(null!==t&&void 0!==t)return e=e(),t.current=e,function(){t.current=null}}function Sa(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ya(4,4,Na.bind(null,t,e),n)}function Ea(){}function ka(e,t){var n=Vi();t=void 0===t?null:t;var r=n.memoizedState;return null!==t&&Ai(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function _a(e,t){var n=Vi();t=void 0===t?null:t;var r=n.memoizedState;if(null!==t&&Ai(t,r[1]))return r[0];if(r=e(),ki){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r}function Ta(e,t,n){return void 0===n||0!==(1073741824&vi)?e.memoizedState=t:(e.memoizedState=n,e=Lc(),bi.lanes|=e,mc|=e,n)}function Ca(e,t,n,r){return Yn(n,t)?n:null!==fi.current?(e=Ta(e,n,r),Yn(e,t)||(Co=!0),e):0===(42&vi)?(Co=!0,e.memoizedState=n):(e=Lc(),bi.lanes|=e,mc|=e,t)}function Ia(e,t,n,r,s){var i=O.p;O.p=0!==i&&8>i?i:8;var a=D.T,o={};D.T=o,za(e,!1,t,n);try{var l=s(),c=D.S;if(null!==c&&c(o,l),null!==l&&"object"===typeof l&&"function"===typeof l.then)Va(e,t,function(e,t){var n=[],r={status:"pending",value:null,reason:null,then:function(e){n.push(e)}};return e.then(function(){r.status="fulfilled",r.value=t;for(var e=0;e<n.length;e++)(0,n[e])(t)},function(e){for(r.status="rejected",r.reason=e,e=0;e<n.length;e++)(0,n[e])(void 0)}),r}(l,r),Oc());else Va(e,t,r,Oc())}catch(u){Va(e,t,{then:function(){},status:"rejected",reason:u},Oc())}finally{O.p=i,D.T=a}}function ja(){}function Aa(e,t,n,r){if(5!==e.tag)throw Error(a(476));var s=Pa(e).queue;Ia(e,s,t,L,null===n?ja:function(){return Ra(e),n(r)})}function Pa(e){var t=e.memoizedState;if(null!==t)return t;var n={};return(t={memoizedState:L,baseState:L,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:L},next:null}).next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hi,lastRenderedState:n},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function Ra(e){Va(e,Pa(e).next.queue,{},Oc())}function Da(){return _s(Yd)}function Oa(){return Vi().memoizedState}function La(){return Vi().memoizedState}function Ma(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var n=Oc(),r=ii(t,e=si(n),n);return null!==r&&(Mc(r,t,n),ai(r,t,n)),t={cache:Rs()},void(e.payload=t)}t=t.return}}function Fa(e,t,n){var r=Oc();n={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null},qa(e)?Ba(t,n):null!==(n=jr(e,t,n,r))&&(Mc(n,e,r),Ha(n,t,r))}function Ua(e,t,n){Va(e,t,n,Oc())}function Va(e,t,n,r){var s={lane:r,revertLane:0,action:n,hasEagerState:!1,eagerState:null,next:null};if(qa(e))Ba(t,s);else{var i=e.alternate;if(0===e.lanes&&(null===i||0===i.lanes)&&null!==(i=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=i(a,n);if(s.hasEagerState=!0,s.eagerState=o,Yn(o,a))return Ir(e,t,s,0),null===sc&&Cr(),!1}catch(l){}if(null!==(n=jr(e,t,s,r)))return Mc(n,e,r),Ha(n,t,r),!0}return!1}function za(e,t,n,r){if(r={lane:2,revertLane:ju(),action:r,hasEagerState:!1,eagerState:null,next:null},qa(e)){if(t)throw Error(a(479))}else null!==(t=jr(e,n,r,2))&&Mc(t,e,2)}function qa(e){var t=e.alternate;return e===bi||null!==t&&t===bi}function Ba(e,t){Ei=Si=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ha(e,t,n){if(0!==(4194048&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,Te(e,n)}}var Ga={readContext:_s,use:qi,useCallback:ji,useContext:ji,useEffect:ji,useImperativeHandle:ji,useLayoutEffect:ji,useInsertionEffect:ji,useMemo:ji,useReducer:ji,useRef:ji,useState:ji,useDebugValue:ji,useDeferredValue:ji,useTransition:ji,useSyncExternalStore:ji,useId:ji,useHostTransitionStatus:ji,useFormState:ji,useActionState:ji,useOptimistic:ji,useMemoCache:ji,useCacheRefresh:ji},Wa={readContext:_s,use:qi,useCallback:function(e,t){return Ui().memoizedState=[e,void 0===t?null:t],e},useContext:_s,useEffect:va,useImperativeHandle:function(e,t,n){n=null!==n&&void 0!==n?n.concat([e]):null,ga(4194308,4,Na.bind(null,t,e),n)},useLayoutEffect:function(e,t){return ga(4194308,4,e,t)},useInsertionEffect:function(e,t){ga(4,2,e,t)},useMemo:function(e,t){var n=Ui();t=void 0===t?null:t;var r=e();if(ki){he(!0);try{e()}finally{he(!1)}}return n.memoizedState=[r,t],r},useReducer:function(e,t,n){var r=Ui();if(void 0!==n){var s=n(t);if(ki){he(!0);try{n(t)}finally{he(!1)}}}else s=t;return r.memoizedState=r.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},r.queue=e,e=e.dispatch=Fa.bind(null,bi,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},Ui().memoizedState=e},useState:function(e){var t=(e=ea(e)).queue,n=Ua.bind(null,bi,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Ea,useDeferredValue:function(e,t){return Ta(Ui(),e,t)},useTransition:function(){var e=ea(!1);return e=Ia.bind(null,bi,e.queue,!0,!1),Ui().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var r=bi,s=Ui();if(is){if(void 0===n)throw Error(a(407));n=n()}else{if(n=t(),null===sc)throw Error(a(349));0!==(124&ac)||Yi(r,t,n)}s.memoizedState=n;var i={value:n,getSnapshot:t};return s.queue=i,va(Ji.bind(null,r,i,e),[e]),r.flags|=2048,ma(9,{destroy:void 0,resource:void 0},Xi.bind(null,r,i,n,t),null),n},useId:function(){var e=Ui(),t=sc.identifierPrefix;if(is){var n=$r;t="\xab"+t+"R"+(n=(Jr&~(1<<32-fe(Jr)-1)).toString(32)+n),0<(n=_i++)&&(t+="H"+n.toString(32)),t+="\xbb"}else t="\xab"+t+"r"+(n=Ii++).toString(32)+"\xbb";return e.memoizedState=t},useHostTransitionStatus:Da,useFormState:ca,useActionState:ca,useOptimistic:function(e){var t=Ui();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=za.bind(null,bi,!0,n),n.dispatch=t,[e,t]},useMemoCache:Bi,useCacheRefresh:function(){return Ui().memoizedState=Ma.bind(null,bi)}},Ka={readContext:_s,use:qi,useCallback:ka,useContext:_s,useEffect:ba,useImperativeHandle:Sa,useInsertionEffect:wa,useLayoutEffect:xa,useMemo:_a,useReducer:Gi,useRef:pa,useState:function(){return Gi(Hi)},useDebugValue:Ea,useDeferredValue:function(e,t){return Ca(Vi(),wi.memoizedState,e,t)},useTransition:function(){var e=Gi(Hi)[0],t=Vi().memoizedState;return["boolean"===typeof e?e:zi(e),t]},useSyncExternalStore:Qi,useId:Oa,useHostTransitionStatus:Da,useFormState:ua,useActionState:ua,useOptimistic:function(e,t){return ta(Vi(),0,e,t)},useMemoCache:Bi,useCacheRefresh:La},Qa={readContext:_s,use:qi,useCallback:ka,useContext:_s,useEffect:ba,useImperativeHandle:Sa,useInsertionEffect:wa,useLayoutEffect:xa,useMemo:_a,useReducer:Ki,useRef:pa,useState:function(){return Ki(Hi)},useDebugValue:Ea,useDeferredValue:function(e,t){var n=Vi();return null===wi?Ta(n,e,t):Ca(n,wi.memoizedState,e,t)},useTransition:function(){var e=Ki(Hi)[0],t=Vi().memoizedState;return["boolean"===typeof e?e:zi(e),t]},useSyncExternalStore:Qi,useId:Oa,useHostTransitionStatus:Da,useFormState:fa,useActionState:fa,useOptimistic:function(e,t){var n=Vi();return null!==wi?ta(n,0,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Bi,useCacheRefresh:La},Ya=null,Xa=0;function Ja(e){var t=Xa;return Xa+=1,null===Ya&&(Ya=[]),Js(Ya,e,t)}function $a(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function Za(e,t){if(t.$$typeof===f)throw Error(a(525));throw e=Object.prototype.toString.call(t),Error(a(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function eo(e){return(0,e._init)(e._payload)}function to(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function s(e,t){return(e=Fr(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=67108866,n):r:(t.flags|=67108866,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=qr(n,e.mode,r)).return=e,t):((t=s(t,n)).return=e,t)}function c(e,t,n,r){var i=n.type;return i===g?d(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===i||"object"===typeof i&&null!==i&&i.$$typeof===_&&eo(i)===t.type)?($a(t=s(t,n.props),n),t.return=e,t):($a(t=Vr(n.type,n.key,n.props,null,e.mode,r),n),t.return=e,t)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Br(n,e.mode,r)).return=e,t):((t=s(t,n.children||[])).return=e,t)}function d(e,t,n,r,i){return null===t||7!==t.tag?((t=zr(n,e.mode,r,i)).return=e,t):((t=s(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t||"bigint"===typeof t)return(t=qr(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case m:return $a(n=Vr(t.type,t.key,t.props,null,e.mode,n),t),n.return=e,n;case p:return(t=Br(t,e.mode,n)).return=e,t;case _:return h(e,t=(0,t._init)(t._payload),n)}if(R(t)||j(t))return(t=zr(t,e.mode,n,null)).return=e,t;if("function"===typeof t.then)return h(e,Ja(t),n);if(t.$$typeof===x)return h(e,Ts(e,t),n);Za(e,t)}return null}function f(e,t,n,r){var s=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n||"bigint"===typeof n)return null!==s?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case m:return n.key===s?c(e,t,n,r):null;case p:return n.key===s?u(e,t,n,r):null;case _:return f(e,t,n=(s=n._init)(n._payload),r)}if(R(n)||j(n))return null!==s?null:d(e,t,n,r,null);if("function"===typeof n.then)return f(e,t,Ja(n),r);if(n.$$typeof===x)return f(e,t,Ts(e,n),r);Za(e,n)}return null}function y(e,t,n,r,s){if("string"===typeof r&&""!==r||"number"===typeof r||"bigint"===typeof r)return l(t,e=e.get(n)||null,""+r,s);if("object"===typeof r&&null!==r){switch(r.$$typeof){case m:return c(t,e=e.get(null===r.key?n:r.key)||null,r,s);case p:return u(t,e=e.get(null===r.key?n:r.key)||null,r,s);case _:return y(e,t,n,r=(0,r._init)(r._payload),s)}if(R(r)||j(r))return d(t,e=e.get(n)||null,r,s,null);if("function"===typeof r.then)return y(e,t,n,Ja(r),s);if(r.$$typeof===x)return y(e,t,n,Ts(t,r),s);Za(t,r)}return null}function v(l,c,u,d){if("object"===typeof u&&null!==u&&u.type===g&&null===u.key&&(u=u.props.children),"object"===typeof u&&null!==u){switch(u.$$typeof){case m:e:{for(var b=u.key;null!==c;){if(c.key===b){if((b=u.type)===g){if(7===c.tag){n(l,c.sibling),(d=s(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===b||"object"===typeof b&&null!==b&&b.$$typeof===_&&eo(b)===c.type){n(l,c.sibling),$a(d=s(c,u.props),u),d.return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}u.type===g?((d=zr(u.props.children,l.mode,d,u.key)).return=l,l=d):($a(d=Vr(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case p:e:{for(b=u.key;null!==c;){if(c.key===b){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){n(l,c.sibling),(d=s(c,u.children||[])).return=l,l=d;break e}n(l,c);break}t(l,c),c=c.sibling}(d=Br(u,l.mode,d)).return=l,l=d}return o(l);case _:return v(l,c,u=(b=u._init)(u._payload),d)}if(R(u))return function(s,a,o,l){for(var c=null,u=null,d=a,m=a=0,p=null;null!==d&&m<o.length;m++){d.index>m?(p=d,d=null):p=d.sibling;var g=f(s,d,o[m],l);if(null===g){null===d&&(d=p);break}e&&d&&null===g.alternate&&t(s,d),a=i(g,a,m),null===u?c=g:u.sibling=g,u=g,d=p}if(m===o.length)return n(s,d),is&&Zr(s,m),c;if(null===d){for(;m<o.length;m++)null!==(d=h(s,o[m],l))&&(a=i(d,a,m),null===u?c=d:u.sibling=d,u=d);return is&&Zr(s,m),c}for(d=r(d);m<o.length;m++)null!==(p=y(d,s,m,o[m],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?m:p.key),a=i(p,a,m),null===u?c=p:u.sibling=p,u=p);return e&&d.forEach(function(e){return t(s,e)}),is&&Zr(s,m),c}(l,c,u,d);if(j(u)){if("function"!==typeof(b=j(u)))throw Error(a(150));return function(s,o,l,c){if(null==l)throw Error(a(151));for(var u=null,d=null,m=o,p=o=0,g=null,v=l.next();null!==m&&!v.done;p++,v=l.next()){m.index>p?(g=m,m=null):g=m.sibling;var b=f(s,m,v.value,c);if(null===b){null===m&&(m=g);break}e&&m&&null===b.alternate&&t(s,m),o=i(b,o,p),null===d?u=b:d.sibling=b,d=b,m=g}if(v.done)return n(s,m),is&&Zr(s,p),u;if(null===m){for(;!v.done;p++,v=l.next())null!==(v=h(s,v.value,c))&&(o=i(v,o,p),null===d?u=v:d.sibling=v,d=v);return is&&Zr(s,p),u}for(m=r(m);!v.done;p++,v=l.next())null!==(v=y(m,s,p,v.value,c))&&(e&&null!==v.alternate&&m.delete(null===v.key?p:v.key),o=i(v,o,p),null===d?u=v:d.sibling=v,d=v);return e&&m.forEach(function(e){return t(s,e)}),is&&Zr(s,p),u}(l,c,u=b.call(u),d)}if("function"===typeof u.then)return v(l,c,Ja(u),d);if(u.$$typeof===x)return v(l,c,Ts(l,u),d);Za(l,u)}return"string"===typeof u&&""!==u||"number"===typeof u||"bigint"===typeof u?(u=""+u,null!==c&&6===c.tag?(n(l,c.sibling),(d=s(c,u)).return=l,l=d):(n(l,c),(d=qr(u,l.mode,d)).return=l,l=d),o(l)):n(l,c)}return function(e,t,n,r){try{Xa=0;var s=v(e,t,n,r);return Ya=null,s}catch(Ni){if(Ni===Gs||Ni===Ks)throw Ni;var i=Lr(29,Ni,null,e.mode);return i.lanes=r,i.return=e,i}}}var no=to(!0),ro=to(!1),so=U(null),io=null;function ao(e){var t=e.alternate;z(uo,1&uo.current),z(so,e),null===io&&(null===t||null!==fi.current||null!==t.memoizedState)&&(io=e)}function oo(e){if(22===e.tag){if(z(uo,uo.current),z(so,e),null===io){var t=e.alternate;null!==t&&null!==t.memoizedState&&(io=e)}}else lo()}function lo(){z(uo,uo.current),z(so,so.current)}function co(e){V(so),io===e&&(io=null),V(uo)}var uo=U(0);function ho(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||yd(n)))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}function fo(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:h({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var mo={enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Oc(),s=si(r);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ii(e,s,r))&&(Mc(t,e,r),ai(t,e,r))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Oc(),s=si(r);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=ii(e,s,r))&&(Mc(t,e,r),ai(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Oc(),r=si(n);r.tag=2,void 0!==t&&null!==t&&(r.callback=t),null!==(t=ii(e,r,n))&&(Mc(t,e,n),ai(t,e,n))}};function po(e,t,n,r,s,i,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,i,a):!t.prototype||!t.prototype.isPureReactComponent||(!Xn(n,r)||!Xn(s,i))}function go(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&mo.enqueueReplaceState(t,t.state,null)}function yo(e,t){var n=t;if("ref"in t)for(var r in n={},t)"ref"!==r&&(n[r]=t[r]);if(e=e.defaultProps)for(var s in n===t&&(n=h({},n)),e)void 0===n[s]&&(n[s]=e[s]);return n}var vo="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function bo(e){vo(e)}function wo(e){console.error(e)}function xo(e){vo(e)}function No(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(n){setTimeout(function(){throw n})}}function So(e,t,n){try{(0,e.onCaughtError)(n.value,{componentStack:n.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(r){setTimeout(function(){throw r})}}function Eo(e,t,n){return(n=si(n)).tag=3,n.payload={element:null},n.callback=function(){No(e,t)},n}function ko(e){return(e=si(e)).tag=3,e}function _o(e,t,n,r){var s=n.type.getDerivedStateFromError;if("function"===typeof s){var i=r.value;e.payload=function(){return s(i)},e.callback=function(){So(t,n,r)}}var a=n.stateNode;null!==a&&"function"===typeof a.componentDidCatch&&(e.callback=function(){So(t,n,r),"function"!==typeof s&&(null===kc?kc=new Set([this]):kc.add(this));var e=r.stack;this.componentDidCatch(r.value,{componentStack:null!==e?e:""})})}var To=Error(a(461)),Co=!1;function Io(e,t,n,r){t.child=null===e?ro(t,null,n,r):no(t,e.child,n,r)}function jo(e,t,n,r,s){n=n.render;var i=t.ref;if("ref"in r){var a={};for(var o in r)"ref"!==o&&(a[o]=r[o])}else a=r;return ks(t),r=Pi(e,t,n,a,i,s),o=Li(),null===e||Co?(is&&o&&ts(t),t.flags|=1,Io(e,t,r,s),t.child):(Mi(e,t,s),Xo(e,t,s))}function Ao(e,t,n,r,s){if(null===e){var i=n.type;return"function"!==typeof i||Mr(i)||void 0!==i.defaultProps||null!==n.compare?((e=Vr(n.type,null,r,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=i,Po(e,t,i,r,s))}if(i=e.child,!Jo(e,s)){var a=i.memoizedProps;if((n=null!==(n=n.compare)?n:Xn)(a,r)&&e.ref===t.ref)return Xo(e,t,s)}return t.flags|=1,(e=Fr(i,r)).ref=t.ref,e.return=t,t.child=e}function Po(e,t,n,r,s){if(null!==e){var i=e.memoizedProps;if(Xn(i,r)&&e.ref===t.ref){if(Co=!1,t.pendingProps=r=i,!Jo(e,s))return t.lanes=e.lanes,Xo(e,t,s);0!==(131072&e.flags)&&(Co=!0)}}return Lo(e,t,n,r,s)}function Ro(e,t,n){var r=t.pendingProps,s=r.children,i=null!==e?e.memoizedState:null;if("hidden"===r.mode){if(0!==(128&t.flags)){if(r=null!==i?i.baseLanes|n:n,null!==e){for(s=t.child=e.child,i=0;null!==s;)i=i|s.lanes|s.childLanes,s=s.sibling;t.childLanes=i&~r}else t.childLanes=0,t.child=null;return Do(e,t,r,n)}if(0===(536870912&n))return t.lanes=t.childLanes=536870912,Do(e,t,null!==i?i.baseLanes|n:n,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Bs(0,null!==i?i.cachePool:null),null!==i?pi(t,i):gi(),oo(t)}else null!==i?(Bs(0,i.cachePool),pi(t,i),lo(),t.memoizedState=null):(null!==e&&Bs(0,null),gi(),lo());return Io(e,t,s,n),t.child}function Do(e,t,n,r){var s=qs();return s=null===s?null:{parent:Ps._currentValue,pool:s},t.memoizedState={baseLanes:n,cachePool:s},null!==e&&Bs(0,null),gi(),oo(t),null!==e&&Ss(e,t,r,!0),null}function Oo(e,t){var n=t.ref;if(null===n)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!==typeof n&&"object"!==typeof n)throw Error(a(284));null!==e&&e.ref===n||(t.flags|=4194816)}}function Lo(e,t,n,r,s){return ks(t),n=Pi(e,t,n,r,void 0,s),r=Li(),null===e||Co?(is&&r&&ts(t),t.flags|=1,Io(e,t,n,s),t.child):(Mi(e,t,s),Xo(e,t,s))}function Mo(e,t,n,r,s,i){return ks(t),t.updateQueue=null,n=Di(t,r,n,s),Ri(e),r=Li(),null===e||Co?(is&&r&&ts(t),t.flags|=1,Io(e,t,n,i),t.child):(Mi(e,t,i),Xo(e,t,i))}function Fo(e,t,n,r,s){if(ks(t),null===t.stateNode){var i=Dr,a=n.contextType;"object"===typeof a&&null!==a&&(i=_s(a)),i=new n(r,i),t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,i.updater=mo,t.stateNode=i,i._reactInternals=t,(i=t.stateNode).props=r,i.state=t.memoizedState,i.refs={},ni(t),a=n.contextType,i.context="object"===typeof a&&null!==a?_s(a):Dr,i.state=t.memoizedState,"function"===typeof(a=n.getDerivedStateFromProps)&&(fo(t,n,a,r),i.state=t.memoizedState),"function"===typeof n.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(a=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),a!==i.state&&mo.enqueueReplaceState(i,i.state,null),ui(t,r,i,s),ci(),i.state=t.memoizedState),"function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!0}else if(null===e){i=t.stateNode;var o=t.memoizedProps,l=yo(n,o);i.props=l;var c=i.context,u=n.contextType;a=Dr,"object"===typeof u&&null!==u&&(a=_s(u));var d=n.getDerivedStateFromProps;u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(o||c!==a)&&go(t,i,r,a),ti=!1;var h=t.memoizedState;i.state=h,ui(t,r,i,s),ci(),c=t.memoizedState,o||h!==c||ti?("function"===typeof d&&(fo(t,n,d,r),c=t.memoizedState),(l=ti||po(t,n,l,r,h,c,a))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=c),i.props=r,i.state=c,i.context=a,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,ri(e,t),u=yo(n,a=t.memoizedProps),i.props=u,d=t.pendingProps,h=i.context,c=n.contextType,l=Dr,"object"===typeof c&&null!==c&&(l=_s(c)),(c="function"===typeof(o=n.getDerivedStateFromProps)||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(a!==d||h!==l)&&go(t,i,r,l),ti=!1,h=t.memoizedState,i.state=h,ui(t,r,i,s),ci();var f=t.memoizedState;a!==d||h!==f||ti||null!==e&&null!==e.dependencies&&Es(e.dependencies)?("function"===typeof o&&(fo(t,n,o,r),f=t.memoizedState),(u=ti||po(t,n,u,r,h,f,l)||null!==e&&null!==e.dependencies&&Es(e.dependencies))?(c||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,f,l),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,f,l)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=f),i.props=r,i.state=f,i.context=l,r=u):("function"!==typeof i.componentDidUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||a===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return i=r,Oo(e,t),r=0!==(128&t.flags),i||r?(i=t.stateNode,n=r&&"function"!==typeof n.getDerivedStateFromError?null:i.render(),t.flags|=1,null!==e&&r?(t.child=no(t,e.child,null,s),t.child=no(t,null,n,s)):Io(e,t,n,s),t.memoizedState=i.state,e=t.child):e=Xo(e,t,s),e}function Uo(e,t,n,r){return fs(),t.flags|=256,Io(e,t,n,r),t.child}var Vo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zo(e){return{baseLanes:e,cachePool:Hs()}}function qo(e,t,n){return e=null!==e?e.childLanes&~n:0,t&&(e|=yc),e}function Bo(e,t,n){var r,s=t.pendingProps,i=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&uo.current)),r&&(i=!0,t.flags&=-129),r=0!==(32&t.flags),t.flags&=-33,null===e){if(is){if(i?ao(t):lo(),is){var l,c=ss;if(l=c){e:{for(l=c,c=os;8!==l.nodeType;){if(!c){c=null;break e}if(null===(l=vd(l.nextSibling))){c=null;break e}}c=l}null!==c?(t.memoizedState={dehydrated:c,treeContext:null!==Xr?{id:Jr,overflow:$r}:null,retryLane:536870912,hydrationErrors:null},(l=Lr(18,null,null,0)).stateNode=c,l.return=t,t.child=l,rs=t,ss=null,l=!0):l=!1}l||cs(t)}if(null!==(c=t.memoizedState)&&null!==(c=c.dehydrated))return yd(c)?t.lanes=32:t.lanes=536870912,null;co(t)}return c=s.children,s=s.fallback,i?(lo(),c=Go({mode:"hidden",children:c},i=t.mode),s=zr(s,i,n,null),c.return=t,s.return=t,c.sibling=s,t.child=c,(i=t.child).memoizedState=zo(n),i.childLanes=qo(e,r,n),t.memoizedState=Vo,s):(ao(t),Ho(t,c))}if(null!==(l=e.memoizedState)&&null!==(c=l.dehydrated)){if(o)256&t.flags?(ao(t),t.flags&=-257,t=Wo(e,t,n)):null!==t.memoizedState?(lo(),t.child=e.child,t.flags|=128,t=null):(lo(),i=s.fallback,c=t.mode,s=Go({mode:"visible",children:s.children},c),(i=zr(i,c,n,null)).flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,no(t,e.child,null,n),(s=t.child).memoizedState=zo(n),s.childLanes=qo(e,r,n),t.memoizedState=Vo,t=i);else if(ao(t),yd(c)){if(r=c.nextSibling&&c.nextSibling.dataset)var u=r.dgst;r=u,(s=Error(a(419))).stack="",s.digest=r,ps({value:s,source:null,stack:null}),t=Wo(e,t,n)}else if(Co||Ss(e,t,n,!1),r=0!==(n&e.childLanes),Co||r){if(null!==(r=sc)&&(0!==(s=0!==((s=0!==(42&(s=n&-n))?1:Ce(s))&(r.suspendedLanes|n))?0:s)&&s!==l.retryLane))throw l.retryLane=s,Ar(e,s),Mc(r,e,s),To;"$?"===c.data||Qc(),t=Wo(e,t,n)}else"$?"===c.data?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,ss=vd(c.nextSibling),rs=t,is=!0,as=null,os=!1,null!==e&&(Qr[Yr++]=Jr,Qr[Yr++]=$r,Qr[Yr++]=Xr,Jr=e.id,$r=e.overflow,Xr=t),(t=Ho(t,s.children)).flags|=4096);return t}return i?(lo(),i=s.fallback,c=t.mode,u=(l=e.child).sibling,(s=Fr(l,{mode:"hidden",children:s.children})).subtreeFlags=65011712&l.subtreeFlags,null!==u?i=Fr(u,i):(i=zr(i,c,n,null)).flags|=2,i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,null===(c=e.child.memoizedState)?c=zo(n):(null!==(l=c.cachePool)?(u=Ps._currentValue,l=l.parent!==u?{parent:u,pool:u}:l):l=Hs(),c={baseLanes:c.baseLanes|n,cachePool:l}),i.memoizedState=c,i.childLanes=qo(e,r,n),t.memoizedState=Vo,s):(ao(t),e=(n=e.child).sibling,(n=Fr(n,{mode:"visible",children:s.children})).return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function Ho(e,t){return(t=Go({mode:"visible",children:t},e.mode)).return=e,e.child=t}function Go(e,t){return(e=Lr(22,e,null,t)).lanes=0,e.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},e}function Wo(e,t,n){return no(t,e.child,null,n),(e=Ho(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ko(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),xs(e.return,t,n)}function Qo(e,t,n,r,s){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=n,i.tailMode=s)}function Yo(e,t,n){var r=t.pendingProps,s=r.revealOrder,i=r.tail;if(Io(e,t,r.children,n),0!==(2&(r=uo.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ko(e,n,t);else if(19===e.tag)Ko(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}switch(z(uo,r),s){case"forwards":for(n=t.child,s=null;null!==n;)null!==(e=n.alternate)&&null===ho(e)&&(s=n),n=n.sibling;null===(n=s)?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),Qo(t,!1,s,n,i);break;case"backwards":for(n=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===ho(e)){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}Qo(t,!0,n,null,i);break;case"together":Qo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Xo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),mc|=t.lanes,0===(n&t.childLanes)){if(null===e)return null;if(Ss(e,t,n,!1),0===(n&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(a(153));if(null!==t.child){for(n=Fr(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fr(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Jo(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!Es(e))}function $o(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps)Co=!0;else{if(!Jo(e,n)&&0===(128&t.flags))return Co=!1,function(e,t,n){switch(t.tag){case 3:W(t,t.stateNode.containerInfo),bs(0,Ps,e.memoizedState.cache),fs();break;case 27:case 5:Q(t);break;case 4:W(t,t.stateNode.containerInfo);break;case 10:bs(0,t.type,t.memoizedProps.value);break;case 13:var r=t.memoizedState;if(null!==r)return null!==r.dehydrated?(ao(t),t.flags|=128,null):0!==(n&t.child.childLanes)?Bo(e,t,n):(ao(t),null!==(e=Xo(e,t,n))?e.sibling:null);ao(t);break;case 19:var s=0!==(128&e.flags);if((r=0!==(n&t.childLanes))||(Ss(e,t,n,!1),r=0!==(n&t.childLanes)),s){if(r)return Yo(e,t,n);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),z(uo,uo.current),r)break;return null;case 22:case 23:return t.lanes=0,Ro(e,t,n);case 24:bs(0,Ps,e.memoizedState.cache)}return Xo(e,t,n)}(e,t,n);Co=0!==(131072&e.flags)}else Co=!1,is&&0!==(1048576&t.flags)&&es(t,Kr,t.index);switch(t.lanes=0,t.tag){case 16:e:{e=t.pendingProps;var r=t.elementType,s=r._init;if(r=s(r._payload),t.type=r,"function"!==typeof r){if(void 0!==r&&null!==r){if((s=r.$$typeof)===N){t.tag=11,t=jo(null,t,r,e,n);break e}if(s===k){t.tag=14,t=Ao(null,t,r,e,n);break e}}throw t=P(r)||r,Error(a(306,t,""))}Mr(r)?(e=yo(r,e),t.tag=1,t=Fo(null,t,r,e,n)):(t.tag=0,t=Lo(null,t,r,e,n))}return t;case 0:return Lo(e,t,t.type,t.pendingProps,n);case 1:return Fo(e,t,r=t.type,s=yo(r,t.pendingProps),n);case 3:e:{if(W(t,t.stateNode.containerInfo),null===e)throw Error(a(387));r=t.pendingProps;var i=t.memoizedState;s=i.element,ri(e,t),ui(t,r,null,n);var o=t.memoizedState;if(r=o.cache,bs(0,Ps,r),r!==i.cache&&Ns(t,[Ps],n,!0),ci(),r=o.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Uo(e,t,r,n);break e}if(r!==s){ps(s=Er(Error(a(424)),t)),t=Uo(e,t,r,n);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(ss=vd(e.firstChild),rs=t,is=!0,as=null,os=!0,n=ro(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===s){t=Xo(e,t,n);break e}Io(e,t,r,n)}t=t.child}return t;case 26:return Oo(e,t),null===e?(n=Id(t.type,null,t.pendingProps,null))?t.memoizedState=n:is||(n=t.type,e=t.pendingProps,(r=sd(H.current).createElement(n))[Pe]=t,r[Re]=e,td(r,n,e),Ge(r),t.stateNode=r):t.memoizedState=Id(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&is&&(r=t.stateNode=xd(t.type,t.pendingProps,H.current),rs=t,os=!0,s=ss,md(t.type)?(bd=s,ss=vd(r.firstChild)):ss=s),Io(e,t,t.pendingProps.children,n),Oo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&is&&((s=r=ss)&&(null!==(r=function(e,t,n,r){for(;1===e.nodeType;){var s=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!r&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(r){if(!e[Ue])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(i=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(i!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((i=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&i&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var i=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===i)return e}if(null===(e=vd(e.nextSibling)))break}return null}(r,t.type,t.pendingProps,os))?(t.stateNode=r,rs=t,ss=vd(r.firstChild),os=!1,s=!0):s=!1),s||cs(t)),Q(t),s=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,r=i.children,od(s,i)?r=null:null!==o&&od(s,o)&&(t.flags|=32),null!==t.memoizedState&&(s=Pi(e,t,Oi,null,null,n),Yd._currentValue=s),Oo(e,t),Io(e,t,r,n),t.child;case 6:return null===e&&is&&((e=n=ss)&&(null!==(n=function(e,t,n){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!n)return null;if(null===(e=vd(e.nextSibling)))return null}return e}(n,t.pendingProps,os))?(t.stateNode=n,rs=t,ss=null,e=!0):e=!1),e||cs(t)),null;case 13:return Bo(e,t,n);case 4:return W(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=no(t,null,r,n):Io(e,t,r,n),t.child;case 11:return jo(e,t,t.type,t.pendingProps,n);case 7:return Io(e,t,t.pendingProps,n),t.child;case 8:case 12:return Io(e,t,t.pendingProps.children,n),t.child;case 10:return r=t.pendingProps,bs(0,t.type,r.value),Io(e,t,r.children,n),t.child;case 9:return s=t.type._context,r=t.pendingProps.children,ks(t),r=r(s=_s(s)),t.flags|=1,Io(e,t,r,n),t.child;case 14:return Ao(e,t,t.type,t.pendingProps,n);case 15:return Po(e,t,t.type,t.pendingProps,n);case 19:return Yo(e,t,n);case 31:return r=t.pendingProps,n=t.mode,r={mode:r.mode,children:r.children},null===e?((n=Go(r,n)).ref=t.ref,t.child=n,n.return=t,t=n):((n=Fr(e.child,r)).ref=t.ref,t.child=n,n.return=t,t=n),t;case 22:return Ro(e,t,n);case 24:return ks(t),r=_s(Ps),null===e?(null===(s=qs())&&(s=sc,i=Rs(),s.pooledCache=i,i.refCount++,null!==i&&(s.pooledCacheLanes|=n),s=i),t.memoizedState={parent:r,cache:s},ni(t),bs(0,Ps,s)):(0!==(e.lanes&n)&&(ri(e,t),ui(t,null,null,n),ci()),s=e.memoizedState,i=t.memoizedState,s.parent!==r?(s={parent:r,cache:r},t.memoizedState=s,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=s),bs(0,Ps,r)):(r=i.cache,bs(0,Ps,r),r!==s.cache&&Ns(t,[Ps],n,!0))),Io(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(a(156,t.tag))}function Zo(e){e.flags|=4}function el(e,t){if("stylesheet"!==t.type||0!==(4&t.state.loading))e.flags&=-16777217;else if(e.flags|=16777216,!qd(t)){if(null!==(t=so.current)&&((4194048&ac)===ac?null!==io:(62914560&ac)!==ac&&0===(536870912&ac)||t!==io))throw $s=Qs,Ws;e.flags|=8192}}function tl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Se():536870912,e.lanes|=t,vc|=t)}function nl(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function rl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=65011712&s.subtreeFlags,r|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function sl(e,t,n){var r=t.pendingProps;switch(ns(t),t.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return rl(t),null;case 3:return n=t.stateNode,r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),ws(Ps),K(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),null!==e&&null!==e.child||(hs(t)?Zo(t):null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,ms())),rl(t),null;case 26:return n=t.memoizedState,null===e?(Zo(t),null!==n?(rl(t),el(t,n)):(rl(t),t.flags&=-16777217)):n?n!==e.memoizedState?(Zo(t),rl(t),el(t,n)):(rl(t),t.flags&=-16777217):(e.memoizedProps!==r&&Zo(t),rl(t),t.flags&=-16777217),null;case 27:Y(t),n=H.current;var s=t.type;if(null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Zo(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return rl(t),null}e=q.current,hs(t)?us(t):(e=xd(s,r,n),t.stateNode=e,Zo(t))}return rl(t),null;case 5:if(Y(t),n=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==r&&Zo(t);else{if(!r){if(null===t.stateNode)throw Error(a(166));return rl(t),null}if(e=q.current,hs(t))us(t);else{switch(s=sd(H.current),e){case 1:e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case 2:e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;default:switch(n){case"svg":e=s.createElementNS("http://www.w3.org/2000/svg",n);break;case"math":e=s.createElementNS("http://www.w3.org/1998/Math/MathML",n);break;case"script":(e=s.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild);break;case"select":e="string"===typeof r.is?s.createElement("select",{is:r.is}):s.createElement("select"),r.multiple?e.multiple=!0:r.size&&(e.size=r.size);break;default:e="string"===typeof r.is?s.createElement(n,{is:r.is}):s.createElement(n)}}e[Pe]=t,e[Re]=r;e:for(s=t.child;null!==s;){if(5===s.tag||6===s.tag)e.appendChild(s.stateNode);else if(4!==s.tag&&27!==s.tag&&null!==s.child){s.child.return=s,s=s.child;continue}if(s===t)break e;for(;null===s.sibling;){if(null===s.return||s.return===t)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}t.stateNode=e;e:switch(td(e,n,r),n){case"button":case"input":case"select":case"textarea":e=!!r.autoFocus;break e;case"img":e=!0;break e;default:e=!1}e&&Zo(t)}}return rl(t),t.flags&=-16777217,null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==r&&Zo(t);else{if("string"!==typeof r&&null===t.stateNode)throw Error(a(166));if(e=H.current,hs(t)){if(e=t.stateNode,n=t.memoizedProps,r=null,null!==(s=rs))switch(s.tag){case 27:case 5:r=s.memoizedProps}e[Pe]=t,(e=!!(e.nodeValue===n||null!==r&&!0===r.suppressHydrationWarning||Ju(e.nodeValue,n)))||cs(t)}else(e=sd(e).createTextNode(r))[Pe]=t,t.stateNode=e}return rl(t),null;case 13:if(r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(s=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!s)throw Error(a(318));if(!(s=null!==(s=t.memoizedState)?s.dehydrated:null))throw Error(a(317));s[Pe]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;rl(t),s=!1}else s=ms(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=s),s=!0;if(!s)return 256&t.flags?(co(t),t):(co(t),null)}if(co(t),0!==(128&t.flags))return t.lanes=n,t;if(n=null!==r,e=null!==e&&null!==e.memoizedState,n){s=null,null!==(r=t.child).alternate&&null!==r.alternate.memoizedState&&null!==r.alternate.memoizedState.cachePool&&(s=r.alternate.memoizedState.cachePool.pool);var i=null;null!==r.memoizedState&&null!==r.memoizedState.cachePool&&(i=r.memoizedState.cachePool.pool),i!==s&&(r.flags|=2048)}return n!==e&&n&&(t.child.flags|=8192),tl(t,t.updateQueue),rl(t),null;case 4:return K(),null===e&&zu(t.stateNode.containerInfo),rl(t),null;case 10:return ws(t.type),rl(t),null;case 19:if(V(uo),null===(s=t.memoizedState))return rl(t),null;if(r=0!==(128&t.flags),null===(i=s.rendering))if(r)nl(s,!1);else{if(0!==fc||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(i=ho(e))){for(t.flags|=128,nl(s,!1),e=i.updateQueue,t.updateQueue=e,tl(t,e),t.subtreeFlags=0,e=n,n=t.child;null!==n;)Ur(n,e),n=n.sibling;return z(uo,1&uo.current|2),t.child}e=e.sibling}null!==s.tail&&te()>Sc&&(t.flags|=128,r=!0,nl(s,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ho(i))){if(t.flags|=128,r=!0,e=e.updateQueue,t.updateQueue=e,tl(t,e),nl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!i.alternate&&!is)return rl(t),null}else 2*te()-s.renderingStartTime>Sc&&536870912!==n&&(t.flags|=128,r=!0,nl(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=s.last)?e.sibling=i:t.child=i,s.last=i)}return null!==s.tail?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=te(),t.sibling=null,e=uo.current,z(uo,r?1&e|2:1&e),t):(rl(t),null);case 22:case 23:return co(t),yi(),r=null!==t.memoizedState,null!==e?null!==e.memoizedState!==r&&(t.flags|=8192):r&&(t.flags|=8192),r?0!==(536870912&n)&&0===(128&t.flags)&&(rl(t),6&t.subtreeFlags&&(t.flags|=8192)):rl(t),null!==(n=t.updateQueue)&&tl(t,n.retryQueue),n=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),r=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(r=t.memoizedState.cachePool.pool),r!==n&&(t.flags|=2048),null!==e&&V(zs),null;case 24:return n=null,null!==e&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),ws(Ps),rl(t),null;case 25:case 30:return null}throw Error(a(156,t.tag))}function il(e,t){switch(ns(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ws(Ps),K(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return Y(t),null;case 13:if(co(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(a(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return V(uo),null;case 4:return K(),null;case 10:return ws(t.type),null;case 22:case 23:return co(t),yi(),null!==e&&V(zs),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return ws(Ps),null;default:return null}}function al(e,t){switch(ns(t),t.tag){case 3:ws(Ps),K();break;case 26:case 27:case 5:Y(t);break;case 4:K();break;case 13:co(t);break;case 19:V(uo);break;case 10:ws(t.type);break;case 22:case 23:co(t),yi(),null!==e&&V(zs);break;case 24:ws(Ps)}}function ol(e,t){try{var n=t.updateQueue,r=null!==n?n.lastEffect:null;if(null!==r){var s=r.next;n=s;do{if((n.tag&e)===e){r=void 0;var i=n.create,a=n.inst;r=i(),a.destroy=r}n=n.next}while(n!==s)}}catch(o){du(t,t.return,o)}}function ll(e,t,n){try{var r=t.updateQueue,s=null!==r?r.lastEffect:null;if(null!==s){var i=s.next;r=i;do{if((r.tag&e)===e){var a=r.inst,o=a.destroy;if(void 0!==o){a.destroy=void 0,s=t;var l=n,c=o;try{c()}catch(u){du(s,l,u)}}}r=r.next}while(r!==i)}}catch(u){du(t,t.return,u)}}function cl(e){var t=e.updateQueue;if(null!==t){var n=e.stateNode;try{hi(t,n)}catch(r){du(e,e.return,r)}}}function ul(e,t,n){n.props=yo(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(r){du(e,t,r)}}function dl(e,t){try{var n=e.ref;if(null!==n){switch(e.tag){case 26:case 27:case 5:var r=e.stateNode;break;default:r=e.stateNode}"function"===typeof n?e.refCleanup=n(r):n.current=r}}catch(s){du(e,t,s)}}function hl(e,t){var n=e.ref,r=e.refCleanup;if(null!==n)if("function"===typeof r)try{r()}catch(s){du(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"===typeof n)try{n(null)}catch(i){du(e,t,i)}else n.current=null}function fl(e){var t=e.type,n=e.memoizedProps,r=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&r.focus();break e;case"img":n.src?r.src=n.src:n.srcSet&&(r.srcset=n.srcSet)}}catch(s){du(e,e.return,s)}}function ml(e,t,n){try{var r=e.stateNode;!function(e,t,n,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var s=null,i=null,o=null,l=null,c=null,u=null,d=null;for(m in n){var h=n[m];if(n.hasOwnProperty(m)&&null!=h)switch(m){case"checked":case"value":break;case"defaultValue":c=h;default:r.hasOwnProperty(m)||Zu(e,t,m,null,r,h)}}for(var f in r){var m=r[f];if(h=n[f],r.hasOwnProperty(f)&&(null!=m||null!=h))switch(f){case"type":i=m;break;case"name":s=m;break;case"checked":u=m;break;case"defaultChecked":d=m;break;case"value":o=m;break;case"defaultValue":l=m;break;case"children":case"dangerouslySetInnerHTML":if(null!=m)throw Error(a(137,t));break;default:m!==h&&Zu(e,t,f,m,r,h)}}return void gt(e,o,l,c,u,d,i,s);case"select":for(i in m=o=l=f=null,n)if(c=n[i],n.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":m=c;default:r.hasOwnProperty(i)||Zu(e,t,i,null,r,c)}for(s in r)if(i=r[s],c=n[s],r.hasOwnProperty(s)&&(null!=i||null!=c))switch(s){case"value":f=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&Zu(e,t,s,i,r,c)}return t=l,n=o,r=m,void(null!=f?bt(e,!!n,f,!1):!!r!==!!n&&(null!=t?bt(e,!!n,t,!0):bt(e,!!n,n?[]:"",!1)));case"textarea":for(l in m=f=null,n)if(s=n[l],n.hasOwnProperty(l)&&null!=s&&!r.hasOwnProperty(l))switch(l){case"value":case"children":break;default:Zu(e,t,l,null,r,s)}for(o in r)if(s=r[o],i=n[o],r.hasOwnProperty(o)&&(null!=s||null!=i))switch(o){case"value":f=s;break;case"defaultValue":m=s;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=s)throw Error(a(91));break;default:s!==i&&Zu(e,t,o,s,r,i)}return void wt(e,f,m);case"option":for(var p in n)if(f=n[p],n.hasOwnProperty(p)&&null!=f&&!r.hasOwnProperty(p))if("selected"===p)e.selected=!1;else Zu(e,t,p,null,r,f);for(c in r)if(f=r[c],m=n[c],r.hasOwnProperty(c)&&f!==m&&(null!=f||null!=m))if("selected"===c)e.selected=f&&"function"!==typeof f&&"symbol"!==typeof f;else Zu(e,t,c,f,r,m);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in n)f=n[g],n.hasOwnProperty(g)&&null!=f&&!r.hasOwnProperty(g)&&Zu(e,t,g,null,r,f);for(u in r)if(f=r[u],m=n[u],r.hasOwnProperty(u)&&f!==m&&(null!=f||null!=m))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(a(137,t));break;default:Zu(e,t,u,f,r,m)}return;default:if(_t(t)){for(var y in n)f=n[y],n.hasOwnProperty(y)&&void 0!==f&&!r.hasOwnProperty(y)&&ed(e,t,y,void 0,r,f);for(d in r)f=r[d],m=n[d],!r.hasOwnProperty(d)||f===m||void 0===f&&void 0===m||ed(e,t,d,f,r,m);return}}for(var v in n)f=n[v],n.hasOwnProperty(v)&&null!=f&&!r.hasOwnProperty(v)&&Zu(e,t,v,null,r,f);for(h in r)f=r[h],m=n[h],!r.hasOwnProperty(h)||f===m||null==f&&null==m||Zu(e,t,h,f,r,m)}(r,e.type,n,t),r[Re]=t}catch(s){du(e,e.return,s)}}function pl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&md(e.type)||4===e.tag}function gl(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||pl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&md(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function yl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?(9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).insertBefore(e,t):((t=9===n.nodeType?n.body:"HTML"===n.nodeName?n.ownerDocument.body:n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=$u));else if(4!==r&&(27===r&&md(e.type)&&(n=e.stateNode,t=null),null!==(e=e.child)))for(yl(e,t,n),e=e.sibling;null!==e;)yl(e,t,n),e=e.sibling}function vl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&(27===r&&md(e.type)&&(n=e.stateNode),null!==(e=e.child)))for(vl(e,t,n),e=e.sibling;null!==e;)vl(e,t,n),e=e.sibling}function bl(e){var t=e.stateNode,n=e.memoizedProps;try{for(var r=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);td(t,r,n),t[Pe]=e,t[Re]=n}catch(i){du(e,e.return,i)}}var wl=!1,xl=!1,Nl=!1,Sl="function"===typeof WeakSet?WeakSet:Set,El=null;function kl(e,t,n){var r=n.flags;switch(n.tag){case 0:case 11:case 15:Fl(e,n),4&r&&ol(5,n);break;case 1:if(Fl(e,n),4&r)if(e=n.stateNode,null===t)try{e.componentDidMount()}catch(a){du(n,n.return,a)}else{var s=yo(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){du(n,n.return,o)}}64&r&&cl(n),512&r&&dl(n,n.return);break;case 3:if(Fl(e,n),64&r&&null!==(e=n.updateQueue)){if(t=null,null!==n.child)switch(n.child.tag){case 27:case 5:case 1:t=n.child.stateNode}try{hi(e,t)}catch(a){du(n,n.return,a)}}break;case 27:null===t&&4&r&&bl(n);case 26:case 5:Fl(e,n),null===t&&4&r&&fl(n),512&r&&dl(n,n.return);break;case 12:Fl(e,n);break;case 13:Fl(e,n),4&r&&Al(e,n),64&r&&(null!==(e=n.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var n=e.ownerDocument;if("$?"!==e.data||"complete"===n.readyState)t();else{var r=function(){t(),n.removeEventListener("DOMContentLoaded",r)};n.addEventListener("DOMContentLoaded",r),e._reactRetry=r}}(e,n=pu.bind(null,n))));break;case 22:if(!(r=null!==n.memoizedState||wl)){t=null!==t&&null!==t.memoizedState||xl,s=wl;var i=xl;wl=r,(xl=t)&&!i?Vl(e,n,0!==(8772&n.subtreeFlags)):Fl(e,n),wl=s,xl=i}break;case 30:break;default:Fl(e,n)}}function _l(e){var t=e.alternate;null!==t&&(e.alternate=null,_l(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ve(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Tl=null,Cl=!1;function Il(e,t,n){for(n=n.child;null!==n;)jl(e,t,n),n=n.sibling}function jl(e,t,n){if(de&&"function"===typeof de.onCommitFiberUnmount)try{de.onCommitFiberUnmount(ue,n)}catch(i){}switch(n.tag){case 26:xl||hl(n,t),Il(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode).parentNode.removeChild(n);break;case 27:xl||hl(n,t);var r=Tl,s=Cl;md(n.type)&&(Tl=n.stateNode,Cl=!1),Il(e,t,n),Nd(n.stateNode),Tl=r,Cl=s;break;case 5:xl||hl(n,t);case 6:if(r=Tl,s=Cl,Tl=null,Il(e,t,n),Cl=s,null!==(Tl=r))if(Cl)try{(9===Tl.nodeType?Tl.body:"HTML"===Tl.nodeName?Tl.ownerDocument.body:Tl).removeChild(n.stateNode)}catch(a){du(n,t,a)}else try{Tl.removeChild(n.stateNode)}catch(a){du(n,t,a)}break;case 18:null!==Tl&&(Cl?(pd(9===(e=Tl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,n.stateNode),Ch(e)):pd(Tl,n.stateNode));break;case 4:r=Tl,s=Cl,Tl=n.stateNode.containerInfo,Cl=!0,Il(e,t,n),Tl=r,Cl=s;break;case 0:case 11:case 14:case 15:xl||ll(2,n,t),xl||ll(4,n,t),Il(e,t,n);break;case 1:xl||(hl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount&&ul(n,t,r)),Il(e,t,n);break;case 21:Il(e,t,n);break;case 22:xl=(r=xl)||null!==n.memoizedState,Il(e,t,n),xl=r;break;default:Il(e,t,n)}}function Al(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Ch(e)}catch(n){du(t,t.return,n)}}function Pl(e,t){var n=function(e){switch(e.tag){case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Sl),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Sl),t;default:throw Error(a(435,e.tag))}}(e);t.forEach(function(t){var r=gu.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}function Rl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var s=n[r],i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(md(l.type)){Tl=l.stateNode,Cl=!1;break e}break;case 5:Tl=l.stateNode,Cl=!1;break e;case 3:case 4:Tl=l.stateNode.containerInfo,Cl=!0;break e}l=l.return}if(null===Tl)throw Error(a(160));jl(i,o,s),Tl=null,Cl=!1,null!==(i=s.alternate)&&(i.return=null),s.return=null}if(13878&t.subtreeFlags)for(t=t.child;null!==t;)Ol(t,e),t=t.sibling}var Dl=null;function Ol(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Rl(t,e),Ll(e),4&r&&(ll(3,e,e.return),ol(3,e),ll(5,e,e.return));break;case 1:Rl(t,e),Ll(e),512&r&&(xl||null===n||hl(n,n.return)),64&r&&wl&&(null!==(e=e.updateQueue)&&(null!==(r=e.callbacks)&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===n?r:n.concat(r))));break;case 26:var s=Dl;if(Rl(t,e),Ll(e),512&r&&(xl||null===n||hl(n,n.return)),4&r){var i=null!==n?n.memoizedState:null;if(r=e.memoizedState,null===n)if(null===r)if(null===e.stateNode){e:{r=e.type,n=e.memoizedProps,s=s.ownerDocument||s;t:switch(r){case"title":(!(i=s.getElementsByTagName("title")[0])||i[Ue]||i[Pe]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=s.createElement(r),s.head.insertBefore(i,s.querySelector("head > title"))),td(i,r,n),i[Pe]=e,Ge(i),r=i;break e;case"link":var o=Vd("link","href",s).get(r+(n.href||""));if(o)for(var l=0;l<o.length;l++)if((i=o[l]).getAttribute("href")===(null==n.href||""===n.href?null:n.href)&&i.getAttribute("rel")===(null==n.rel?null:n.rel)&&i.getAttribute("title")===(null==n.title?null:n.title)&&i.getAttribute("crossorigin")===(null==n.crossOrigin?null:n.crossOrigin)){o.splice(l,1);break t}td(i=s.createElement(r),r,n),s.head.appendChild(i);break;case"meta":if(o=Vd("meta","content",s).get(r+(n.content||"")))for(l=0;l<o.length;l++)if((i=o[l]).getAttribute("content")===(null==n.content?null:""+n.content)&&i.getAttribute("name")===(null==n.name?null:n.name)&&i.getAttribute("property")===(null==n.property?null:n.property)&&i.getAttribute("http-equiv")===(null==n.httpEquiv?null:n.httpEquiv)&&i.getAttribute("charset")===(null==n.charSet?null:n.charSet)){o.splice(l,1);break t}td(i=s.createElement(r),r,n),s.head.appendChild(i);break;default:throw Error(a(468,r))}i[Pe]=e,Ge(i),r=i}e.stateNode=r}else zd(s,e.type,e.stateNode);else e.stateNode=Od(s,r,e.memoizedProps);else i!==r?(null===i?null!==n.stateNode&&(n=n.stateNode).parentNode.removeChild(n):i.count--,null===r?zd(s,e.type,e.stateNode):Od(s,r,e.memoizedProps)):null===r&&null!==e.stateNode&&ml(e,e.memoizedProps,n.memoizedProps)}break;case 27:Rl(t,e),Ll(e),512&r&&(xl||null===n||hl(n,n.return)),null!==n&&4&r&&ml(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Rl(t,e),Ll(e),512&r&&(xl||null===n||hl(n,n.return)),32&e.flags){s=e.stateNode;try{Nt(s,"")}catch(m){du(e,e.return,m)}}4&r&&null!=e.stateNode&&ml(e,s=e.memoizedProps,null!==n?n.memoizedProps:s),1024&r&&(Nl=!0);break;case 6:if(Rl(t,e),Ll(e),4&r){if(null===e.stateNode)throw Error(a(162));r=e.memoizedProps,n=e.stateNode;try{n.nodeValue=r}catch(m){du(e,e.return,m)}}break;case 3:if(Ud=null,s=Dl,Dl=kd(t.containerInfo),Rl(t,e),Dl=s,Ll(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ch(t.containerInfo)}catch(m){du(e,e.return,m)}Nl&&(Nl=!1,Ml(e));break;case 4:r=Dl,Dl=kd(e.stateNode.containerInfo),Rl(t,e),Ll(e),Dl=r;break;case 12:default:Rl(t,e),Ll(e);break;case 13:Rl(t,e),Ll(e),8192&e.child.flags&&null!==e.memoizedState!==(null!==n&&null!==n.memoizedState)&&(Nc=te()),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));break;case 22:s=null!==e.memoizedState;var c=null!==n&&null!==n.memoizedState,u=wl,d=xl;if(wl=u||s,xl=d||c,Rl(t,e),xl=d,wl=u,Ll(e),8192&r)e:for(t=e.stateNode,t._visibility=s?-2&t._visibility:1|t._visibility,s&&(null===n||c||wl||xl||Ul(e)),n=null,t=e;;){if(5===t.tag||26===t.tag){if(null===n){c=n=t;try{if(i=c.stateNode,s)"function"===typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,f=void 0!==h&&null!==h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==f||"boolean"===typeof f?"":(""+f).trim()}}catch(m){du(c,c.return,m)}}}else if(6===t.tag){if(null===n){c=t;try{c.stateNode.nodeValue=s?"":c.memoizedProps}catch(m){du(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}4&r&&(null!==(r=e.updateQueue)&&(null!==(n=r.retryQueue)&&(r.retryQueue=null,Pl(e,n))));break;case 19:Rl(t,e),Ll(e),4&r&&(null!==(r=e.updateQueue)&&(e.updateQueue=null,Pl(e,r)));case 30:case 21:}}function Ll(e){var t=e.flags;if(2&t){try{for(var n,r=e.return;null!==r;){if(pl(r)){n=r;break}r=r.return}if(null==n)throw Error(a(160));switch(n.tag){case 27:var s=n.stateNode;vl(e,gl(e),s);break;case 5:var i=n.stateNode;32&n.flags&&(Nt(i,""),n.flags&=-33),vl(e,gl(e),i);break;case 3:case 4:var o=n.stateNode.containerInfo;yl(e,gl(e),o);break;default:throw Error(a(161))}}catch(l){du(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Ml(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Ml(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Fl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)kl(e,t.alternate,t),t=t.sibling}function Ul(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ll(4,t,t.return),Ul(t);break;case 1:hl(t,t.return);var n=t.stateNode;"function"===typeof n.componentWillUnmount&&ul(t,t.return,n),Ul(t);break;case 27:Nd(t.stateNode);case 26:case 5:hl(t,t.return),Ul(t);break;case 22:null===t.memoizedState&&Ul(t);break;default:Ul(t)}e=e.sibling}}function Vl(e,t,n){for(n=n&&0!==(8772&t.subtreeFlags),t=t.child;null!==t;){var r=t.alternate,s=e,i=t,a=i.flags;switch(i.tag){case 0:case 11:case 15:Vl(s,i,n),ol(4,i);break;case 1:if(Vl(s,i,n),"function"===typeof(s=(r=i).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){du(r,r.return,c)}if(null!==(s=(r=i).updateQueue)){var o=r.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)di(l[s],o)}catch(c){du(r,r.return,c)}}n&&64&a&&cl(i),dl(i,i.return);break;case 27:bl(i);case 26:case 5:Vl(s,i,n),n&&null===r&&4&a&&fl(i),dl(i,i.return);break;case 12:Vl(s,i,n);break;case 13:Vl(s,i,n),n&&4&a&&Al(s,i);break;case 22:null===i.memoizedState&&Vl(s,i,n),dl(i,i.return);break;case 30:break;default:Vl(s,i,n)}t=t.sibling}}function zl(e,t){var n=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(n=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==n&&(null!=e&&e.refCount++,null!=n&&Ds(n))}function ql(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ds(e))}function Bl(e,t,n,r){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)Hl(e,t,n,r),t=t.sibling}function Hl(e,t,n,r){var s=t.flags;switch(t.tag){case 0:case 11:case 15:Bl(e,t,n,r),2048&s&&ol(9,t);break;case 1:case 13:default:Bl(e,t,n,r);break;case 3:Bl(e,t,n,r),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&Ds(e)));break;case 12:if(2048&s){Bl(e,t,n,r),e=t.stateNode;try{var i=t.memoizedProps,a=i.id,o=i.onPostCommit;"function"===typeof o&&o(a,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){du(t,t.return,l)}}else Bl(e,t,n,r);break;case 23:break;case 22:i=t.stateNode,a=t.alternate,null!==t.memoizedState?2&i._visibility?Bl(e,t,n,r):Wl(e,t):2&i._visibility?Bl(e,t,n,r):(i._visibility|=2,Gl(e,t,n,r,0!==(10256&t.subtreeFlags))),2048&s&&zl(a,t);break;case 24:Bl(e,t,n,r),2048&s&&ql(t.alternate,t)}}function Gl(e,t,n,r,s){for(s=s&&0!==(10256&t.subtreeFlags),t=t.child;null!==t;){var i=e,a=t,o=n,l=r,c=a.flags;switch(a.tag){case 0:case 11:case 15:Gl(i,a,o,l,s),ol(8,a);break;case 23:break;case 22:var u=a.stateNode;null!==a.memoizedState?2&u._visibility?Gl(i,a,o,l,s):Wl(i,a):(u._visibility|=2,Gl(i,a,o,l,s)),s&&2048&c&&zl(a.alternate,a);break;case 24:Gl(i,a,o,l,s),s&&2048&c&&ql(a.alternate,a);break;default:Gl(i,a,o,l,s)}t=t.sibling}}function Wl(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var n=e,r=t,s=r.flags;switch(r.tag){case 22:Wl(n,r),2048&s&&zl(r.alternate,r);break;case 24:Wl(n,r),2048&s&&ql(r.alternate,r);break;default:Wl(n,r)}t=t.sibling}}var Kl=8192;function Ql(e){if(e.subtreeFlags&Kl)for(e=e.child;null!==e;)Yl(e),e=e.sibling}function Yl(e){switch(e.tag){case 26:Ql(e),e.flags&Kl&&null!==e.memoizedState&&function(e,t,n){if(null===Bd)throw Error(a(475));var r=Bd;if("stylesheet"===t.type&&("string"!==typeof n.media||!1!==matchMedia(n.media).matches)&&0===(4&t.state.loading)){if(null===t.instance){var s=jd(n.href),i=e.querySelector(Ad(s));if(i)return null!==(e=i._p)&&"object"===typeof e&&"function"===typeof e.then&&(r.count++,r=Gd.bind(r),e.then(r,r)),t.state.loading|=4,t.instance=i,void Ge(i);i=e.ownerDocument||e,n=Pd(n),(s=Sd.get(s))&&Md(n,s),Ge(i=i.createElement("link"));var o=i;o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),td(i,"link",n),t.instance=i}null===r.stylesheets&&(r.stylesheets=new Map),r.stylesheets.set(t,e),(e=t.state.preload)&&0===(3&t.state.loading)&&(r.count++,t=Gd.bind(r),e.addEventListener("load",t),e.addEventListener("error",t))}}(Dl,e.memoizedState,e.memoizedProps);break;case 5:default:Ql(e);break;case 3:case 4:var t=Dl;Dl=kd(e.stateNode.containerInfo),Ql(e),Dl=t;break;case 22:null===e.memoizedState&&(null!==(t=e.alternate)&&null!==t.memoizedState?(t=Kl,Kl=16777216,Ql(e),Kl=t):Ql(e))}}function Xl(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function Jl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];El=r,ec(r,e)}Xl(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)$l(e),e=e.sibling}function $l(e){switch(e.tag){case 0:case 11:case 15:Jl(e),2048&e.flags&&ll(9,e,e.return);break;case 3:case 12:default:Jl(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,Zl(e)):Jl(e)}}function Zl(e){var t=e.deletions;if(0!==(16&e.flags)){if(null!==t)for(var n=0;n<t.length;n++){var r=t[n];El=r,ec(r,e)}Xl(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:ll(8,t,t.return),Zl(t);break;case 22:2&(n=t.stateNode)._visibility&&(n._visibility&=-3,Zl(t));break;default:Zl(t)}e=e.sibling}}function ec(e,t){for(;null!==El;){var n=El;switch(n.tag){case 0:case 11:case 15:ll(8,n,t);break;case 23:case 22:if(null!==n.memoizedState&&null!==n.memoizedState.cachePool){var r=n.memoizedState.cachePool.pool;null!=r&&r.refCount++}break;case 24:Ds(n.memoizedState.cache)}if(null!==(r=n.child))r.return=n,El=r;else e:for(n=e;null!==El;){var s=(r=El).sibling,i=r.return;if(_l(r),r===n){El=null;break e}if(null!==s){s.return=i,El=s;break e}El=i}}}var tc={getCacheForType:function(e){var t=_s(Ps),n=t.data.get(e);return void 0===n&&(n=e(),t.data.set(e,n)),n}},nc="function"===typeof WeakMap?WeakMap:Map,rc=0,sc=null,ic=null,ac=0,oc=0,lc=null,cc=!1,uc=!1,dc=!1,hc=0,fc=0,mc=0,pc=0,gc=0,yc=0,vc=0,bc=null,wc=null,xc=!1,Nc=0,Sc=1/0,Ec=null,kc=null,_c=0,Tc=null,Cc=null,Ic=0,jc=0,Ac=null,Pc=null,Rc=0,Dc=null;function Oc(){if(0!==(2&rc)&&0!==ac)return ac&-ac;if(null!==D.T){return 0!==Ms?Ms:ju()}return je()}function Lc(){0===yc&&(yc=0===(536870912&ac)||is?Ne():536870912);var e=so.current;return null!==e&&(e.flags|=32),yc}function Mc(e,t,n){(e!==sc||2!==oc&&9!==oc)&&null===e.cancelPendingCommit||(Hc(e,0),zc(e,ac,yc,!1)),ke(e,n),0!==(2&rc)&&e===sc||(e===sc&&(0===(2&rc)&&(pc|=n),4===fc&&zc(e,ac,yc,!1)),Su(e))}function Fc(e,t,n){if(0!==(6&rc))throw Error(a(327));for(var r=!n&&0===(124&t)&&0===(t&e.expiredLanes)||we(e,t),s=r?function(e,t){var n=rc;rc|=2;var r=Wc(),s=Kc();sc!==e||ac!==t?(Ec=null,Sc=te()+500,Hc(e,t)):uc=we(e,t);e:for(;;)try{if(0!==oc&&null!==ic){t=ic;var i=lc;t:switch(oc){case 1:oc=0,lc=null,eu(e,t,i,1);break;case 2:case 9:if(Ys(i)){oc=0,lc=null,Zc(t);break}t=function(){2!==oc&&9!==oc||sc!==e||(oc=7),Su(e)},i.then(t,t);break e;case 3:oc=7;break e;case 4:oc=5;break e;case 7:Ys(i)?(oc=0,lc=null,Zc(t)):(oc=0,lc=null,eu(e,t,i,7));break;case 5:var o=null;switch(ic.tag){case 26:o=ic.memoizedState;case 5:case 27:var l=ic;if(!o||qd(o)){oc=0,lc=null;var c=l.sibling;if(null!==c)ic=c;else{var u=l.return;null!==u?(ic=u,tu(u)):ic=null}break t}}oc=0,lc=null,eu(e,t,i,5);break;case 6:oc=0,lc=null,eu(e,t,i,6);break;case 8:Bc(),fc=6;break e;default:throw Error(a(462))}}Jc();break}catch(d){Gc(e,d)}return vs=ys=null,D.H=r,D.A=s,rc=n,null!==ic?0:(sc=null,ac=0,Cr(),fc)}(e,t):Yc(e,t,!0),i=r;;){if(0===s){uc&&!r&&zc(e,t,0,!1);break}if(n=e.current.alternate,!i||Vc(n)){if(2===s){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;s=bc;var c=l.current.memoizedState.isDehydrated;if(c&&(Hc(l,o).flags|=256),2!==(o=Yc(l,o,!1))){if(dc&&!c){l.errorRecoveryDisabledLanes|=i,pc|=i,s=4;break e}i=wc,wc=s,null!==i&&(null===wc?wc=i:wc.push.apply(wc,i))}s=o}if(i=!1,2!==s)continue}}if(1===s){Hc(e,0),zc(e,t,0,!0);break}e:{switch(r=e,i=s){case 0:case 1:throw Error(a(345));case 4:if((4194048&t)!==t)break;case 6:zc(r,t,yc,!cc);break e;case 2:wc=null;break;case 3:case 5:break;default:throw Error(a(329))}if((62914560&t)===t&&10<(s=Nc+300-te())){if(zc(r,t,yc,!cc),0!==be(r,0,!0))break e;r.timeoutHandle=cd(Uc.bind(null,r,n,wc,Ec,xc,t,yc,pc,vc,cc,i,2,-0,0),s)}else Uc(r,n,wc,Ec,xc,t,yc,pc,vc,cc,i,0,-0,0)}break}s=Yc(e,t,!1),i=!1}Su(e)}function Uc(e,t,n,r,s,i,o,l,c,u,d,h,f,m){if(e.timeoutHandle=-1,(8192&(h=t.subtreeFlags)||16785408===(16785408&h))&&(Bd={stylesheets:null,count:0,unsuspend:Hd},Yl(t),null!==(h=function(){if(null===Bd)throw Error(a(475));var e=Bd;return e.stylesheets&&0===e.count&&Kd(e,e.stylesheets),0<e.count?function(t){var n=setTimeout(function(){if(e.stylesheets&&Kd(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4);return e.unsuspend=t,function(){e.unsuspend=null,clearTimeout(n)}}:null}())))return e.cancelPendingCommit=h(ru.bind(null,e,t,i,n,r,s,o,l,c,d,1,f,m)),void zc(e,i,o,!u);ru(e,t,i,n,r,s,o,l,c)}function Vc(e){for(var t=e;;){var n=t.tag;if((0===n||11===n||15===n)&&16384&t.flags&&(null!==(n=t.updateQueue)&&null!==(n=n.stores)))for(var r=0;r<n.length;r++){var s=n[r],i=s.getSnapshot;s=s.value;try{if(!Yn(i(),s))return!1}catch(a){return!1}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function zc(e,t,n,r){t&=~gc,t&=~pc,e.suspendedLanes|=t,e.pingedLanes&=~t,r&&(e.warmLanes|=t),r=e.expirationTimes;for(var s=t;0<s;){var i=31-fe(s),a=1<<i;r[i]=-1,s&=~a}0!==n&&_e(e,n,t)}function qc(){return 0!==(6&rc)||(Eu(0,!1),!1)}function Bc(){if(null!==ic){if(0===oc)var e=ic.return;else vs=ys=null,Fi(e=ic),Ya=null,Xa=0,e=ic;for(;null!==e;)al(e.alternate,e),e=e.return;ic=null}}function Hc(e,t){var n=e.timeoutHandle;-1!==n&&(e.timeoutHandle=-1,ud(n)),null!==(n=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,n()),Bc(),sc=e,ic=n=Fr(e.current,null),ac=t,oc=0,lc=null,cc=!1,uc=we(e,t),dc=!1,vc=yc=gc=pc=mc=fc=0,wc=bc=null,xc=!1,0!==(8&t)&&(t|=32&t);var r=e.entangledLanes;if(0!==r)for(e=e.entanglements,r&=t;0<r;){var s=31-fe(r),i=1<<s;t|=e[s],r&=~i}return hc=t,Cr(),n}function Gc(e,t){bi=null,D.H=Ga,t===Gs||t===Ks?(t=Zs(),oc=3):t===Ws?(t=Zs(),oc=4):oc=t===To?8:null!==t&&"object"===typeof t&&"function"===typeof t.then?6:1,lc=t,null===ic&&(fc=1,No(e,Er(t,e.current)))}function Wc(){var e=D.H;return D.H=Ga,null===e?Ga:e}function Kc(){var e=D.A;return D.A=tc,e}function Qc(){fc=4,cc||(4194048&ac)!==ac&&null!==so.current||(uc=!0),0===(134217727&mc)&&0===(134217727&pc)||null===sc||zc(sc,ac,yc,!1)}function Yc(e,t,n){var r=rc;rc|=2;var s=Wc(),i=Kc();sc===e&&ac===t||(Ec=null,Hc(e,t)),t=!1;var a=fc;e:for(;;)try{if(0!==oc&&null!==ic){var o=ic,l=lc;switch(oc){case 8:Bc(),a=6;break e;case 3:case 2:case 9:case 6:null===so.current&&(t=!0);var c=oc;if(oc=0,lc=null,eu(e,o,l,c),n&&uc){a=0;break e}break;default:c=oc,oc=0,lc=null,eu(e,o,l,c)}}Xc(),a=fc;break}catch(u){Gc(e,u)}return t&&e.shellSuspendCounter++,vs=ys=null,rc=r,D.H=s,D.A=i,null===ic&&(sc=null,ac=0,Cr()),a}function Xc(){for(;null!==ic;)$c(ic)}function Jc(){for(;null!==ic&&!Z();)$c(ic)}function $c(e){var t=$o(e.alternate,e,hc);e.memoizedProps=e.pendingProps,null===t?tu(e):ic=t}function Zc(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=Mo(n,t,t.pendingProps,t.type,void 0,ac);break;case 11:t=Mo(n,t,t.pendingProps,t.type.render,t.ref,ac);break;case 5:Fi(t);default:al(n,t),t=$o(n,t=ic=Ur(t,hc),hc)}e.memoizedProps=e.pendingProps,null===t?tu(e):ic=t}function eu(e,t,n,r){vs=ys=null,Fi(t),Ya=null,Xa=0;var s=t.return;try{if(function(e,t,n,r,s){if(n.flags|=32768,null!==r&&"object"===typeof r&&"function"===typeof r.then){if(null!==(t=n.alternate)&&Ss(t,n,s,!0),null!==(n=so.current)){switch(n.tag){case 13:return null===io?Qc():null===n.alternate&&0===fc&&(fc=3),n.flags&=-257,n.flags|=65536,n.lanes=s,r===Qs?n.flags|=16384:(null===(t=n.updateQueue)?n.updateQueue=new Set([r]):t.add(r),hu(e,r,s)),!1;case 22:return n.flags|=65536,r===Qs?n.flags|=16384:(null===(t=n.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([r])},n.updateQueue=t):null===(n=t.retryQueue)?t.retryQueue=new Set([r]):n.add(r),hu(e,r,s)),!1}throw Error(a(435,n.tag))}return hu(e,r,s),Qc(),!1}if(is)return null!==(t=so.current)?(0===(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=s,r!==ls&&ps(Er(e=Error(a(422),{cause:r}),n))):(r!==ls&&ps(Er(t=Error(a(423),{cause:r}),n)),(e=e.current.alternate).flags|=65536,s&=-s,e.lanes|=s,r=Er(r,n),oi(e,s=Eo(e.stateNode,r,s)),4!==fc&&(fc=2)),!1;var i=Error(a(520),{cause:r});if(i=Er(i,n),null===bc?bc=[i]:bc.push(i),4!==fc&&(fc=2),null===t)return!0;r=Er(r,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=s&-s,n.lanes|=e,oi(n,e=Eo(n.stateNode,r,e)),!1;case 1:if(t=n.type,i=n.stateNode,0===(128&n.flags)&&("function"===typeof t.getDerivedStateFromError||null!==i&&"function"===typeof i.componentDidCatch&&(null===kc||!kc.has(i))))return n.flags|=65536,s&=-s,n.lanes|=s,_o(s=ko(s),e,n,r),oi(n,s),!1}n=n.return}while(null!==n);return!1}(e,s,t,n,ac))return fc=1,No(e,Er(n,e.current)),void(ic=null)}catch(i){if(null!==s)throw ic=s,i;return fc=1,No(e,Er(n,e.current)),void(ic=null)}32768&t.flags?(is||1===r?e=!0:uc||0!==(536870912&ac)?e=!1:(cc=e=!0,(2===r||9===r||3===r||6===r)&&(null!==(r=so.current)&&13===r.tag&&(r.flags|=16384))),nu(t,e)):tu(t)}function tu(e){var t=e;do{if(0!==(32768&t.flags))return void nu(t,cc);e=t.return;var n=sl(t.alternate,t,hc);if(null!==n)return void(ic=n);if(null!==(t=t.sibling))return void(ic=t);ic=t=e}while(null!==t);0===fc&&(fc=5)}function nu(e,t){do{var n=il(e.alternate,e);if(null!==n)return n.flags&=32767,void(ic=n);if(null!==(n=e.return)&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&null!==(e=e.sibling))return void(ic=e);ic=e=n}while(null!==e);fc=6,ic=null}function ru(e,t,n,r,s,i,o,l,c){e.cancelPendingCommit=null;do{lu()}while(0!==_c);if(0!==(6&rc))throw Error(a(327));if(null!==t){if(t===e.current)throw Error(a(177));if(i=t.lanes|t.childLanes,function(e,t,n,r,s,i){var a=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=a&~n;0<n;){var u=31-fe(n),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var f=h[u];null!==f&&(f.lane&=-536870913)}n&=~d}0!==r&&_e(e,r,0),0!==i&&0===s&&0!==e.tag&&(e.suspendedLanes|=i&~(a&~t))}(e,n,i|=Tr,o,l,c),e===sc&&(ic=sc=null,ac=0),Cc=t,Tc=e,Ic=n,jc=i,Ac=s,Pc=r,0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?(e.callbackNode=null,e.callbackPriority=0,J(ie,function(){return cu(),null})):(e.callbackNode=null,e.callbackPriority=0),r=0!==(13878&t.flags),0!==(13878&t.subtreeFlags)||r){r=D.T,D.T=null,s=O.p,O.p=2,o=rc,rc|=4;try{!function(e,t){if(e=e.containerInfo,nd=rh,tr(e=er(e))){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var s=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(g){n=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,f=null;t:for(;;){for(var m;h!==n||0!==s&&3!==h.nodeType||(l=o+s),h!==i||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)f=h,h=m;for(;;){if(h===e)break t;if(f===n&&++u===s&&(l=o),f===i&&++d===r&&(c=o),null!==(m=h.nextSibling))break;f=(h=f).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(rd={focusedElem:e,selectionRange:n},rh=!1,El=t;null!==El;)if(e=(t=El).child,0!==(1024&t.subtreeFlags)&&null!==e)e.return=t,El=e;else for(;null!==El;){switch(i=(t=El).alternate,e=t.flags,t.tag){case 0:case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(0!==(1024&e)&&null!==i){e=void 0,n=t,s=i.memoizedProps,i=i.memoizedState,r=n.stateNode;try{var p=yo(n.type,s,(n.elementType,n.type));e=r.getSnapshotBeforeUpdate(p,i),r.__reactInternalSnapshotBeforeUpdate=e}catch(y){du(n,n.return,y)}}break;case 3:if(0!==(1024&e))if(9===(n=(e=t.stateNode.containerInfo).nodeType))gd(e);else if(1===n)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":gd(e);break;default:e.textContent=""}break;default:if(0!==(1024&e))throw Error(a(163))}if(null!==(e=t.sibling)){e.return=t.return,El=e;break}El=t.return}}(e,t)}finally{rc=o,O.p=s,D.T=r}}_c=1,su(),iu(),au()}}function su(){if(1===_c){_c=0;var e=Tc,t=Cc,n=0!==(13878&t.flags);if(0!==(13878&t.subtreeFlags)||n){n=D.T,D.T=null;var r=O.p;O.p=2;var s=rc;rc|=4;try{Ol(t,e);var i=rd,a=er(e.containerInfo),o=i.focusedElem,l=i.selectionRange;if(a!==o&&o&&o.ownerDocument&&Zn(o.ownerDocument.documentElement,o)){if(null!==l&&tr(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var f=h.getSelection(),m=o.textContent.length,p=Math.min(l.start,m),g=void 0===l.end?p:Math.min(l.end,m);!f.extend&&p>g&&(a=g,g=p,p=a);var y=$n(o,p),v=$n(o,g);if(y&&v&&(1!==f.rangeCount||f.anchorNode!==y.node||f.anchorOffset!==y.offset||f.focusNode!==v.node||f.focusOffset!==v.offset)){var b=d.createRange();b.setStart(y.node,y.offset),f.removeAllRanges(),p>g?(f.addRange(b),f.extend(v.node,v.offset)):(b.setEnd(v.node,v.offset),f.addRange(b))}}}}for(d=[],f=o;f=f.parentNode;)1===f.nodeType&&d.push({element:f,left:f.scrollLeft,top:f.scrollTop});for("function"===typeof o.focus&&o.focus(),o=0;o<d.length;o++){var w=d[o];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}rh=!!nd,rd=nd=null}finally{rc=s,O.p=r,D.T=n}}e.current=t,_c=2}}function iu(){if(2===_c){_c=0;var e=Tc,t=Cc,n=0!==(8772&t.flags);if(0!==(8772&t.subtreeFlags)||n){n=D.T,D.T=null;var r=O.p;O.p=2;var s=rc;rc|=4;try{kl(e,t.alternate,t)}finally{rc=s,O.p=r,D.T=n}}_c=3}}function au(){if(4===_c||3===_c){_c=0,ee();var e=Tc,t=Cc,n=Ic,r=Pc;0!==(10256&t.subtreeFlags)||0!==(10256&t.flags)?_c=5:(_c=0,Cc=Tc=null,ou(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(kc=null),Ie(n),t=t.stateNode,de&&"function"===typeof de.onCommitFiberRoot)try{de.onCommitFiberRoot(ue,t,void 0,128===(128&t.current.flags))}catch(l){}if(null!==r){t=D.T,s=O.p,O.p=2,D.T=null;try{for(var i=e.onRecoverableError,a=0;a<r.length;a++){var o=r[a];i(o.value,{componentStack:o.stack})}}finally{D.T=t,O.p=s}}0!==(3&Ic)&&lu(),Su(e),s=e.pendingLanes,0!==(4194090&n)&&0!==(42&s)?e===Dc?Rc++:(Rc=0,Dc=e):Rc=0,Eu(0,!1)}}function ou(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,Ds(t)))}function lu(e){return su(),iu(),au(),cu()}function cu(){if(5!==_c)return!1;var e=Tc,t=jc;jc=0;var n=Ie(Ic),r=D.T,s=O.p;try{O.p=32>n?32:n,D.T=null,n=Ac,Ac=null;var i=Tc,o=Ic;if(_c=0,Cc=Tc=null,Ic=0,0!==(6&rc))throw Error(a(331));var l=rc;if(rc|=4,$l(i.current),Hl(i,i.current,o,n),rc=l,Eu(0,!1),de&&"function"===typeof de.onPostCommitFiberRoot)try{de.onPostCommitFiberRoot(ue,i)}catch(c){}return!0}finally{O.p=s,D.T=r,ou(e,t)}}function uu(e,t,n){t=Er(n,t),null!==(e=ii(e,t=Eo(e.stateNode,t,2),2))&&(ke(e,2),Su(e))}function du(e,t,n){if(3===e.tag)uu(e,e,n);else for(;null!==t;){if(3===t.tag){uu(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===kc||!kc.has(r))){e=Er(n,e),null!==(r=ii(t,n=ko(2),2))&&(_o(n,r,t,e),ke(r,2),Su(r));break}}t=t.return}}function hu(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new nc;var s=new Set;r.set(t,s)}else void 0===(s=r.get(t))&&(s=new Set,r.set(t,s));s.has(n)||(dc=!0,s.add(n),e=fu.bind(null,e,t,n),t.then(e,e))}function fu(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,sc===e&&(ac&n)===n&&(4===fc||3===fc&&(62914560&ac)===ac&&300>te()-Nc?0===(2&rc)&&Hc(e,0):gc|=n,vc===ac&&(vc=0)),Su(e)}function mu(e,t){0===t&&(t=Se()),null!==(e=Ar(e,t))&&(ke(e,t),Su(e))}function pu(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),mu(e,n)}function gu(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;null!==s&&(n=s.retryLane);break;case 19:r=e.stateNode;break;case 22:r=e.stateNode._retryCache;break;default:throw Error(a(314))}null!==r&&r.delete(t),mu(e,n)}var yu=null,vu=null,bu=!1,wu=!1,xu=!1,Nu=0;function Su(e){e!==vu&&null===e.next&&(null===vu?yu=vu=e:vu=vu.next=e),wu=!0,bu||(bu=!0,hd(function(){0!==(6&rc)?J(re,ku):_u()}))}function Eu(e,t){if(!xu&&wu){xu=!0;do{for(var n=!1,r=yu;null!==r;){if(!t)if(0!==e){var s=r.pendingLanes;if(0===s)var i=0;else{var a=r.suspendedLanes,o=r.pingedLanes;i=(1<<31-fe(42|e)+1)-1,i=201326741&(i&=s&~(a&~o))?201326741&i|1:i?2|i:0}0!==i&&(n=!0,Iu(r,i))}else i=ac,0===(3&(i=be(r,r===sc?i:0,null!==r.cancelPendingCommit||-1!==r.timeoutHandle)))||we(r,i)||(n=!0,Iu(r,i));r=r.next}}while(n);xu=!1}}function ku(){_u()}function _u(){wu=bu=!1;var e=0;0!==Nu&&(function(){var e=window.event;if(e&&"popstate"===e.type)return e!==ld&&(ld=e,!0);return ld=null,!1}()&&(e=Nu),Nu=0);for(var t=te(),n=null,r=yu;null!==r;){var s=r.next,i=Tu(r,t);0===i?(r.next=null,null===n?yu=s:n.next=s,null===s&&(vu=n)):(n=r,(0!==e||0!==(3&i))&&(wu=!0)),r=s}Eu(e,!1)}function Tu(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,i=-62914561&e.pendingLanes;0<i;){var a=31-fe(i),o=1<<a,l=s[a];-1===l?0!==(o&n)&&0===(o&r)||(s[a]=xe(o,t)):l<=t&&(e.expiredLanes|=o),i&=~o}if(n=ac,n=be(e,e===(t=sc)?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),r=e.callbackNode,0===n||e===t&&(2===oc||9===oc)||null!==e.cancelPendingCommit)return null!==r&&null!==r&&$(r),e.callbackNode=null,e.callbackPriority=0;if(0===(3&n)||we(e,n)){if((t=n&-n)===e.callbackPriority)return t;switch(null!==r&&$(r),Ie(n)){case 2:case 8:n=se;break;case 32:default:n=ie;break;case 268435456:n=oe}return r=Cu.bind(null,e),n=J(n,r),e.callbackPriority=t,e.callbackNode=n,t}return null!==r&&null!==r&&$(r),e.callbackPriority=2,e.callbackNode=null,2}function Cu(e,t){if(0!==_c&&5!==_c)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(lu()&&e.callbackNode!==n)return null;var r=ac;return 0===(r=be(e,e===sc?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Fc(e,r,t),Tu(e,te()),null!=e.callbackNode&&e.callbackNode===n?Cu.bind(null,e):null)}function Iu(e,t){if(lu())return null;Fc(e,t,!0)}function ju(){return 0===Nu&&(Nu=Ne()),Nu}function Au(e){return null==e||"symbol"===typeof e||"boolean"===typeof e?null:"function"===typeof e?e:It(""+e)}function Pu(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}for(var Ru=0;Ru<xr.length;Ru++){var Du=xr[Ru];Nr(Du.toLowerCase(),"on"+(Du[0].toUpperCase()+Du.slice(1)))}Nr(fr,"onAnimationEnd"),Nr(mr,"onAnimationIteration"),Nr(pr,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(gr,"onTransitionRun"),Nr(yr,"onTransitionStart"),Nr(vr,"onTransitionCancel"),Nr(br,"onTransitionEnd"),Ye("onMouseEnter",["mouseout","mouseover"]),Ye("onMouseLeave",["mouseout","mouseover"]),Ye("onPointerEnter",["pointerout","pointerover"]),Ye("onPointerLeave",["pointerout","pointerover"]),Qe("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Qe("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Qe("onBeforeInput",["compositionend","keypress","textInput","paste"]),Qe("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Qe("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ou="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lu=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ou));function Mu(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var i=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){vo(u)}s.currentTarget=null,i=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==i&&s.isPropagationStopped())break e;i=o,s.currentTarget=c;try{i(s)}catch(u){vo(u)}s.currentTarget=null,i=l}}}}function Fu(e,t){var n=t[Oe];void 0===n&&(n=t[Oe]=new Set);var r=e+"__bubble";n.has(r)||(qu(t,e,2,!1),n.add(r))}function Uu(e,t,n){var r=0;t&&(r|=4),qu(n,e,r,t)}var Vu="_reactListening"+Math.random().toString(36).slice(2);function zu(e){if(!e[Vu]){e[Vu]=!0,We.forEach(function(t){"selectionchange"!==t&&(Lu.has(t)||Uu(t,!1,e),Uu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Vu]||(t[Vu]=!0,Uu("selectionchange",!1,t))}}function qu(e,t,n,r){switch(uh(t)){case 2:var s=sh;break;case 8:s=ih;break;default:s=ah}n=s.bind(null,t,n,e),s=void 0,!Ut||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),r?void 0!==s?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):void 0!==s?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function Bu(e,t,n,r,s){var i=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===s)break;if(4===a)for(a=r.return;null!==a;){var c=a.tag;if((3===c||4===c)&&a.stateNode.containerInfo===s)return;a=a.return}for(;null!==o;){if(null===(a=ze(o)))return;if(5===(c=a.tag)||6===c||26===c||27===c){r=i=a;continue e}o=o.parentNode}}r=r.return}Lt(function(){var r=i,s=At(n),a=[];e:{var o=wr.get(e);if(void 0!==o){var c=Zt,u=e;switch(e){case"keypress":if(0===Gt(n))break e;case"keydown":case"keyup":c=pn;break;case"focusin":u="focus",c=an;break;case"focusout":u="blur",c=an;break;case"beforeblur":case"afterblur":c=an;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=rn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=sn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=yn;break;case fr:case mr:case pr:c=on;break;case br:c=vn;break;case"scroll":case"scrollend":c=tn;break;case"wheel":c=bn;break;case"copy":case"cut":case"paste":c=ln;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=gn;break;case"toggle":case"beforetoggle":c=wn}var d=0!==(4&t),h=!d&&("scroll"===e||"scrollend"===e),f=d?null!==o?o+"Capture":null:o;d=[];for(var m,p=r;null!==p;){var g=p;if(m=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===m||null===f||null!=(g=Mt(p,f))&&d.push(Hu(p,g,m)),h)break;p=p.return}0<d.length&&(o=new c(o,u,null,n,s),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===jt||!(u=n.relatedTarget||n.fromElement)||!ze(u)&&!u[De])&&(c||o)&&(o=s.window===s?s:(o=s.ownerDocument)?o.defaultView||o.parentWindow:window,c?(c=r,null!==(u=(u=n.relatedTarget||n.toElement)?ze(u):null)&&(h=l(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=r),c!==u)){if(d=rn,g="onMouseLeave",f="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=gn,g="onPointerLeave",f="onPointerEnter",p="pointer"),h=null==c?o:Be(c),m=null==u?o:Be(u),(o=new d(g,p+"leave",c,n,s)).target=h,o.relatedTarget=m,g=null,ze(s)===r&&((d=new d(f,p+"enter",u,n,s)).target=m,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(f=u,p=0,m=d=c;m;m=Wu(m))p++;for(m=0,g=f;g;g=Wu(g))m++;for(;0<p-m;)d=Wu(d),p--;for(;0<m-p;)f=Wu(f),m--;for(;p--;){if(d===f||null!==f&&d===f.alternate)break e;d=Wu(d),f=Wu(f)}d=null}else d=null;null!==c&&Ku(a,o,c,d,!1),null!==u&&null!==h&&Ku(a,h,u,d,!0)}if("select"===(c=(o=r?Be(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===c&&"file"===o.type)var y=Fn;else if(Pn(o))if(Un)y=Qn;else{y=Wn;var v=Gn}else!(c=o.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==o.type&&"radio"!==o.type?r&&_t(r.elementType)&&(y=Fn):y=Kn;switch(y&&(y=y(e,r))?Rn(a,y,n,s):(v&&v(e,o,r),"focusout"===e&&r&&"number"===o.type&&null!=r.memoizedProps.value&&vt(o,"number",o.value)),v=r?Be(r):window,e){case"focusin":(Pn(v)||"true"===v.contentEditable)&&(rr=v,sr=r,ir=null);break;case"focusout":ir=sr=rr=null;break;case"mousedown":ar=!0;break;case"contextmenu":case"mouseup":case"dragend":ar=!1,or(a,n,s);break;case"selectionchange":if(nr)break;case"keydown":case"keyup":or(a,n,s)}var b;if(Nn)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else jn?Cn(e,n)&&(w="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(w="onCompositionStart");w&&(kn&&"ko"!==n.locale&&(jn||"onCompositionStart"!==w?"onCompositionEnd"===w&&jn&&(b=Ht()):(qt="value"in(zt=s)?zt.value:zt.textContent,jn=!0)),0<(v=Gu(r,w)).length&&(w=new cn(w,e,null,n,s),a.push({event:w,listeners:v}),b?w.data=b:null!==(b=In(n))&&(w.data=b))),(b=En?function(e,t){switch(e){case"compositionend":return In(t);case"keypress":return 32!==t.which?null:(Tn=!0,_n);case"textInput":return(e=t.data)===_n&&Tn?null:e;default:return null}}(e,n):function(e,t){if(jn)return"compositionend"===e||!Nn&&Cn(e,t)?(e=Ht(),Bt=qt=zt=null,jn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return kn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(w=Gu(r,"onBeforeInput")).length&&(v=new cn("onBeforeInput","beforeinput",null,n,s),a.push({event:v,listeners:w}),v.data=b)),function(e,t,n,r,s){if("submit"===t&&n&&n.stateNode===s){var i=Au((s[Re]||null).action),a=r.submitter;a&&null!==(t=(t=a[Re]||null)?Au(t.formAction):a.getAttribute("formAction"))&&(i=t,a=null);var o=new Zt("action","action",null,r,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(r.defaultPrevented){if(0!==Nu){var e=a?Pu(s,a):new FormData(s);Aa(n,{pending:!0,data:e,method:s.method,action:i},null,e)}}else"function"===typeof i&&(o.preventDefault(),e=a?Pu(s,a):new FormData(s),Aa(n,{pending:!0,data:e,method:s.method,action:i},i,e))},currentTarget:s}]})}}(a,e,r,n,s)}Mu(a,t)})}function Hu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gu(e,t){for(var n=t+"Capture",r=[];null!==e;){var s=e,i=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===i||(null!=(s=Mt(e,n))&&r.unshift(Hu(e,s,i)),null!=(s=Mt(e,t))&&r.push(Hu(e,s,i))),3===e.tag)return r;e=e.return}return[]}function Wu(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function Ku(e,t,n,r,s){for(var i=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===r)break;5!==o&&26!==o&&27!==o||null===c||(l=c,s?null!=(c=Mt(n,i))&&a.unshift(Hu(n,c,l)):s||null!=(c=Mt(n,i))&&a.push(Hu(n,c,l))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Qu=/\r\n?/g,Yu=/\u0000|\uFFFD/g;function Xu(e){return("string"===typeof e?e:""+e).replace(Qu,"\n").replace(Yu,"")}function Ju(e,t){return t=Xu(t),Xu(e)===t}function $u(){}function Zu(e,t,n,r,s,i){switch(n){case"children":"string"===typeof r?"body"===t||"textarea"===t&&""===r||Nt(e,r):("number"===typeof r||"bigint"===typeof r)&&"body"!==t&&Nt(e,""+r);break;case"className":nt(e,"class",r);break;case"tabIndex":nt(e,"tabindex",r);break;case"dir":case"role":case"viewBox":case"width":case"height":nt(e,n,r);break;case"style":kt(e,r,i);break;case"data":if("object"!==t){nt(e,"data",r);break}case"src":case"href":if(""===r&&("a"!==t||"href"!==n)){e.removeAttribute(n);break}if(null==r||"function"===typeof r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"action":case"formAction":if("function"===typeof r){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"===typeof i&&("formAction"===n?("input"!==t&&Zu(e,t,"name",s.name,s,null),Zu(e,t,"formEncType",s.formEncType,s,null),Zu(e,t,"formMethod",s.formMethod,s,null),Zu(e,t,"formTarget",s.formTarget,s,null)):(Zu(e,t,"encType",s.encType,s,null),Zu(e,t,"method",s.method,s,null),Zu(e,t,"target",s.target,s,null))),null==r||"symbol"===typeof r||"boolean"===typeof r){e.removeAttribute(n);break}r=It(""+r),e.setAttribute(n,r);break;case"onClick":null!=r&&(e.onclick=$u);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"multiple":e.multiple=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"muted":e.muted=r&&"function"!==typeof r&&"symbol"!==typeof r;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==r||"function"===typeof r||"boolean"===typeof r||"symbol"===typeof r){e.removeAttribute("xlink:href");break}n=It(""+r),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""+r):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":!0===r?e.setAttribute(n,""):!1!==r&&null!=r&&"function"!==typeof r&&"symbol"!==typeof r?e.setAttribute(n,r):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":null!=r&&"function"!==typeof r&&"symbol"!==typeof r&&!isNaN(r)&&1<=r?e.setAttribute(n,r):e.removeAttribute(n);break;case"rowSpan":case"start":null==r||"function"===typeof r||"symbol"===typeof r||isNaN(r)?e.removeAttribute(n):e.setAttribute(n,r);break;case"popover":Fu("beforetoggle",e),Fu("toggle",e),tt(e,"popover",r);break;case"xlinkActuate":rt(e,"http://www.w3.org/1999/xlink","xlink:actuate",r);break;case"xlinkArcrole":rt(e,"http://www.w3.org/1999/xlink","xlink:arcrole",r);break;case"xlinkRole":rt(e,"http://www.w3.org/1999/xlink","xlink:role",r);break;case"xlinkShow":rt(e,"http://www.w3.org/1999/xlink","xlink:show",r);break;case"xlinkTitle":rt(e,"http://www.w3.org/1999/xlink","xlink:title",r);break;case"xlinkType":rt(e,"http://www.w3.org/1999/xlink","xlink:type",r);break;case"xmlBase":rt(e,"http://www.w3.org/XML/1998/namespace","xml:base",r);break;case"xmlLang":rt(e,"http://www.w3.org/XML/1998/namespace","xml:lang",r);break;case"xmlSpace":rt(e,"http://www.w3.org/XML/1998/namespace","xml:space",r);break;case"is":tt(e,"is",r);break;case"innerText":case"textContent":break;default:(!(2<n.length)||"o"!==n[0]&&"O"!==n[0]||"n"!==n[1]&&"N"!==n[1])&&tt(e,n=Tt.get(n)||n,r)}}function ed(e,t,n,r,s,i){switch(n){case"style":kt(e,r,i);break;case"dangerouslySetInnerHTML":if(null!=r){if("object"!==typeof r||!("__html"in r))throw Error(a(61));if(null!=(n=r.__html)){if(null!=s.children)throw Error(a(60));e.innerHTML=n}}break;case"children":"string"===typeof r?Nt(e,r):("number"===typeof r||"bigint"===typeof r)&&Nt(e,""+r);break;case"onScroll":null!=r&&Fu("scroll",e);break;case"onScrollEnd":null!=r&&Fu("scrollend",e);break;case"onClick":null!=r&&(e.onclick=$u);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:Ke.hasOwnProperty(n)||("o"!==n[0]||"n"!==n[1]||(s=n.endsWith("Capture"),t=n.slice(2,s?n.length-7:void 0),"function"===typeof(i=null!=(i=e[Re]||null)?i[n]:null)&&e.removeEventListener(t,i,s),"function"!==typeof r)?n in e?e[n]=r:!0===r?e.setAttribute(n,""):tt(e,n,r):("function"!==typeof i&&null!==i&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,r,s)))}}function td(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Fu("error",e),Fu("load",e);var r,s=!1,i=!1;for(r in n)if(n.hasOwnProperty(r)){var o=n[r];if(null!=o)switch(r){case"src":s=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Zu(e,t,r,o,n,null)}}return i&&Zu(e,t,"srcSet",n.srcSet,n,null),void(s&&Zu(e,t,"src",n.src,n,null));case"input":Fu("invalid",e);var l=r=o=i=null,c=null,u=null;for(s in n)if(n.hasOwnProperty(s)){var d=n[s];if(null!=d)switch(s){case"name":i=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(a(137,t));break;default:Zu(e,t,s,d,n,null)}}return yt(e,r,l,c,u,o,i,!1),void dt(e);case"select":for(i in Fu("invalid",e),s=o=r=null,n)if(n.hasOwnProperty(i)&&null!=(l=n[i]))switch(i){case"value":r=l;break;case"defaultValue":o=l;break;case"multiple":s=l;default:Zu(e,t,i,l,n,null)}return t=r,n=o,e.multiple=!!s,void(null!=t?bt(e,!!s,t,!1):null!=n&&bt(e,!!s,n,!0));case"textarea":for(o in Fu("invalid",e),r=i=s=null,n)if(n.hasOwnProperty(o)&&null!=(l=n[o]))switch(o){case"value":s=l;break;case"defaultValue":i=l;break;case"children":r=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(a(91));break;default:Zu(e,t,o,l,n,null)}return xt(e,s,i,r),void dt(e);case"option":for(c in n)if(n.hasOwnProperty(c)&&null!=(s=n[c]))if("selected"===c)e.selected=s&&"function"!==typeof s&&"symbol"!==typeof s;else Zu(e,t,c,s,n,null);return;case"dialog":Fu("beforetoggle",e),Fu("toggle",e),Fu("cancel",e),Fu("close",e);break;case"iframe":case"object":Fu("load",e);break;case"video":case"audio":for(s=0;s<Ou.length;s++)Fu(Ou[s],e);break;case"image":Fu("error",e),Fu("load",e);break;case"details":Fu("toggle",e);break;case"embed":case"source":case"link":Fu("error",e),Fu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in n)if(n.hasOwnProperty(u)&&null!=(s=n[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,t));default:Zu(e,t,u,s,n,null)}return;default:if(_t(t)){for(d in n)n.hasOwnProperty(d)&&(void 0!==(s=n[d])&&ed(e,t,d,s,n,void 0));return}}for(l in n)n.hasOwnProperty(l)&&(null!=(s=n[l])&&Zu(e,t,l,s,n,null))}var nd=null,rd=null;function sd(e){return 9===e.nodeType?e:e.ownerDocument}function id(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function ad(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function od(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"bigint"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ld=null;var cd="function"===typeof setTimeout?setTimeout:void 0,ud="function"===typeof clearTimeout?clearTimeout:void 0,dd="function"===typeof Promise?Promise:void 0,hd="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof dd?function(e){return dd.resolve(null).then(e).catch(fd)}:cd;function fd(e){setTimeout(function(){throw e})}function md(e){return"head"===e}function pd(e,t){var n=t,r=0,s=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0<r&&8>r){n=r;var a=e.ownerDocument;if(1&n&&Nd(a.documentElement),2&n&&Nd(a.body),4&n)for(Nd(n=a.head),a=n.firstChild;a;){var o=a.nextSibling,l=a.nodeName;a[Ue]||"SCRIPT"===l||"STYLE"===l||"LINK"===l&&"stylesheet"===a.rel.toLowerCase()||n.removeChild(a),a=o}}if(0===s)return e.removeChild(i),void Ch(t);s--}else"$"===n||"$?"===n||"$!"===n?s++:r=n.charCodeAt(0)-48;else r=0;n=i}while(n);Ch(t)}function gd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":gd(n),Ve(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===n.rel.toLowerCase())continue}e.removeChild(n)}}function yd(e){return"$!"===e.data||"$?"===e.data&&"complete"===e.ownerDocument.readyState}function vd(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"F!"===t||"F"===t)break;if("/$"===t)return null}}return e}var bd=null;function wd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}function xd(e,t,n){switch(t=sd(n),e){case"html":if(!(e=t.documentElement))throw Error(a(452));return e;case"head":if(!(e=t.head))throw Error(a(453));return e;case"body":if(!(e=t.body))throw Error(a(454));return e;default:throw Error(a(451))}}function Nd(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ve(e)}var Sd=new Map,Ed=new Set;function kd(e){return"function"===typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var _d=O.d;O.d={f:function(){var e=_d.f(),t=qc();return e||t},r:function(e){var t=qe(e);null!==t&&5===t.tag&&"form"===t.type?Ra(t):_d.r(e)},D:function(e){_d.D(e),Cd("dns-prefetch",e,null)},C:function(e,t){_d.C(e,t),Cd("preconnect",e,t)},L:function(e,t,n){_d.L(e,t,n);var r=Td;if(r&&e&&t){var s='link[rel="preload"][as="'+pt(t)+'"]';"image"===t&&n&&n.imageSrcSet?(s+='[imagesrcset="'+pt(n.imageSrcSet)+'"]',"string"===typeof n.imageSizes&&(s+='[imagesizes="'+pt(n.imageSizes)+'"]')):s+='[href="'+pt(e)+'"]';var i=s;switch(t){case"style":i=jd(e);break;case"script":i=Rd(e)}Sd.has(i)||(e=h({rel:"preload",href:"image"===t&&n&&n.imageSrcSet?void 0:e,as:t},n),Sd.set(i,e),null!==r.querySelector(s)||"style"===t&&r.querySelector(Ad(i))||"script"===t&&r.querySelector(Dd(i))||(td(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}},m:function(e,t){_d.m(e,t);var n=Td;if(n&&e){var r=t&&"string"===typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+pt(r)+'"][href="'+pt(e)+'"]',i=s;switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":i=Rd(e)}if(!Sd.has(i)&&(e=h({rel:"modulepreload",href:e},t),Sd.set(i,e),null===n.querySelector(s))){switch(r){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(Dd(i)))return}td(r=n.createElement("link"),"link",e),Ge(r),n.head.appendChild(r)}}},X:function(e,t){_d.X(e,t);var n=Td;if(n&&e){var r=He(n).hoistableScripts,s=Rd(e),i=r.get(s);i||((i=n.querySelector(Dd(s)))||(e=h({src:e,async:!0},t),(t=Sd.get(s))&&Fd(e,t),Ge(i=n.createElement("script")),td(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}},S:function(e,t,n){_d.S(e,t,n);var r=Td;if(r&&e){var s=He(r).hoistableStyles,i=jd(e);t=t||"default";var a=s.get(i);if(!a){var o={loading:0,preload:null};if(a=r.querySelector(Ad(i)))o.loading=5;else{e=h({rel:"stylesheet",href:e,"data-precedence":t},n),(n=Sd.get(i))&&Md(e,n);var l=a=r.createElement("link");Ge(l),td(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,Ld(a,t,r)}a={type:"stylesheet",instance:a,count:1,state:o},s.set(i,a)}}},M:function(e,t){_d.M(e,t);var n=Td;if(n&&e){var r=He(n).hoistableScripts,s=Rd(e),i=r.get(s);i||((i=n.querySelector(Dd(s)))||(e=h({src:e,async:!0,type:"module"},t),(t=Sd.get(s))&&Fd(e,t),Ge(i=n.createElement("script")),td(i,"link",e),n.head.appendChild(i)),i={type:"script",instance:i,count:1,state:null},r.set(s,i))}}};var Td="undefined"===typeof document?null:document;function Cd(e,t,n){var r=Td;if(r&&"string"===typeof t&&t){var s=pt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"===typeof n&&(s+='[crossorigin="'+n+'"]'),Ed.has(s)||(Ed.add(s),e={rel:e,crossOrigin:n,href:t},null===r.querySelector(s)&&(td(t=r.createElement("link"),"link",e),Ge(t),r.head.appendChild(t)))}}function Id(e,t,n,r){var s,i,o,l,c=(c=H.current)?kd(c):null;if(!c)throw Error(a(446));switch(e){case"meta":case"title":return null;case"style":return"string"===typeof n.precedence&&"string"===typeof n.href?(t=jd(n.href),(r=(n=He(c).hoistableStyles).get(t))||(r={type:"style",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===n.rel&&"string"===typeof n.href&&"string"===typeof n.precedence){e=jd(n.href);var u=He(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Ad(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Sd.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},Sd.set(e,n),u||(s=c,i=e,o=n,l=d.state,s.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=s.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),td(i,"link",o),Ge(i),s.head.appendChild(i))))),t&&null===r)throw Error(a(528,""));return d}if(t&&null!==r)throw Error(a(529,""));return null;case"script":return t=n.async,"string"===typeof(n=n.src)&&t&&"function"!==typeof t&&"symbol"!==typeof t?(t=Rd(n),(r=(n=He(c).hoistableScripts).get(t))||(r={type:"script",instance:null,count:0,state:null},n.set(t,r)),r):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,e))}}function jd(e){return'href="'+pt(e)+'"'}function Ad(e){return'link[rel="stylesheet"]['+e+"]"}function Pd(e){return h({},e,{"data-precedence":e.precedence,precedence:null})}function Rd(e){return'[src="'+pt(e)+'"]'}function Dd(e){return"script[async]"+e}function Od(e,t,n){if(t.count++,null===t.instance)switch(t.type){case"style":var r=e.querySelector('style[data-href~="'+pt(n.href)+'"]');if(r)return t.instance=r,Ge(r),r;var s=h({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return Ge(r=(e.ownerDocument||e).createElement("style")),td(r,"style",s),Ld(r,n.precedence,e),t.instance=r;case"stylesheet":s=jd(n.href);var i=e.querySelector(Ad(s));if(i)return t.state.loading|=4,t.instance=i,Ge(i),i;r=Pd(n),(s=Sd.get(s))&&Md(r,s),Ge(i=(e.ownerDocument||e).createElement("link"));var o=i;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),td(i,"link",r),t.state.loading|=4,Ld(i,n.precedence,e),t.instance=i;case"script":return i=Rd(n.src),(s=e.querySelector(Dd(i)))?(t.instance=s,Ge(s),s):(r=n,(s=Sd.get(i))&&Fd(r=h({},n),s),Ge(s=(e=e.ownerDocument||e).createElement("script")),td(s,"link",r),e.head.appendChild(s),t.instance=s);case"void":return null;default:throw Error(a(443,t.type))}else"stylesheet"===t.type&&0===(4&t.state.loading)&&(r=t.instance,t.state.loading|=4,Ld(r,n.precedence,e));return t.instance}function Ld(e,t,n){for(var r=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=r.length?r[r.length-1]:null,i=s,a=0;a<r.length;a++){var o=r[a];if(o.dataset.precedence===t)i=o;else if(i!==s)break}i?i.parentNode.insertBefore(e,i.nextSibling):(t=9===n.nodeType?n.head:n).insertBefore(e,t.firstChild)}function Md(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function Fd(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var Ud=null;function Vd(e,t,n){if(null===Ud){var r=new Map,s=Ud=new Map;s.set(n,r)}else(r=(s=Ud).get(n))||(r=new Map,s.set(n,r));if(r.has(e))return r;for(r.set(e,null),n=n.getElementsByTagName(e),s=0;s<n.length;s++){var i=n[s];if(!(i[Ue]||i[Pe]||"link"===e&&"stylesheet"===i.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==i.namespaceURI){var a=i.getAttribute(t)||"";a=e+a;var o=r.get(a);o?o.push(i):r.set(a,[i])}}return r}function zd(e,t,n){(e=e.ownerDocument||e).head.insertBefore(n,"title"===t?e.querySelector("head > title"):null)}function qd(e){return"stylesheet"!==e.type||0!==(3&e.state.loading)}var Bd=null;function Hd(){}function Gd(){if(this.count--,0===this.count)if(this.stylesheets)Kd(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var Wd=null;function Kd(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,Wd=new Map,t.forEach(Qd,e),Wd=null,Gd.call(e))}function Qd(e,t){if(!(4&t.state.loading)){var n=Wd.get(e);if(n)var r=n.get(null);else{n=new Map,Wd.set(e,n);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),i=0;i<s.length;i++){var a=s[i];"LINK"!==a.nodeName&&"not all"===a.getAttribute("media")||(n.set(a.dataset.precedence,a),r=a)}r&&n.set(null,r)}a=(s=t.instance).getAttribute("data-precedence"),(i=n.get(a)||r)===r&&n.set(null,s),n.set(a,s),this.count++,r=Gd.bind(this),s.addEventListener("load",r),s.addEventListener("error",r),i?i.parentNode.insertBefore(s,i.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var Yd={$$typeof:x,Provider:null,Consumer:null,_currentValue:L,_currentValue2:L,_threadCount:0};function Xd(e,t,n,r,s,i,a,o){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ee(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ee(0),this.hiddenUpdates=Ee(null),this.identifierPrefix=r,this.onUncaughtError=s,this.onCaughtError=i,this.onRecoverableError=a,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=o,this.incompleteTransitions=new Map}function Jd(e,t,n,r,s,i,a,o,l,c,u,d){return e=new Xd(e,t,n,a,o,l,c,d),t=1,!0===i&&(t|=24),i=Lr(3,null,null,t),e.current=i,i.stateNode=e,(t=Rs()).refCount++,e.pooledCache=t,t.refCount++,i.memoizedState={element:r,isDehydrated:n,cache:t},ni(i),e}function $d(e){return e?e=Dr:Dr}function Zd(e,t,n,r,s,i){s=$d(s),null===r.context?r.context=s:r.pendingContext=s,(r=si(t)).payload={element:n},null!==(i=void 0===i?null:i)&&(r.callback=i),null!==(n=ii(e,r,t))&&(Mc(n,0,t),ai(n,e,t))}function eh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function th(e,t){eh(e,t),(e=e.alternate)&&eh(e,t)}function nh(e){if(13===e.tag){var t=Ar(e,67108864);null!==t&&Mc(t,0,67108864),th(e,67108864)}}var rh=!0;function sh(e,t,n,r){var s=D.T;D.T=null;var i=O.p;try{O.p=2,ah(e,t,n,r)}finally{O.p=i,D.T=s}}function ih(e,t,n,r){var s=D.T;D.T=null;var i=O.p;try{O.p=8,ah(e,t,n,r)}finally{O.p=i,D.T=s}}function ah(e,t,n,r){if(rh){var s=oh(r);if(null===s)Bu(e,t,r,lh,n),bh(e,r);else if(function(e,t,n,r,s){switch(t){case"focusin":return hh=wh(hh,e,t,n,r,s),!0;case"dragenter":return fh=wh(fh,e,t,n,r,s),!0;case"mouseover":return mh=wh(mh,e,t,n,r,s),!0;case"pointerover":var i=s.pointerId;return ph.set(i,wh(ph.get(i)||null,e,t,n,r,s)),!0;case"gotpointercapture":return i=s.pointerId,gh.set(i,wh(gh.get(i)||null,e,t,n,r,s)),!0}return!1}(s,e,t,n,r))r.stopPropagation();else if(bh(e,r),4&t&&-1<vh.indexOf(e)){for(;null!==s;){var i=qe(s);if(null!==i)switch(i.tag){case 3:if((i=i.stateNode).current.memoizedState.isDehydrated){var a=ve(i.pendingLanes);if(0!==a){var o=i;for(o.pendingLanes|=2,o.entangledLanes|=2;a;){var l=1<<31-fe(a);o.entanglements[1]|=l,a&=~l}Su(i),0===(6&rc)&&(Sc=te()+500,Eu(0,!1))}}break;case 13:null!==(o=Ar(i,2))&&Mc(o,0,2),qc(),th(i,2)}if(null===(i=oh(r))&&Bu(e,t,r,lh,n),i===s)break;s=i}null!==s&&r.stopPropagation()}else Bu(e,t,r,null,n)}}function oh(e){return ch(e=At(e))}var lh=null;function ch(e){if(lh=null,null!==(e=ze(e))){var t=l(e);if(null===t)e=null;else{var n=t.tag;if(13===n){if(null!==(e=c(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return lh=e,null}function uh(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ne()){case re:return 2;case se:return 8;case ie:case ae:return 32;case oe:return 268435456;default:return 32}default:return 32}}var dh=!1,hh=null,fh=null,mh=null,ph=new Map,gh=new Map,yh=[],vh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function bh(e,t){switch(e){case"focusin":case"focusout":hh=null;break;case"dragenter":case"dragleave":fh=null;break;case"mouseover":case"mouseout":mh=null;break;case"pointerover":case"pointerout":ph.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":gh.delete(t.pointerId)}}function wh(e,t,n,r,s,i){return null===e||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:i,targetContainers:[s]},null!==t&&(null!==(t=qe(t))&&nh(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function xh(e){var t=ze(e.target);if(null!==t){var n=l(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=c(n)))return e.blockedOn=t,void function(e,t){var n=O.p;try{return O.p=e,t()}finally{O.p=n}}(e.priority,function(){if(13===n.tag){var e=Oc();e=Ce(e);var t=Ar(n,e);null!==t&&Mc(t,0,e),th(n,e)}})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Nh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=oh(e.nativeEvent);if(null!==n)return null!==(t=qe(n))&&nh(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);jt=r,n.target.dispatchEvent(r),jt=null,t.shift()}return!0}function Sh(e,t,n){Nh(e)&&n.delete(t)}function Eh(){dh=!1,null!==hh&&Nh(hh)&&(hh=null),null!==fh&&Nh(fh)&&(fh=null),null!==mh&&Nh(mh)&&(mh=null),ph.forEach(Sh),gh.forEach(Sh)}function kh(e,t){e.blockedOn===t&&(e.blockedOn=null,dh||(dh=!0,r.unstable_scheduleCallback(r.unstable_NormalPriority,Eh)))}var _h=null;function Th(e){_h!==e&&(_h=e,r.unstable_scheduleCallback(r.unstable_NormalPriority,function(){_h===e&&(_h=null);for(var t=0;t<e.length;t+=3){var n=e[t],r=e[t+1],s=e[t+2];if("function"!==typeof r){if(null===ch(r||n))continue;break}var i=qe(n);null!==i&&(e.splice(t,3),t-=3,Aa(i,{pending:!0,data:s,method:n.method,action:r},r,s))}}))}function Ch(e){function t(t){return kh(t,e)}null!==hh&&kh(hh,e),null!==fh&&kh(fh,e),null!==mh&&kh(mh,e),ph.forEach(t),gh.forEach(t);for(var n=0;n<yh.length;n++){var r=yh[n];r.blockedOn===e&&(r.blockedOn=null)}for(;0<yh.length&&null===(n=yh[0]).blockedOn;)xh(n),null===n.blockedOn&&yh.shift();if(null!=(n=(e.ownerDocument||e).$$reactFormReplay))for(r=0;r<n.length;r+=3){var s=n[r],i=n[r+1],a=s[Re]||null;if("function"===typeof i)a||Th(n);else if(a){var o=null;if(i&&i.hasAttribute("formAction")){if(s=i,a=i[Re]||null)o=a.formAction;else if(null!==ch(s))continue}else o=a.action;"function"===typeof o?n[r+1]=o:(n.splice(r,3),r-=3),Th(n)}}}function Ih(e){this._internalRoot=e}function jh(e){this._internalRoot=e}jh.prototype.render=Ih.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(a(409));Zd(t.current,Oc(),e,t,null,null)},jh.prototype.unmount=Ih.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;Zd(e.current,2,null,e,null,null),qc(),t[De]=null}},jh.prototype.unstable_scheduleHydration=function(e){if(e){var t=je();e={blockedOn:null,target:e,priority:t};for(var n=0;n<yh.length&&0!==t&&t<yh[n].priority;n++);yh.splice(n,0,e),0===n&&xh(e)}};var Ah=s.version;if("19.1.1"!==Ah)throw Error(a(527,Ah,"19.1.1"));O.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(a(188));throw e=Object.keys(e).join(","),Error(a(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=l(e)))throw Error(a(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(null===s)break;var i=s.alternate;if(null===i){if(null!==(r=s.return)){n=r;continue}break}if(s.child===i.child){for(i=s.child;i;){if(i===n)return u(s),e;if(i===r)return u(s),t;i=i.sibling}throw Error(a(188))}if(n.return!==r.return)n=s,r=i;else{for(var o=!1,c=s.child;c;){if(c===n){o=!0,n=s,r=i;break}if(c===r){o=!0,r=s,n=i;break}c=c.sibling}if(!o){for(c=i.child;c;){if(c===n){o=!0,n=i,r=s;break}if(c===r){o=!0,r=i,n=s;break}c=c.sibling}if(!o)throw Error(a(189))}}if(n.alternate!==r)throw Error(a(190))}if(3!==n.tag)throw Error(a(188));return n.stateNode.current===n?e:t}(t),e=null===(e=null!==e?d(e):null)?null:e.stateNode};var Ph={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:D,reconcilerVersion:"19.1.1"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Rh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rh.isDisabled&&Rh.supportsFiber)try{ue=Rh.inject(Ph),de=Rh}catch(Oh){}}t.createRoot=function(e,t){if(!o(e))throw Error(a(299));var n=!1,r="",s=bo,i=wo,l=xo;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onUncaughtError&&(s=t.onUncaughtError),void 0!==t.onCaughtError&&(i=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError),void 0!==t.unstable_transitionCallbacks&&t.unstable_transitionCallbacks),t=Jd(e,1,!1,null,0,n,r,s,i,l,0,null),e[De]=t.current,zu(e),new Ih(t)},t.hydrateRoot=function(e,t,n){if(!o(e))throw Error(a(299));var r=!1,s="",i=bo,l=wo,c=xo,u=null;return null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(r=!0),void 0!==n.identifierPrefix&&(s=n.identifierPrefix),void 0!==n.onUncaughtError&&(i=n.onUncaughtError),void 0!==n.onCaughtError&&(l=n.onCaughtError),void 0!==n.onRecoverableError&&(c=n.onRecoverableError),void 0!==n.unstable_transitionCallbacks&&n.unstable_transitionCallbacks,void 0!==n.formState&&(u=n.formState)),(t=Jd(e,1,!0,t,0,r,s,i,l,c,0,u)).context=$d(null),n=t.current,(s=si(r=Ce(r=Oc()))).callback=null,ii(n,s,r),n=r,t.current.lanes=n,ke(t,n),Su(t),e[De]=t.current,zu(e),new jh(t)},t.version="19.1.1"},43:(e,t,n)=>{e.exports=n(288)},288:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),f=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},p=Object.assign,g={};function y(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,p(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,N={H:null,A:null,T:null,S:null,V:null},S=Object.prototype.hasOwnProperty;function E(e,t,r,s,i,a){return r=a.ref,{$$typeof:n,type:e,key:t,ref:void 0!==r?r:null,props:a}}function k(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function T(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function C(){}function I(e,t,s,i,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l,c,u=!1;if(null===e)u=!0;else switch(o){case"bigint":case"string":case"number":u=!0;break;case"object":switch(e.$$typeof){case n:case r:u=!0;break;case h:return I((u=e._init)(e._payload),t,s,i,a)}}if(u)return a=a(e),u=""===i?"."+T(e,0):i,x(a)?(s="",null!=u&&(s=u.replace(_,"$&/")+"/"),I(a,t,s,"",function(e){return e})):null!=a&&(k(a)&&(l=a,c=s+(null==a.key||e&&e.key===a.key?"":(""+a.key).replace(_,"$&/")+"/")+u,a=E(l.type,c,void 0,0,0,l.props)),t.push(a)),1;u=0;var d,m=""===i?".":i+":";if(x(e))for(var p=0;p<e.length;p++)u+=I(i=e[p],t,s,o=m+T(i,p),a);else if("function"===typeof(p=null===(d=e)||"object"!==typeof d?null:"function"===typeof(d=f&&d[f]||d["@@iterator"])?d:null))for(e=p.call(e),p=0;!(i=e.next()).done;)u+=I(i=i.value,t,s,o=m+T(i,p++),a);else if("object"===o){if("function"===typeof e.then)return I(function(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch("string"===typeof e.status?e.then(C,C):(e.status="pending",e.then(function(t){"pending"===e.status&&(e.status="fulfilled",e.value=t)},function(t){"pending"===e.status&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}(e),t,s,i,a);throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return u}function j(e,t,n){if(null==e)return e;var r=[],s=0;return I(e,r,"","",function(e){return t.call(n,e,s++)}),r}function A(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var P="function"===typeof reportError?reportError:function(e){if("object"===typeof window&&"function"===typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"===typeof e&&null!==e&&"string"===typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"===typeof process&&"function"===typeof process.emit)return void process.emit("uncaughtException",e);console.error(e)};function R(){}t.Children={map:j,forEach:function(e,t,n){j(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return j(e,function(){t++}),t},toArray:function(e){return j(e,function(e){return e})||[]},only:function(e){if(!k(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=s,t.Profiler=a,t.PureComponent=b,t.StrictMode=i,t.Suspense=u,t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=N,t.__COMPILER_RUNTIME={__proto__:null,c:function(e){return N.H.useMemoCache(e)}},t.cache=function(e){return function(){return e.apply(null,arguments)}},t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("The argument must be a React element, but you passed "+e+".");var r=p({},e.props),s=e.key;if(null!=t)for(i in void 0!==t.ref&&void 0,void 0!==t.key&&(s=""+t.key),t)!S.call(t,i)||"key"===i||"__self"===i||"__source"===i||"ref"===i&&void 0===t.ref||(r[i]=t[i]);var i=arguments.length-2;if(1===i)r.children=n;else if(1<i){for(var a=Array(i),o=0;o<i;o++)a[o]=arguments[o+2];r.children=a}return E(e.type,s,void 0,0,0,r)},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null}).Provider=e,e.Consumer={$$typeof:o,_context:e},e},t.createElement=function(e,t,n){var r,s={},i=null;if(null!=t)for(r in void 0!==t.key&&(i=""+t.key),t)S.call(t,r)&&"key"!==r&&"__self"!==r&&"__source"!==r&&(s[r]=t[r]);var a=arguments.length-2;if(1===a)s.children=n;else if(1<a){for(var o=Array(a),l=0;l<a;l++)o[l]=arguments[l+2];s.children=o}if(e&&e.defaultProps)for(r in a=e.defaultProps)void 0===s[r]&&(s[r]=a[r]);return E(e,i,void 0,0,0,s)},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=k,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:d,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=N.T,n={};N.T=n;try{var r=e(),s=N.S;null!==s&&s(n,r),"object"===typeof r&&null!==r&&"function"===typeof r.then&&r.then(R,P)}catch(i){P(i)}finally{N.T=t}},t.unstable_useCacheRefresh=function(){return N.H.useCacheRefresh()},t.use=function(e){return N.H.use(e)},t.useActionState=function(e,t,n){return N.H.useActionState(e,t,n)},t.useCallback=function(e,t){return N.H.useCallback(e,t)},t.useContext=function(e){return N.H.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e,t){return N.H.useDeferredValue(e,t)},t.useEffect=function(e,t,n){var r=N.H;if("function"===typeof n)throw Error("useEffect CRUD overload is not enabled in this build of React.");return r.useEffect(e,t)},t.useId=function(){return N.H.useId()},t.useImperativeHandle=function(e,t,n){return N.H.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.H.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.H.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.H.useMemo(e,t)},t.useOptimistic=function(e,t){return N.H.useOptimistic(e,t)},t.useReducer=function(e,t,n){return N.H.useReducer(e,t,n)},t.useRef=function(e){return N.H.useRef(e)},t.useState=function(e){return N.H.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.H.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.H.useTransition()},t.version="19.1.1"},391:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(4)},579:(e,t,n)=>{e.exports=n(799)},672:(e,t,n)=>{var r=n(43);function s(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(s(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},o=Symbol.for("react.portal");var l=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(e,t){return"font"===e?"":"string"===typeof t?"use-credentials"===t?t:"":void 0}t.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!t||1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType)throw Error(s(299));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:o,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.flushSync=function(e){var t=l.T,n=a.p;try{if(l.T=null,a.p=2,e)return e()}finally{l.T=t,a.p=n,a.d.f()}},t.preconnect=function(e,t){"string"===typeof e&&(t?t="string"===typeof(t=t.crossOrigin)?"use-credentials"===t?t:"":void 0:t=null,a.d.C(e,t))},t.prefetchDNS=function(e){"string"===typeof e&&a.d.D(e)},t.preinit=function(e,t){if("string"===typeof e&&t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin),s="string"===typeof t.integrity?t.integrity:void 0,i="string"===typeof t.fetchPriority?t.fetchPriority:void 0;"style"===n?a.d.S(e,"string"===typeof t.precedence?t.precedence:void 0,{crossOrigin:r,integrity:s,fetchPriority:i}):"script"===n&&a.d.X(e,{crossOrigin:r,integrity:s,fetchPriority:i,nonce:"string"===typeof t.nonce?t.nonce:void 0})}},t.preinitModule=function(e,t){if("string"===typeof e)if("object"===typeof t&&null!==t){if(null==t.as||"script"===t.as){var n=c(t.as,t.crossOrigin);a.d.M(e,{crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0})}}else null==t&&a.d.M(e)},t.preload=function(e,t){if("string"===typeof e&&"object"===typeof t&&null!==t&&"string"===typeof t.as){var n=t.as,r=c(n,t.crossOrigin);a.d.L(e,n,{crossOrigin:r,integrity:"string"===typeof t.integrity?t.integrity:void 0,nonce:"string"===typeof t.nonce?t.nonce:void 0,type:"string"===typeof t.type?t.type:void 0,fetchPriority:"string"===typeof t.fetchPriority?t.fetchPriority:void 0,referrerPolicy:"string"===typeof t.referrerPolicy?t.referrerPolicy:void 0,imageSrcSet:"string"===typeof t.imageSrcSet?t.imageSrcSet:void 0,imageSizes:"string"===typeof t.imageSizes?t.imageSizes:void 0,media:"string"===typeof t.media?t.media:void 0})}},t.preloadModule=function(e,t){if("string"===typeof e)if(t){var n=c(t.as,t.crossOrigin);a.d.m(e,{as:"string"===typeof t.as&&"script"!==t.as?t.as:void 0,crossOrigin:n,integrity:"string"===typeof t.integrity?t.integrity:void 0})}else a.d.m(e)},t.requestFormReset=function(e){a.d.r(e)},t.unstable_batchedUpdates=function(e,t){return e(t)},t.useFormState=function(e,t,n){return l.H.useFormState(e,t,n)},t.useFormStatus=function(){return l.H.useHostTransitionStatus()},t.version="19.1.1"},799:(e,t)=>{var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function s(e,t,r){var s=null;if(void 0!==r&&(s=""+r),void 0!==t.key&&(s=""+t.key),"key"in t)for(var i in r={},t)"key"!==i&&(r[i]=t[i]);else r=t;return t=r.ref,{$$typeof:n,type:e,key:s,ref:void 0!==t?t:null,props:r}}t.Fragment=r,t.jsx=s,t.jsxs=s},853:(e,t,n)=>{e.exports=n(896)},896:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,s=e[r];if(!(0<i(s,t)))break e;e[r]=t,e[n]=s,n=r}}function r(e){return 0===e.length?null:e[0]}function s(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,s=e.length,a=s>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>i(l,n))c<s&&0>i(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<s&&0>i(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function i(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if(t.unstable_now=void 0,"object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],d=1,h=null,f=3,m=!1,p=!1,g=!1,y=!1,v="function"===typeof setTimeout?setTimeout:null,b="function"===typeof clearTimeout?clearTimeout:null,w="undefined"!==typeof setImmediate?setImmediate:null;function x(e){for(var t=r(u);null!==t;){if(null===t.callback)s(u);else{if(!(t.startTime<=e))break;s(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function N(e){if(g=!1,x(e),!p)if(null!==r(c))p=!0,E||(E=!0,S());else{var t=r(u);null!==t&&P(N,t.startTime-e)}}var S,E=!1,k=-1,_=5,T=-1;function C(){return!!y||!(t.unstable_now()-T<_)}function I(){if(y=!1,E){var e=t.unstable_now();T=e;var n=!0;try{e:{p=!1,g&&(g=!1,b(k),k=-1),m=!0;var i=f;try{t:{for(x(e),h=r(c);null!==h&&!(h.expirationTime>e&&C());){var a=h.callback;if("function"===typeof a){h.callback=null,f=h.priorityLevel;var o=a(h.expirationTime<=e);if(e=t.unstable_now(),"function"===typeof o){h.callback=o,x(e),n=!0;break t}h===r(c)&&s(c),x(e)}else s(c);h=r(c)}if(null!==h)n=!0;else{var l=r(u);null!==l&&P(N,l.startTime-e),n=!1}}break e}finally{h=null,f=i,m=!1}n=void 0}}finally{n?S():E=!1}}}if("function"===typeof w)S=function(){w(I)};else if("undefined"!==typeof MessageChannel){var j=new MessageChannel,A=j.port2;j.port1.onmessage=I,S=function(){A.postMessage(null)}}else S=function(){v(I,0)};function P(e,n){k=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_requestPaint=function(){y=!0},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,s,i){var a=t.unstable_now();switch("object"===typeof i&&null!==i?i="number"===typeof(i=i.delay)&&0<i?a+i:a:i=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:d++,callback:s,priorityLevel:e,startTime:i,expirationTime:o=i+o,sortIndex:-1},i>a?(e.sortIndex=i,n(u,e),null===r(c)&&e===r(u)&&(g?(b(k),k=-1):g=!0,P(N,i-a))):(e.sortIndex=o,n(c,e),p||m||(p=!0,E||(E=!0,S()))),e},t.unstable_shouldYield=C,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(672)}},t={};function n(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.m=e,n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+".f9b954cf.chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="store-room-information:";n.l=(r,s,i,a)=>{if(e[r])e[r].push(s);else{var o,l;if(void 0!==i)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var d=c[u];if(d.getAttribute("src")==r||d.getAttribute("data-webpack")==t+i){o=d;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+i),o.src=r),e[r]=[s];var h=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var s=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),s&&s.forEach(e=>e(n)),t)return t(n)},f=setTimeout(h.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=h.bind(null,o.onerror),o.onload=h.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/store-room-information/",(()=>{var e={792:0};n.f.j=(t,r)=>{var s=n.o(e,t)?e[t]:void 0;if(0!==s)if(s)r.push(s[2]);else{var i=new Promise((n,r)=>s=e[t]=[n,r]);r.push(s[2]=i);var a=n.p+n.u(t),o=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(s=e[t])&&(e[t]=void 0),s)){var i=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+i+": "+a+")",o.name="ChunkLoadError",o.type=i,o.request=a,s[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var s,i,a=r[0],o=r[1],l=r[2],c=0;if(a.some(t=>0!==e[t])){for(s in o)n.o(o,s)&&(n.m[s]=o[s]);if(l)l(n)}for(t&&t(r);c<a.length;c++)i=a[c],n.o(e,i)&&e[i]&&e[i][0](),e[i]=0},r=self.webpackChunkstore_room_information=self.webpackChunkstore_room_information||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})();var r=n(43),s=n(391);function i(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function o(e){var t=function(e,t){if("object"!=a(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==a(t)?t:t+""}function l(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const d=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=63&s|128):55296===(64512&s)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(s=65536+((1023&s)<<10)+(1023&e.charCodeAt(++r)),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=63&s|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=63&s|128)}return t},h={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const t=e[s],i=s+1<e.length,a=i?e[s+1]:0,o=s+2<e.length,l=o?e[s+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let d=(15&a)<<2|l>>6,h=63&l;o||(h=64,i||(d=64)),r.push(n[c],n[u],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(d(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((31&s)<<6|63&i)}else if(s>239&&s<365){const i=((7&s)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(i>>10)),t[r++]=String.fromCharCode(56320+(1023&i))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&s)<<12|(63&i)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const t=n[e.charAt(s++)],i=s<e.length?n[e.charAt(s)]:0;++s;const a=s<e.length?n[e.charAt(s)]:64;++s;const o=s<e.length?n[e.charAt(s)]:64;if(++s,null==t||null==i||null==a||null==o)throw new f;const l=t<<2|i>>4;if(r.push(l),64!==a){const e=i<<4&240|a>>2;if(r.push(e),64!==o){const e=a<<6&192|o;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class f extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const m=function(e){return function(e){const t=d(e);return h.encodeByteArray(t,!0)}(e).replace(/\./g,"")},p=function(e){try{return h.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};function g(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}const y=()=>{try{return g().__FIREBASE_DEFAULTS__||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"/store-room-information",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&p(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},v=e=>{var t;return null===(t=y())||void 0===t||null===(t=t.emulatorHosts)||void 0===t?void 0:t[e]},b=()=>{var e;return null===(e=y())||void 0===e?void 0:e.config},w=e=>{var t;return null===(t=y())||void 0===t?void 0:t["_".concat(e)]};class x{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function N(e){try{return(e.startsWith("http://")||e.startsWith("https://")?new URL(e).hostname:e).endsWith(".cloudworkstations.dev")}catch(t){return!1}}async function S(e){return(await fetch(e,{credentials:"include"})).ok}const E={};let k=!1;function _(e,t){if("undefined"===typeof window||"undefined"===typeof document||!N(window.location.host)||E[e]===t||E[e]||k)return;function n(e){return"__firebase__banner__".concat(e)}E[e]=t;const r="__firebase__banner",s=function(){const e={prod:[],emulator:[]};for(const t of Object.keys(E))E[t]?e.emulator.push(t):e.prod.push(t);return e}().prod.length>0;function i(){const e=document.createElement("span");return e.style.cursor="pointer",e.style.marginLeft="16px",e.style.fontSize="24px",e.innerHTML=" &times;",e.onclick=()=>{k=!0,function(){const e=document.getElementById(r);e&&e.remove()}()},e}function a(){const e=function(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}(r),t=n("text"),a=document.getElementById(t)||document.createElement("span"),o=n("learnmore"),l=document.getElementById(o)||document.createElement("a"),c=n("preprendIcon"),u=document.getElementById(c)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(e.created){const t=e.element;!function(e){e.style.display="flex",e.style.background="#7faaf0",e.style.position="fixed",e.style.bottom="5px",e.style.left="5px",e.style.padding=".5em",e.style.borderRadius="5px",e.style.alignItems="center"}(t),function(e,t){e.setAttribute("id",t),e.innerText="Learn more",e.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",e.setAttribute("target","__blank"),e.style.paddingLeft="5px",e.style.textDecoration="underline"}(l,o);const n=i();!function(e,t){e.setAttribute("width","24"),e.setAttribute("id",t),e.setAttribute("height","24"),e.setAttribute("viewBox","0 0 24 24"),e.setAttribute("fill","none"),e.style.marginLeft="-6px"}(u,c),t.append(u,a,l,n),document.body.appendChild(t)}s?(a.innerText="Preview backend disconnected.",u.innerHTML='<g clip-path="url(#clip0_6013_33858)">\n<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6013_33858">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>'):(u.innerHTML='<g clip-path="url(#clip0_6083_34804)">\n<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>\n</g>\n<defs>\n<clipPath id="clip0_6083_34804">\n<rect width="24" height="24" fill="white"/>\n</clipPath>\n</defs>',a.innerText="Preview backend running in this workspace."),a.setAttribute("id",t)}"loading"===document.readyState?window.addEventListener("DOMContentLoaded",a):a()}function T(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function C(){var e;const t=null===(e=y())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}function I(){return!C()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function j(){try{return"object"===typeof indexedDB}catch(e){return!1}}class A extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,A.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,P.prototype.create)}}class P{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],s=r?function(e,t){return e.replace(R,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",i="".concat(this.serviceName,": ").concat(s," (").concat(n,").");return new A(n,i,t)}}const R=/\{\$([^}]+)}/g;function D(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const n=e[s],i=t[s];if(O(n)&&O(i)){if(!D(n,i))return!1}else if(n!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function O(e){return null!==e&&"object"===typeof e}function L(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function M(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function F(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}class U{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=V),void 0===r.error&&(r.error=V),void 0===r.complete&&(r.complete=V);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),s}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function V(){}function z(e){return e&&e._delegate?e._delegate:e}class q{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const B="[DEFAULT]";class H{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new x;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(s){if(r)return null;throw s}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:B})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[s,i]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(s)&&i.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),s=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;s.add(e),this.onInitCallbacks.set(r,s);const i=this.instances.get(r);return i&&e(i,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const s of n)try{s(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(s=t,s===B?void 0:s),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(i){}var s;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B;return this.component?this.component.multipleInstances?e:B:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class G{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new H(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}const W=[];var K;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(K||(K={}));const Q={debug:K.DEBUG,verbose:K.VERBOSE,info:K.INFO,warn:K.WARN,error:K.ERROR,silent:K.SILENT},Y=K.INFO,X={[K.DEBUG]:"log",[K.VERBOSE]:"log",[K.INFO]:"info",[K.WARN]:"warn",[K.ERROR]:"error"},J=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=X[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var s=arguments.length,i=new Array(s>2?s-2:0),a=2;a<s;a++)i[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...i)};class ${constructor(e){this.name=e,this._logLevel=Y,this._logHandler=J,this._userLogHandler=null,W.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in K))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?Q[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,K.DEBUG,...t),this._logHandler(this,K.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,K.VERBOSE,...t),this._logHandler(this,K.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,K.INFO,...t),this._logHandler(this,K.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,K.WARN,...t),this._logHandler(this,K.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,K.ERROR,...t),this._logHandler(this,K.ERROR,...t)}}let Z,ee;const te=new WeakMap,ne=new WeakMap,re=new WeakMap,se=new WeakMap,ie=new WeakMap;let ae={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return ne.get(e);if("objectStoreNames"===t)return e.objectStoreNames||re.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ce(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function oe(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(ee||(ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(ue(this),n),ce(te.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return ce(e.apply(ue(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];const i=e.call(ue(this),t,...r);return re.set(i,t.sort?t.sort():[t]),ce(i)}}function le(e){return"function"===typeof e?oe(e):(e instanceof IDBTransaction&&function(e){if(ne.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",i),e.removeEventListener("abort",i)},s=()=>{t(),r()},i=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",s),e.addEventListener("error",i),e.addEventListener("abort",i)});ne.set(e,t)}(e),t=e,(Z||(Z=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some(e=>t instanceof e)?new Proxy(e,ae):e);var t}function ce(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",s),e.removeEventListener("error",i)},s=()=>{t(ce(e.result)),r()},i=()=>{n(e.error),r()};e.addEventListener("success",s),e.addEventListener("error",i)});return t.then(t=>{t instanceof IDBCursor&&te.set(t,e)}).catch(()=>{}),ie.set(t,e),t}(e);if(se.has(e))return se.get(e);const t=le(e);return t!==e&&(se.set(e,t),ie.set(t,e)),t}const ue=e=>ie.get(e);const de=["get","getKey","getAll","getAllKeys","count"],he=["put","add","delete","clear"],fe=new Map;function me(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(fe.get(t))return fe.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=he.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!s&&!de.includes(n))return;const i=async function(e){const t=this.transaction(e,s?"readwrite":"readonly");let i=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(i=i.index(o.shift())),(await Promise.all([i[n](...o),s&&t.done]))[0]};return fe.set(t,i),i}ae=(e=>u(u({},e),{},{get:(t,n,r)=>me(t,n)||e.get(t,n,r),has:(t,n)=>!!me(t,n)||e.has(t,n)}))(ae);class pe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const ge="@firebase/app",ye="0.14.1",ve=new $("@firebase/app"),be="@firebase/app-compat",we="@firebase/analytics-compat",xe="@firebase/analytics",Ne="@firebase/app-check-compat",Se="@firebase/app-check",Ee="@firebase/auth",ke="@firebase/auth-compat",_e="@firebase/database",Te="@firebase/data-connect",Ce="@firebase/database-compat",Ie="@firebase/functions",je="@firebase/functions-compat",Ae="@firebase/installations",Pe="@firebase/installations-compat",Re="@firebase/messaging",De="@firebase/messaging-compat",Oe="@firebase/performance",Le="@firebase/performance-compat",Me="@firebase/remote-config",Fe="@firebase/remote-config-compat",Ue="@firebase/storage",Ve="@firebase/storage-compat",ze="@firebase/firestore",qe="@firebase/ai",Be="@firebase/firestore-compat",He="firebase",Ge="[DEFAULT]",We={[ge]:"fire-core",[be]:"fire-core-compat",[xe]:"fire-analytics",[we]:"fire-analytics-compat",[Se]:"fire-app-check",[Ne]:"fire-app-check-compat",[Ee]:"fire-auth",[ke]:"fire-auth-compat",[_e]:"fire-rtdb",[Te]:"fire-data-connect",[Ce]:"fire-rtdb-compat",[Ie]:"fire-fn",[je]:"fire-fn-compat",[Ae]:"fire-iid",[Pe]:"fire-iid-compat",[Re]:"fire-fcm",[De]:"fire-fcm-compat",[Oe]:"fire-perf",[Le]:"fire-perf-compat",[Me]:"fire-rc",[Fe]:"fire-rc-compat",[Ue]:"fire-gcs",[Ve]:"fire-gcs-compat",[ze]:"fire-fst",[Be]:"fire-fst-compat",[qe]:"fire-vertex","fire-js":"fire-js",[He]:"fire-js-all"},Ke=new Map,Qe=new Map,Ye=new Map;function Xe(e,t){try{e.container.addComponent(t)}catch(n){ve.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function Je(e){const t=e.name;if(Ye.has(t))return ve.debug("There were multiple attempts to register component ".concat(t,".")),!1;Ye.set(t,e);for(const n of Ke.values())Xe(n,e);for(const n of Qe.values())Xe(n,e);return!0}function $e(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Ze(e){return null!==e&&void 0!==e&&void 0!==e.settings}const et=new P("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."});class tt{constructor(e,t,n){this._isDeleted=!1,this._options=u({},e),this._config=u({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new q("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw et.create("app-deleted",{appName:this._name})}}const nt="12.1.0";function rt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const r=u({name:Ge,automaticDataCollectionEnabled:!0},t),s=r.name;if("string"!==typeof s||!s)throw et.create("bad-app-name",{appName:String(s)});if(n||(n=b()),!n)throw et.create("no-options");const i=Ke.get(s);if(i){if(D(n,i.options)&&D(r,i.config))return i;throw et.create("duplicate-app",{appName:s})}const a=new G(s);for(const l of Ye.values())a.addComponent(l);const o=new tt(n,r,a);return Ke.set(s,o),o}function st(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ge;const t=Ke.get(e);if(!t&&e===Ge&&b())return rt();if(!t)throw et.create("no-app",{appName:e});return t}async function it(e){let t=!1;const n=e.name;if(Ke.has(n))t=!0,Ke.delete(n);else if(Qe.has(n)){e.decRefCount()<=0&&(Qe.delete(n),t=!0)}t&&(await Promise.all(e.container.getProviders().map(e=>e.delete())),e.isDeleted=!0)}function at(e,t,n){var r;let s=null!==(r=We[e])&&void 0!==r?r:e;n&&(s+="-".concat(n));const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return i&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),i&&a&&e.push("and"),a&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void ve.warn(e.join(" "))}Je(new q("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const ot="firebase-heartbeat-store";let lt=null;function ct(){return lt||(lt=function(e,t){let{blocked:n,upgrade:r,blocking:s,terminated:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=ce(a);return r&&a.addEventListener("upgradeneeded",e=>{r(ce(a.result),e.oldVersion,e.newVersion,ce(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{i&&e.addEventListener("close",()=>i()),s&&e.addEventListener("versionchange",e=>s(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ot)}catch(n){console.warn(n)}}}).catch(e=>{throw et.create("idb-open",{originalErrorMessage:e.message})})),lt}async function ut(e,t){try{const n=(await ct()).transaction(ot,"readwrite"),r=n.objectStore(ot);await r.put(t,dt(e)),await n.done}catch(n){if(n instanceof A)ve.warn(n.message);else{const e=et.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});ve.warn(e.message)}}}function dt(e){return"".concat(e.name,"!").concat(e.options.appId)}class ht{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new mt(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){try{var e;const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ft();var t;if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats))if(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats.length>30){const e=function(e){if(0===e.length)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(e,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(n){ve.warn(n)}}async getHeartbeatsHeader(){try{var e;if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ft(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const s of e){const e=n.find(e=>e.agent===s.agent);if(e){if(e.dates.push(s.date),pt(n)>t){e.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),pt(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),s=m(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return ve.warn(t),""}}}function ft(){return(new Date).toISOString().substring(0,10)}class mt{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!j()&&new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var e;t((null===(e=s.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}}).then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ct()).transaction(ot),n=await t.objectStore(ot).get(dt(e));return await t.done,n}catch(t){if(t instanceof A)ve.warn(t.message);else{const e=et.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});ve.warn(e.message)}}}(this.app);return null!==e&&void 0!==e&&e.heartbeats?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ut(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){if(await this._canUseIndexedDBPromise){var t;const n=await this.read();return ut(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function pt(e){return m(JSON.stringify({version:2,heartbeats:e})).length}var gt;gt="",Je(new q("platform-logger",e=>new pe(e),"PRIVATE")),Je(new q("heartbeat",e=>new ht(e),"PRIVATE")),at(ge,ye,gt),at(ge,ye,"esm2020"),at("fire-js","");at("firebase","12.1.0","app");const yt=["providerId"],vt=["uid","auth","stsTokenManager"],bt=["providerId","signInMethod"];function wt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xt=wt,Nt=new P("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),St=new $("@firebase/auth");function Et(e){if(St.logLevel<=K.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];St.error("Auth (".concat(nt,"): ").concat(e),...n)}}function kt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw It(e,...n)}function _t(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return It(e,...n)}function Tt(e,t,n){const r=u(u({},xt()),{},{[t]:n});return new P("auth","Firebase",r).create(t,{appName:e.name})}function Ct(e){return Tt(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function It(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Nt.create(e,...n)}function jt(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];throw It(t,...r)}}function At(e){const t="INTERNAL ASSERTION FAILED: "+e;throw Et(t),new Error(t)}function Pt(e,t){e||At(t)}function Rt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function Dt(){return"http:"===Ot()||"https:"===Ot()}function Ot(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}function Lt(){return!("undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(Dt()||function(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}()||"connection"in navigator))||navigator.onLine}class Mt{constructor(e,t){this.shortDelay=e,this.longDelay=t,Pt(t>e,"Short delay should be less than long delay!"),this.isMobile="undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(T())||"object"===typeof navigator&&"ReactNative"===navigator.product}get(){return Lt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ft(e,t){Pt(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class Ut{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void At("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void At("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void At("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Vt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},zt=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],qt=new Mt(3e4,6e4);function Bt(e,t){return e.tenantId&&!t.tenantId?u(u({},t),{},{tenantId:e.tenantId}):t}async function Ht(e,t,n,r){return Gt(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let s={},i={};r&&("GET"===t?i=r:s={body:JSON.stringify(r)});const a=L(u({key:e.config.apiKey},i)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=u({method:t,headers:o},s);return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent||(l.referrerPolicy="no-referrer"),e.emulatorConfig&&N(e.emulatorConfig.host)&&(l.credentials="include"),Ut.fetch()(await Kt(e,e.config.apiHost,n,a),l)})}async function Gt(e,t,n){e._canInitEmulator=!1;const r=u(u({},Vt),t);try{const t=new Yt(e),s=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const i=await s.json();if("needConfirmation"in i)throw Xt(e,"account-exists-with-different-credential",i);if(s.ok&&!("errorMessage"in i))return i;{const t=s.ok?i.errorMessage:i.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw Xt(e,"credential-already-in-use",i);if("EMAIL_EXISTS"===n)throw Xt(e,"email-already-in-use",i);if("USER_DISABLED"===n)throw Xt(e,"user-disabled",i);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Tt(e,o,a);kt(e,o)}}catch(s){if(s instanceof A)throw s;kt(e,"network-request-failed",{message:String(s)})}}async function Wt(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const i=await Ht(e,t,n,r,s);return"mfaPendingCredential"in i&&kt(e,"multi-factor-auth-required",{_serverResponse:i}),i}async function Kt(e,t,n,r){const s="".concat(t).concat(n,"?").concat(r),i=e,a=i.config.emulator?Ft(e.config,s):"".concat(e.config.apiScheme,"://").concat(s);if(zt.includes(n)&&(await i._persistenceManagerAvailable,"COOKIE"===i._getPersistenceType())){return i._getPersistence()._getFinalTarget(a).toString()}return a}function Qt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Yt{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(_t(this.auth,"network-request-failed")),qt.get())})}}function Xt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=_t(e,t,r);return s.customData._tokenResponse=n,s}function Jt(e){return void 0!==e&&void 0!==e.getResponse}function $t(e){return void 0!==e&&void 0!==e.enterprise}class Zt{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Qt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function en(e,t){return Ht(e,"GET","/v2/recaptchaConfig",Bt(e,t))}async function tn(e,t){return Ht(e,"POST","/v1/accounts:lookup",t)}function nn(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(t){}}function rn(e){return 1e3*Number(e)}function sn(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return Et("JWT malformed, contained fewer than 3 sections"),null;try{const e=p(n);return e?JSON.parse(e):(Et("Failed to decode base64 JWT payload"),null)}catch(s){return Et("Caught error parsing JWT payload as JSON",null===s||void 0===s?void 0:s.toString()),null}}function an(e){const t=sn(e);return jt(t,"internal-error"),jt("undefined"!==typeof t.exp,"internal-error"),jt("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function on(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(n){throw n instanceof A&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(n)&&e.auth.currentUser===e&&await e.auth.signOut(),n}}class ln{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{var t;this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){return void((null===e||void 0===e?void 0:e.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class cn{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=nn(this.lastLoginAt),this.creationTime=nn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function un(e){var t;const n=e.auth,r=await e.getIdToken(),s=await on(e,tn(n,{idToken:r}));jt(null===s||void 0===s?void 0:s.users.length,n,"internal-error");const i=s.users[0];e._notifyReloadListener(i);const a=null!==(t=i.providerUserInfo)&&void 0!==t&&t.length?dn(i.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,d=!(e.email&&i.passwordHash)&&!(null!==o&&void 0!==o&&o.length),h=!!u&&d,f={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new cn(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(e,f)}function dn(e){return e.map(e=>{let{providerId:t}=e,n=i(e,yt);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class hn{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){jt(e.idToken,"internal-error"),jt("undefined"!==typeof e.idToken,"internal-error"),jt("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):an(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){jt(0!==e.length,"internal-error");const t=an(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(jt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:s}=await async function(e,t){const n=await Gt(e,{},async()=>{const n=L({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:s}=e.config,i=await Kt(e,r,"/v1/token","key=".concat(s)),a=await e._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const o={method:"POST",headers:a,body:n};return e.emulatorConfig&&N(e.emulatorConfig.host)&&(o.credentials="include"),Ut.fetch()(i,o)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(s))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:s}=t,i=new hn;return n&&(jt("string"===typeof n,"internal-error",{appName:e}),i.refreshToken=n),r&&(jt("string"===typeof r,"internal-error",{appName:e}),i.accessToken=r),s&&(jt("number"===typeof s,"internal-error",{appName:e}),i.expirationTime=s),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new hn,this.toJSON())}_performRefresh(){return At("not implemented")}}function fn(e,t){jt("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class mn{constructor(e){let{uid:t,auth:n,stsTokenManager:r}=e,s=i(e,vt);this.providerId="firebase",this.proactiveRefresh=new ln(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new cn(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await on(this,this.stsTokenManager.getToken(this.auth,e));return jt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=z(e),r=await n.getIdToken(t),s=sn(r);jt(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const i="object"===typeof s.firebase?s.firebase:void 0,a=null===i||void 0===i?void 0:i.sign_in_provider;return{claims:s,token:r,authTime:nn(rn(s.auth_time)),issuedAtTime:nn(rn(s.iat)),expirationTime:nn(rn(s.exp)),signInProvider:a||null,signInSecondFactor:(null===i||void 0===i?void 0:i.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=z(e);await un(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(jt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>u({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new mn(u(u({},this),{},{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){jt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await un(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Ze(this.auth.app))return Promise.reject(Ct(this.auth));const e=await this.getIdToken();return await on(this,async function(e,t){return Ht(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return u(u({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>u({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{},{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,s,i,a,o,l,c;const d=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,f=null!==(s=t.phoneNumber)&&void 0!==s?s:void 0,m=null!==(i=t.photoURL)&&void 0!==i?i:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,y=null!==(l=t.createdAt)&&void 0!==l?l:void 0,v=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:b,emailVerified:w,isAnonymous:x,providerData:N,stsTokenManager:S}=t;jt(b&&S,e,"internal-error");const E=hn.fromJSON(this.name,S);jt("string"===typeof b,e,"internal-error"),fn(d,e.name),fn(h,e.name),jt("boolean"===typeof w,e,"internal-error"),jt("boolean"===typeof x,e,"internal-error"),fn(f,e.name),fn(m,e.name),fn(p,e.name),fn(g,e.name),fn(y,e.name),fn(v,e.name);const k=new mn({uid:b,auth:e,email:h,emailVerified:w,displayName:d,isAnonymous:x,photoURL:m,phoneNumber:f,tenantId:p,stsTokenManager:E,createdAt:y,lastLoginAt:v});return N&&Array.isArray(N)&&(k.providerData=N.map(e=>u({},e))),g&&(k._redirectEventId=g),k}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new hn;r.updateFromServerResponse(t);const s=new mn({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await un(s),s}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];jt(void 0!==r.localId,"internal-error");const s=void 0!==r.providerUserInfo?dn(r.providerUserInfo):[],i=!(r.email&&r.passwordHash)&&!(null!==s&&void 0!==s&&s.length),a=new hn;a.updateFromIdToken(n);const o=new mn({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:i}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new cn(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null!==s&&void 0!==s&&s.length)};return Object.assign(o,l),o}}const pn=new Map;function gn(e){Pt(e instanceof Function,"Expected a class definition");let t=pn.get(e);return t?(Pt(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,pn.set(e,t),t)}class yn{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}yn.type="NONE";const vn=yn;function bn(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class wn{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:s}=this.auth;this.fullUserKey=bn(this.userKey,r.apiKey,s),this.fullPersistenceKey=bn("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if("string"===typeof e){const t=await tn(this.auth,{idToken:e}).catch(()=>{});return t?mn._fromGetAccountInfoResponse(this.auth,t,e):null}return mn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new wn(gn(vn),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let s=r[0]||gn(vn);const i=bn(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(i);if(t){let n;if("string"===typeof t){const r=await tn(e,{idToken:t}).catch(()=>{});if(!r)break;n=await mn._fromGetAccountInfoResponse(e,r,t)}else n=mn._fromJSON(e,t);c!==s&&(a=n),s=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return s._shouldAllowMigration&&o.length?(s=o[0],a&&await s._set(i,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==s)try{await e._remove(i)}catch(t){}})),new wn(s,e,n)):new wn(s,e,n)}}function xn(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(kn(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Nn(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Tn(t))return"Blackberry";if(Cn(t))return"Webos";if(Sn(t))return"Safari";if((t.includes("chrome/")||En(t))&&!t.includes("edge/"))return"Chrome";if(_n(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Nn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/firefox\//i.test(e)}function Sn(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:T()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function En(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/crios\//i.test(e)}function kn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/iemobile/i.test(e)}function _n(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/android/i.test(e)}function Tn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/blackberry/i.test(e)}function Cn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/webos/i.test(e)}function In(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function jn(){return function(){const e=T();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}()&&10===document.documentMode}function An(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T();return In(e)||_n(e)||Cn(e)||Tn(e)||/windows phone/i.test(e)||kn(e)}function Pn(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=xn(T());break;case"Worker":t="".concat(xn(T()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(nt,"/").concat(r)}class Rn{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(s){r(s)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(n){t.reverse();for(const e of t)try{e()}catch(r){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===n||void 0===n?void 0:n.message})}}}class Dn{constructor(e){var t,n,r,s;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=i.minPasswordLength)&&void 0!==t?t:6,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),void 0!==i.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),void 0!==i.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),void 0!==i.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),void 0!==i.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(n=null===(r=e.allowedNonAlphanumericCharacters)||void 0===r?void 0:r.join(""))&&void 0!==n?n:"",this.forceUpgradeOnSignin=null!==(s=e.forceUpgradeOnSignin)&&void 0!==s&&s,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,s,i,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(s=o.containsUppercaseLetter)||void 0===s||s),o.isValid&&(o.isValid=null===(i=o.containsNumericCharacter)||void 0===i||i),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}class On{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mn(this),this.idTokenSubscription=new Mn(this),this.beforeStateQueue=new Rn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Nt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion,this._persistenceManagerAvailable=new Promise(e=>this._resolvePersistenceManagerAvailable=e)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=gn(t)),this._initializationPromise=this.queue(async()=>{var n,r,s;if(!this._deleted&&(this.persistenceManager=await wn.create(this,e),null===(n=this._resolvePersistenceManagerAvailable)||void 0===n||n.call(this),!this._deleted)){if(null!==(r=this._popupRedirectResolver)&&void 0!==r&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(i){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(s=this.currentUser)||void 0===s?void 0:s.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await tn(this,{idToken:e}),n=await mn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(Ze(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let n=t,r=!1;if(e&&this.config.authDomain){var s,i;await this.getOrInitRedirectPersistenceManager();const t=null===(s=this.redirectUser)||void 0===s?void 0:s._redirectEventId,a=null===(i=n)||void 0===i?void 0:i._redirectEventId,o=await this.tryRedirectSignIn(e);t&&t!==a||null===o||void 0===o||!o.user||(n=o.user,r=!0)}if(!n)return this.directlySetCurrentUser(null);if(!n._redirectEventId){if(r)try{await this.beforeStateQueue.runMiddleware(n)}catch(a){n=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return n?this.reloadAndSetCurrentUserOrClear(n):this.directlySetCurrentUser(null)}return jt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===n._redirectEventId?this.directlySetCurrentUser(n):this.reloadAndSetCurrentUserOrClear(n)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(n){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await un(e)}catch(t){if((null===t||void 0===t?void 0:t.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Ze(this.app))return Promise.reject(Ct(this));const t=e?z(e):null;return t&&jt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&jt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Ze(this.app)?Promise.reject(Ct(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Ze(this.app)?Promise.reject(Ct(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(gn(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return Ht(e,"GET","/v2/passwordPolicy",Bt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Dn(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new P("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return Ht(e,"POST","/v2/accounts:revokeToken",Bt(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&gn(e)||this._popupRedirectResolver;jt(t,this,"argument-error"),this.redirectPersistenceManager=await wn.create(this,[gn(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(e=null===(t=this.currentUser)||void 0===t?void 0:t.uid)&&void 0!==e?e:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const s="function"===typeof t?t:t.next.bind(t);let i=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(jt(a,this,"internal-error"),a.then(()=>{i||s(this.currentUser)}),"function"===typeof t){const s=e.addObserver(t,n,r);return()=>{i=!0,s()}}{const n=e.addObserver(t);return()=>{i=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return jt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Pn(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(Ze(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return null!==t&&void 0!==t&&t.error&&function(e){if(St.logLevel<=K.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];St.warn("Auth (".concat(nt,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function Ln(e){return z(e)}class Mn{constructor(e){this.auth=e,this.observer=null,this.addObserver=function(e,t){const n=new U(e,t);return n.subscribe.bind(n)}(e=>this.observer=e)}get next(){return jt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Fn={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Un(e){return Fn.loadJS(e)}function Vn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}const zn=1e12;class qn{constructor(e){this.auth=e,this.counter=zn,this._widgets=new Map}render(e,t){const n=this.counter;return this._widgets.set(n,new Gn(e,this.auth.name,t||{})),this.counter++,n}reset(e){var t;const n=e||zn;null===(t=this._widgets.get(n))||void 0===t||t.delete(),this._widgets.delete(n)}getResponse(e){var t;const n=e||zn;return(null===(t=this._widgets.get(n))||void 0===t?void 0:t.getResponse())||""}async execute(e){var t;const n=e||zn;return null===(t=this._widgets.get(n))||void 0===t||t.execute(),""}}class Bn{constructor(){this.enterprise=new Hn}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Hn{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Gn{constructor(e,t,n){this.params=n,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const r="string"===typeof e?document.getElementById(e):e;jt(r,"argument-error",{appName:t}),this.container=r,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),this.timerId||(this.timerId=window.setTimeout(()=>{this.responseToken=function(e){const t=[],n="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let r=0;r<e;r++)t.push(n.charAt(Math.floor(Math.random()*n.length)));return t.join("")}(50);const{callback:e,"expired-callback":t}=this.params;if(e)try{e(this.responseToken)}catch(n){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,t)try{t()}catch(n){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Wn="NO_RECAPTCHA";class Kn{constructor(e){this.type="recaptcha-enterprise",this.auth=Ln(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const s=window.grecaptcha;$t(s)?s.enterprise.ready(()=>{s.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(Wn)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new Bn).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{en(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new Zt(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(s=>{if(!t&&$t(window.grecaptcha))n(s,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Fn.recaptchaEnterpriseScript;0!==t.length&&(t+=s),Un(t).then(()=>{n(s,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function Qn(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const i=new Kn(e);let a;if(s)a=Wn;else try{a=await i.verify(n)}catch(l){a=await i.verify(n,!0)}const o=u({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function Yn(e,t,n,r,s){if("EMAIL_PASSWORD_PROVIDER"===s){var i;if(null!==(i=e._getRecaptchaConfig())&&void 0!==i&&i.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const s=await Qn(e,t,n,"getOobCode"===n);return r(e,s)}return r(e,t).catch(async s=>{if(s.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const s=await Qn(e,t,n,"getOobCode"===n);return r(e,s)}return Promise.reject(s)})}if("PHONE_PROVIDER"===s){var a;if(null!==(a=e._getRecaptchaConfig())&&void 0!==a&&a.isProviderEnabled("PHONE_PROVIDER")){const s=await Qn(e,t,n);return r(e,s).catch(async s=>{var i;if("AUDIT"===(null===(i=e._getRecaptchaConfig())||void 0===i?void 0:i.getProviderEnforcementState("PHONE_PROVIDER"))&&(s.code==="auth/".concat("missing-recaptcha-token")||s.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const s=await Qn(e,t,n,!1,!0);return r(e,s)}return Promise.reject(s)})}{const s=await Qn(e,t,n,!1,!0);return r(e,s)}}return Promise.reject(s+" provider is not supported.")}async function Xn(e){const t=Ln(e),n=await en(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new Zt(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new Kn(t).verify()}}function Jn(e,t,n){const r=Ln(e);jt(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const s=!(null===n||void 0===n||!n.disableWarnings),i=$n(t),{host:a,port:o}=function(e){const t=$n(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const e=s[1];return{host:e,port:Zn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:Zn(t)}}}(t),l=null===o?"":":".concat(o),c={url:"".concat(i,"//").concat(a).concat(l,"/")},u=Object.freeze({host:a,port:o,protocol:i.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator)return jt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),void jt(D(c,r.config.emulator)&&D(u,r.emulatorConfig),r,"emulator-config-failed");r.config.emulator=c,r.emulatorConfig=u,r.settings.appVerificationDisabledForTesting=!0,N(a)?(S("".concat(i,"//").concat(a).concat(l)),_("Auth",!0)):s||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function $n(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function Zn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class er{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return At("not implemented")}_getIdTokenResponse(e){return At("not implemented")}_linkToIdToken(e,t){return At("not implemented")}_getReauthenticationResolver(e){return At("not implemented")}}async function tr(e,t){return Ht(e,"POST","/v1/accounts:signUp",t)}async function nr(e,t){return Wt(e,"POST","/v1/accounts:signInWithPassword",Bt(e,t))}class rr extends er{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new rr(e,t,"password")}static _fromEmailAndCode(e,t){return new rr(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if(null!==t&&void 0!==t&&t.email&&null!==t&&void 0!==t&&t.password){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return Yn(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",nr,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Wt(e,"POST","/v1/accounts:signInWithEmailLink",Bt(e,t))}(e,{email:this._email,oobCode:this._password});default:kt(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return Yn(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",tr,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return Wt(e,"POST","/v1/accounts:signInWithEmailLink",Bt(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:kt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function sr(e,t){return Wt(e,"POST","/v1/accounts:signInWithIdp",Bt(e,t))}class ir extends er{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new ir(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):kt("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,s=i(t,bt);if(!n||!r)return null;const a=new ir(n,r);return a.idToken=s.idToken||void 0,a.accessToken=s.accessToken||void 0,a.secret=s.secret,a.nonce=s.nonce,a.pendingToken=s.pendingToken||null,a}_getIdTokenResponse(e){return sr(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,sr(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,sr(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=L(t)}return e}}async function ar(e,t){return Ht(e,"POST","/v1/accounts:sendVerificationCode",Bt(e,t))}const or={USER_NOT_FOUND:"user-not-found"};class lr extends er{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new lr({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new lr({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return Wt(e,"POST","/v1/accounts:signInWithPhoneNumber",Bt(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await Wt(e,"POST","/v1/accounts:signInWithPhoneNumber",Bt(e,t));if(n.temporaryProof)throw Xt(e,"account-exists-with-different-credential",n);return n}(e,u({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return Wt(e,"POST","/v1/accounts:signInWithPhoneNumber",Bt(e,u(u({},t),{},{operation:"REAUTH"})),or)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}=e;return n||t||r||s?new lr({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:s}):null}}class cr{constructor(e){var t,n,r,s,i,a;const o=M(F(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);jt(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(s=o.continueUrl)&&void 0!==s?s:null,this.languageCode=null!==(i=o.lang)&&void 0!==i?i:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=M(F(e)).link,n=t?M(F(t)).deep_link_id:null,r=M(F(e)).deep_link_id;return(r?M(F(r)).link:null)||r||n||t||e}(e);try{return new cr(t)}catch(n){return null}}}class ur{constructor(){this.providerId=ur.PROVIDER_ID}static credential(e,t){return rr._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=cr.parseLink(t);return jt(n,"argument-error"),rr._fromEmailAndCode(e,n.code,n.tenantId)}}ur.PROVIDER_ID="password",ur.EMAIL_PASSWORD_SIGN_IN_METHOD="password",ur.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class dr{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class hr extends dr{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class fr extends hr{constructor(){super("facebook.com")}static credential(e){return ir._fromParams({providerId:fr.PROVIDER_ID,signInMethod:fr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return fr.credentialFromTaggedObject(e)}static credentialFromError(e){return fr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return fr.credential(t.oauthAccessToken)}catch(n){return null}}}fr.FACEBOOK_SIGN_IN_METHOD="facebook.com",fr.PROVIDER_ID="facebook.com";class mr extends hr{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return ir._fromParams({providerId:mr.PROVIDER_ID,signInMethod:mr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return mr.credentialFromTaggedObject(e)}static credentialFromError(e){return mr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return mr.credential(n,r)}catch(s){return null}}}mr.GOOGLE_SIGN_IN_METHOD="google.com",mr.PROVIDER_ID="google.com";class pr extends hr{constructor(){super("github.com")}static credential(e){return ir._fromParams({providerId:pr.PROVIDER_ID,signInMethod:pr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return pr.credentialFromTaggedObject(e)}static credentialFromError(e){return pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return pr.credential(t.oauthAccessToken)}catch(n){return null}}}pr.GITHUB_SIGN_IN_METHOD="github.com",pr.PROVIDER_ID="github.com";class gr extends hr{constructor(){super("twitter.com")}static credential(e,t){return ir._fromParams({providerId:gr.PROVIDER_ID,signInMethod:gr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return gr.credentialFromTaggedObject(e)}static credentialFromError(e){return gr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return gr.credential(n,r)}catch(s){return null}}}async function yr(e,t){return Wt(e,"POST","/v1/accounts:signUp",Bt(e,t))}gr.TWITTER_SIGN_IN_METHOD="twitter.com",gr.PROVIDER_ID="twitter.com";class vr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const s=await mn._fromIdTokenResponse(e,n,r),i=br(n);return new vr({user:s,providerId:i,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=br(n);return new vr({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function br(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class wr extends A{constructor(e,t,n,r){var s;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,wr.prototype),this.customData={appName:e.name,tenantId:null!==(s=e.tenantId)&&void 0!==s?s:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new wr(e,t,n,r)}}function xr(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw wr._fromErrorAndOperation(e,n,t,r);throw n})}async function Nr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await on(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return vr._forOperation(e,"link",r)}async function Sr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if(Ze(r.app))return Promise.reject(Ct(r));const s="reauthenticate";try{const i=await on(e,xr(r,s,t,e),n);jt(i.idToken,r,"internal-error");const a=sn(i.idToken);jt(a,r,"internal-error");const{sub:o}=a;return jt(e.uid===o,r,"user-mismatch"),vr._forOperation(e,s,i)}catch(i){throw(null===i||void 0===i?void 0:i.code)==="auth/".concat("user-not-found")&&kt(r,"user-mismatch"),i}}async function Er(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ze(e.app))return Promise.reject(Ct(e));const r="signIn",s=await xr(e,r,t),i=await vr._fromIdTokenResponse(e,r,s);return n||await e._updateCurrentUser(i.user),i}async function kr(e,t){return Er(Ln(e),t)}async function _r(e,t){return Sr(z(e),t)}async function Tr(e){const t=Ln(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}async function Cr(e,t,n){const{auth:r}=e,s={idToken:await e.getIdToken(),returnSecureToken:!0};t&&(s.email=t),n&&(s.password=n);const i=await on(e,async function(e,t){return Ht(e,"POST","/v1/accounts:update",t)}(r,s));await e._updateTokensIfNecessary(i,!0)}function Ir(e,t){return Ht(e,"POST","/v2/accounts/mfaEnrollment:start",Bt(e,t))}new WeakMap;const jr="__sak";class Ar{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(jr,"1"),this.storage.removeItem(jr),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Pr extends Ar{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=An(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},s=this.storage.getItem(n);jn()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Pr.type="LOCAL";const Rr=Pr;function Dr(e){var t,n;const r=e.replace(/[\\^$.*+?()[\]{}|]/g,"\\$&"),s=RegExp("".concat(r,"=([^;]+)"));return null!==(t=null===(n=document.cookie.match(s))||void 0===n?void 0:n[1])&&void 0!==t?t:null}function Or(e){const t="http:"===window.location.protocol;return"".concat(t?"__dev_":"__HOST-","FIREBASE_").concat(e.split(":")[3])}class Lr{constructor(){this.type="COOKIE",this.listenerUnsubscribes=new Map}_getFinalTarget(e){if(void 0===typeof window)return e;const t=new URL("".concat(window.location.origin,"/__cookies__"));return t.searchParams.set("finalTarget",e),t}async _isAvailable(){var e;return!("boolean"===typeof isSecureContext&&!isSecureContext)&&("undefined"!==typeof navigator&&"undefined"!==typeof document&&(null===(e=navigator.cookieEnabled)||void 0===e||e))}async _set(e,t){}async _get(e){if(!this._isAvailable())return null;const t=Or(e);if(window.cookieStore){const e=await window.cookieStore.get(t);return null===e||void 0===e?void 0:e.value}return Dr(t)}async _remove(e){if(!this._isAvailable())return;if(!await this._get(e))return;const t=Or(e);document.cookie="".concat(t,"=;Max-Age=34560000;Partitioned;Secure;SameSite=Strict;Path=/;Priority=High"),await fetch("/__cookies__",{method:"DELETE"}).catch(()=>{})}_addListener(e,t){if(!this._isAvailable())return;const n=Or(e);if(window.cookieStore){const e=e=>{const r=e.changed.find(e=>e.name===n);r&&t(r.value);e.deleted.find(e=>e.name===n)&&t(null)},r=()=>window.cookieStore.removeEventListener("change",e);return this.listenerUnsubscribes.set(t,r),window.cookieStore.addEventListener("change",e)}let r=Dr(n);const s=setInterval(()=>{const e=Dr(n);e!==r&&(t(e),r=e)},1e3);this.listenerUnsubscribes.set(t,()=>clearInterval(s))}_removeListener(e,t){const n=this.listenerUnsubscribes.get(t);n&&(n(),this.listenerUnsubscribes.delete(t))}}Lr.type="COOKIE";class Mr extends Ar{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Mr.type="SESSION";const Fr=Mr;class Ur{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Ur(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:s}=t.data,i=this.handlersMap[r];if(null===i||void 0===i||!i.size)return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(i).map(async e=>e(t.origin,s)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Vr(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Ur.receivers=[];class zr{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,i;return new Promise((a,o)=>{const l=Vr("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);i={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(t.data.response);break;default:clearTimeout(c),clearTimeout(s),o(new Error("invalid_response"))}}},this.handlers.add(i),r.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}function qr(){return window}function Br(){return"undefined"!==typeof qr().WorkerGlobalScope&&"function"===typeof qr().importScripts}const Hr="firebaseLocalStorageDb",Gr="firebaseLocalStorage",Wr="fbase_key";class Kr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Qr(e,t){return e.transaction([Gr],t?"readwrite":"readonly").objectStore(Gr)}function Yr(){const e=indexedDB.open(Hr,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Gr,{keyPath:Wr})}catch(r){n(r)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Gr)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Hr);return new Kr(e).toPromise()}(),t(await Yr()))})})}async function Xr(e,t,n){const r=Qr(e,!0).put({[Wr]:t,value:n});return new Kr(r).toPromise()}function Jr(e,t){const n=Qr(e,!0).delete(t);return new Kr(n).toPromise()}class $r{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await Yr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(n){if(t++>3)throw n;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Br()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ur._getInstance(Br()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){var e;if(null===(e=navigator)||void 0===e||!e.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch(t){return null}}(),!this.activeServiceWorker)return;this.sender=new zr(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&null!==(e=n[0])&&void 0!==e&&e.fulfilled&&null!==(t=n[0])&&void 0!==t&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=navigator)||void 0===e||null===(e=e.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Yr();return await Xr(e,jr,"1"),await Jr(e,jr),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Xr(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=Qr(e,!1).get(t),r=await new Kr(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Jr(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=Qr(e,!1).getAll();return new Kr(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:s}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}$r.type="LOCAL";const Zr=$r;function es(e,t){return Ht(e,"POST","/v2/accounts/mfaSignIn:start",Bt(e,t))}const ts=Vn("rcb"),ns=new Mt(3e4,6e4);class rs{constructor(){var e;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(e=qr().grecaptcha)||void 0===e||!e.render)}load(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return jt(function(e){return e.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(e)}(t),e,"argument-error"),this.shouldResolveImmediately(t)&&Jt(qr().grecaptcha)?Promise.resolve(qr().grecaptcha):new Promise((n,r)=>{const s=qr().setTimeout(()=>{r(_t(e,"network-request-failed"))},ns.get());qr()[ts]=()=>{qr().clearTimeout(s),delete qr()[ts];const i=qr().grecaptcha;if(!i||!Jt(i))return void r(_t(e,"internal-error"));const a=i.render;i.render=(e,t)=>{const n=a(e,t);return this.counter++,n},this.hostLanguage=t,n(i)};Un("".concat(Fn.recaptchaV2Script,"?").concat(L({onload:ts,render:"explicit",hl:t}))).catch(()=>{clearTimeout(s),r(_t(e,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(e){var t;return!(null===(t=qr().grecaptcha)||void 0===t||!t.render)&&(e===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ss{async load(e){return new qn(e)}clearedOneInstance(){}}const is="recaptcha",as={theme:"light",type:"image"};class os{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u({},as);this.parameters=n,this.type=is,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ln(e),this.isInvisible="invisible"===this.parameters.size,jt("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment");const r="string"===typeof t?document.getElementById(t):t;jt(r,this.auth,"argument-error"),this.container=r,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ss:new rs,this.validateStartingState()}async verify(){this.assertNotDestroyed();const e=await this.render(),t=this.getAssertedRecaptcha(),n=t.getResponse(e);return n||new Promise(n=>{const r=e=>{e&&(this.tokenChangeListeners.delete(r),n(e))};this.tokenChangeListeners.add(r),this.isInvisible&&t.execute(e)})}render(){try{this.assertNotDestroyed()}catch(e){return Promise.reject(e)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(e=>{throw this.renderPromise=null,e})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(e=>{this.container.removeChild(e)})}validateStartingState(){jt(!this.parameters.sitekey,this.auth,"argument-error"),jt(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),jt("undefined"!==typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(e){return t=>{if(this.tokenChangeListeners.forEach(e=>e(t)),"function"===typeof e)e(t);else if("string"===typeof e){const n=qr()[e];"function"===typeof n&&n(t)}}}assertNotDestroyed(){jt(!this.destroyed,this.auth,"internal-error")}async makeRenderPromise(){if(await this.init(),!this.widgetId){let e=this.container;if(!this.isInvisible){const t=document.createElement("div");e.appendChild(t),e=t}this.widgetId=this.getAssertedRecaptcha().render(e,this.parameters)}return this.widgetId}async init(){jt(Dt()&&!Br(),this.auth,"internal-error"),await function(){let e=null;return new Promise(t=>{"complete"!==document.readyState?(e=()=>t(),window.addEventListener("load",e)):t()}).catch(t=>{throw e&&window.removeEventListener("load",e),t})}(),this.recaptcha=await this._recaptchaLoader.load(this.auth,this.auth.languageCode||void 0);const e=await async function(e){return(await Ht(e,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""}(this.auth);jt(e,this.auth,"internal-error"),this.parameters.sitekey=e}getAssertedRecaptcha(){return jt(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class ls{constructor(e,t){this.verificationId=e,this.onConfirmation=t}confirm(e){const t=lr._fromVerification(this.verificationId,e);return this.onConfirmation(t)}}async function cs(e,t,n){if(Ze(e.app))return Promise.reject(Ct(e));const r=Ln(e),s=await us(r,t,z(n));return new ls(s,e=>kr(r,e))}async function us(e,t,n){if(!e._getRecaptchaConfig())try{await Xn(e)}catch(s){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let s;if(s="string"===typeof t?{phoneNumber:t}:t,"session"in s){const t=s.session;if("phoneNumber"in s){jt("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},i=Yn(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===Wn){jt((null===n||void 0===n?void 0:n.type)===is,e,"argument-error");return Ir(e,await ds(e,t,n))}return Ir(e,t)},"PHONE_PROVIDER");return(await i.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{var r;jt("signin"===t.type,e,"internal-error");const i=(null===(r=s.multiFactorHint)||void 0===r?void 0:r.uid)||s.multiFactorUid;jt(i,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:i,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=Yn(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===Wn){jt((null===n||void 0===n?void 0:n.type)===is,e,"argument-error");return es(e,await ds(e,t,n))}return es(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:s.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=Yn(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===Wn){jt((null===n||void 0===n?void 0:n.type)===is,e,"argument-error");return ar(e,await ds(e,t,n))}return ar(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function ds(e,t,n){jt(n.type===is,e,"argument-error");const r=await n.verify();jt("string"===typeof r,e,"argument-error");const s=u({},t);if("phoneEnrollmentInfo"in s){const e=s.phoneEnrollmentInfo.phoneNumber,t=s.phoneEnrollmentInfo.captchaResponse,n=s.phoneEnrollmentInfo.clientType,i=s.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(s,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:i}}),s}if("phoneSignInInfo"in s){const e=s.phoneSignInInfo.captchaResponse,t=s.phoneSignInInfo.clientType,n=s.phoneSignInInfo.recaptchaVersion;return Object.assign(s,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),s}return Object.assign(s,{recaptchaToken:r}),s}class hs{constructor(e){this.providerId=hs.PROVIDER_ID,this.auth=Ln(e)}verifyPhoneNumber(e,t){return us(this.auth,e,z(t))}static credential(e,t){return lr._fromVerification(e,t)}static credentialFromResult(e){const t=e;return hs.credentialFromTaggedObject(t)}static credentialFromError(e){return hs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?lr._fromTokenResponse(n,r):null}}function fs(e,t){return t?gn(t):(jt(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}hs.PROVIDER_ID="phone",hs.PHONE_SIGN_IN_METHOD="phone";class ms extends er{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return sr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return sr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return sr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function ps(e){return Er(e.auth,new ms(e),e.bypassAuthState)}function gs(e){const{auth:t,user:n}=e;return jt(n,t,"internal-error"),Sr(n,new ms(e),e.bypassAuthState)}async function ys(e){const{auth:t,user:n}=e;return jt(n,t,"internal-error"),Nr(n,new ms(e),e.bypassAuthState)}class vs{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(n){this.reject(n)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:s,error:i,type:a}=e;if(i)return void this.reject(i);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(l){this.reject(l)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ps;case"linkViaPopup":case"linkViaRedirect":return ys;case"reauthViaPopup":case"reauthViaRedirect":return gs;default:kt(this.auth,"internal-error")}}resolve(e){Pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Pt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const bs=new Mt(2e3,1e4);class ws extends vs{constructor(e,t,n,r,s){super(e,t,r,s),this.provider=n,this.authWindow=null,this.pollId=null,ws.currentPopupAction&&ws.currentPopupAction.cancel(),ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return jt(e,this.auth,"internal-error"),e}async onExecution(){Pt(1===this.filter.length,"Popup operations only handle one event");const e=Vr();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(_t(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(_t(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t;null!==(t=this.authWindow)&&void 0!==t&&null!==(t=t.window)&&void 0!==t&&t.closed?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_t(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,bs.get())};e()}}ws.currentPopupAction=null;const xs=new Map;class Ns extends vs{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=xs.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=ks(t),r=Es(e);if(!await r._isAvailable())return!1;const s="true"===await r._get(n);return await r._remove(n),s}(this.resolver,this.auth),n=t?await super.execute():null;e=()=>Promise.resolve(n)}catch(t){e=()=>Promise.reject(t)}xs.set(this.auth._key(),e)}return this.bypassAuthState||xs.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function Ss(e,t){xs.set(e._key(),t)}function Es(e){return gn(e._redirectPersistence)}function ks(e){return bn("pendingRedirect",e.config.apiKey,e.name)}async function _s(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(Ze(e.app))return Promise.reject(Ct(e));const r=Ln(e),s=fs(r,t),i=new Ns(r,s,n),a=await i.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Ts{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Is(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!Is(e)){var n;const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(_t(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cs(e))}saveEventToCache(e){this.cachedEventUids.add(Cs(e)),this.lastProcessedEventTime=Date.now()}}function Cs(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Is(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const js=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,As=/^https?/;async function Ps(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return Ht(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Rs(r))return}catch(n){}kt(e,"unauthorized-domain")}function Rs(e){const t=Rt(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const s=new URL(e);return""===s.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&s.hostname===r}if(!As.test(n))return!1;if(js.test(e))return r===e;const s=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}const Ds=new Mt(3e4,6e4);function Os(){const e=qr().___jsl;if(null!==e&&void 0!==e&&e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Ls(e){return new Promise((t,n)=>{var r,s;function i(){Os(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Os(),n(_t(e,"network-request-failed"))},timeout:Ds.get()})}if(null!==(r=qr().gapi)&&void 0!==r&&null!==(r=r.iframes)&&void 0!==r&&r.Iframe)t(gapi.iframes.getContext());else{if(null===(s=qr().gapi)||void 0===s||!s.load){const t=Vn("iframefcb");return qr()[t]=()=>{gapi.load?i():n(_t(e,"network-request-failed"))},Un("".concat(Fn.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}i()}}).catch(e=>{throw Ms=null,e})}let Ms=null;const Fs=new Mt(5e3,15e3),Us={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vs=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function zs(e){const t=e.config;jt(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Ft(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:nt},s=Vs.get(e.config.apiHost);s&&(r.eid=s);const i=e._getFrameworks();return i.length&&(r.fw=i.join(",")),"".concat(n,"?").concat(L(r).slice(1))}async function qs(e){const t=await function(e){return Ms=Ms||Ls(e),Ms}(e),n=qr().gapi;return jt(n,e,"internal-error"),t.open({where:document.body,url:zs(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Us,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const s=_t(e,"network-request-failed"),i=qr().setTimeout(()=>{r(s)},Fs.get());function a(){qr().clearTimeout(i),n(t)}t.ping(a).then(a,()=>{r(s)})}))}const Bs={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Hs{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(e){}}}function Gs(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const i=Math.max((window.screen.availHeight-s)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=u(u({},Bs),{},{width:r.toString(),height:s.toString(),top:i,left:a}),c=T().toLowerCase();n&&(o=En(c)?"_blank":n),Nn(c)&&(t=t||"http://localhost",l.scrollbars="yes");const d=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return In(arguments.length>0&&void 0!==arguments[0]?arguments[0]:T())&&!(null===(e=window.navigator)||void 0===e||!e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new Hs(null);const h=window.open(t||"",o,d);jt(h,e,"popup-blocked");try{h.focus()}catch(f){}return new Hs(h)}const Ws="__/auth/handler",Ks="emulator/auth/handler",Qs=encodeURIComponent("fac");async function Ys(e,t,n,r,s,i){jt(e.config.authDomain,e,"auth-domain-config-required"),jt(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:nt,eventId:s};if(t instanceof dr){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",function(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(i||{}))a[e]=t}if(t instanceof hr){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Qs,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Ws);return Ft(t,Ks)}(e),"?").concat(L(o).slice(1)).concat(c)}const Xs="webStorageSupport";const Js=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fr,this._completeRedirectFn=_s,this._overrideRedirectResult=Ss}async _openPopup(e,t,n,r){var s;Pt(null===(s=this.eventManagers[e._key()])||void 0===s?void 0:s.manager,"_initialize() not called before _openPopup()");return Gs(e,await Ys(e,t,n,Rt(),r),Vr())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){qr().location.href=e}(await Ys(e,t,n,Rt(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Pt(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await qs(e),n=new Ts(e);return t.register("authEvent",t=>{jt(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Xs,{type:Xs},n=>{var r;const s=null===n||void 0===n||null===(r=n[0])||void 0===r?void 0:r[Xs];void 0!==s&&t(!!s),kt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Ps(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return An()||Sn()||In()}};var $s="@firebase/auth",Zs="1.11.0";class ei{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){jt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ti=w("authIdTokenMaxAge")||300;let ni=null;function ri(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st();const t=$e(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=$e(e,"auth");if(n.isInitialized()){const e=n.getImmediate();if(D(n.getOptions(),null!==t&&void 0!==t?t:{}))return e;kt(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:Js,persistence:[Zr,Rr,Fr]}),r=w("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(s=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>ti)return;const r=null===t||void 0===t?void 0:t.token;ni!==r&&(ni=r,await fetch(s,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){z(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){z(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var s;const i=v("auth");return i&&Jn(n,"http://".concat(i)),n}var si;Fn={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=_t("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(e=null===(t=document.getElementsByTagName("head"))||void 0===t?void 0:t[0])&&void 0!==e?e:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},si="Browser",Je(new q("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),i=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;jt(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:si,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Pn(si)},c=new On(r,s,i,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(gn);null!==t&&void 0!==t&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),Je(new q("auth-internal",e=>(e=>new ei(e))(Ln(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),at($s,Zs,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(si)),at($s,Zs,"esm2020");var ii,ai,oi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},li={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var s=0;16>s;++s)r[s]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(s=0;16>s;++s)r[s]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],s=e.g[2];var i=e.g[3],a=t+(i^n&(s^i))+r[0]+3614090360&4294967295;a=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=(n=(s=(i=(t=n+(a<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^n&(s^i))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=i+(s^t&(n^s))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=s+(n^i&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^s&(i^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^i&(n^s))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(s^i&(n^s))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=i+(n^s&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=s+(t^n&(i^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(i^t&(s^i))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^s^i)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^s^i)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=i+(t^n^s)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=s+(i^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(s^i^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(s^(n|~i))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(s^(n|~i))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=s+(t^(i|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(i^(s|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((i=(t=n+((a=t+(s^(n|~i))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=i+(n^(t|~s))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((s=i+((a=s+(t^(i|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(s+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+s&4294967295,e.g[3]=e.g[3]+i&4294967295}function r(e,t){this.h=t;for(var n=[],r=!0,s=e.length-1;0<=s;s--){var i=0|e[s];r&&i==t||(n[s]=i,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,s=this.B,i=this.h,a=0;a<t;){if(0==i)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(s[i++]=e.charCodeAt(a++),i==this.blockSize){n(this,s),i=0;break}}else for(;a<t;)if(s[i++]=e[a++],i==this.blockSize){n(this,s),i=0;break}}this.h=i,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var s={};function i(e){return-128<=e&&128>e?function(e,t){var n=s;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new r([0|e],0>e?-1:0)}):new r([0|e],0>e?-1:0)}function a(e){if(isNaN(e)||!isFinite(e))return o;if(0>e)return h(a(-e));for(var t=[],n=1,s=0;e>=n;s++)t[s]=e/n|0,n*=4294967296;return new r(t,0)}var o=i(0),l=i(1),c=i(16777216);function u(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function d(e){return-1==e.h}function h(e){for(var t=e.g.length,n=[],s=0;s<t;s++)n[s]=~e.g[s];return new r(n,~e.h).add(l)}function f(e,t){return e.add(h(t))}function m(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function p(e,t){this.g=e,this.h=t}function g(e,t){if(u(t))throw Error("division by zero");if(u(e))return new p(o,o);if(d(e))return t=g(h(e),t),new p(h(t.g),h(t.h));if(d(t))return t=g(e,h(t)),new p(h(t.g),t.h);if(30<e.g.length){if(d(e)||d(t))throw Error("slowDivide_ only works with positive integers.");for(var n=l,r=t;0>=r.l(e);)n=y(n),r=y(r);var s=v(n,1),i=v(r,1);for(r=v(r,2),n=v(n,2);!u(r);){var c=i.add(r);0>=c.l(e)&&(s=s.add(n),i=c),r=v(r,1),n=v(n,1)}return t=f(e,s.j(t)),new p(s,t)}for(s=o;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),c=(i=a(n)).j(t);d(c)||0<c.l(e);)c=(i=a(n-=r)).j(t);u(i)&&(i=l),s=s.add(i),e=f(e,c)}return new p(s,e)}function y(e){for(var t=e.g.length+1,n=[],s=0;s<t;s++)n[s]=e.i(s)<<1|e.i(s-1)>>>31;return new r(n,e.h)}function v(e,t){var n=t>>5;t%=32;for(var s=e.g.length-n,i=[],a=0;a<s;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new r(i,e.h)}(e=r.prototype).m=function(){if(d(this))return-h(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(u(this))return"0";if(d(this))return"-"+h(this).toString(e);for(var t=a(Math.pow(e,6)),n=this,r="";;){var s=g(n,t).g,i=((0<(n=f(n,s.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(u(n=s))return i+r;for(;6>i.length;)i="0"+i;r=i+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return d(e=f(this,e))?-1:u(e)?0:1},e.abs=function(){return d(this)?h(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0,i=0;i<=t;i++){var a=s+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);s=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new r(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(u(this)||u(e))return o;if(d(this))return d(e)?h(this).j(h(e)):h(h(this).j(e));if(d(e))return h(this.j(h(e)));if(0>this.l(c)&&0>e.l(c))return a(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],s=0;s<2*t;s++)n[s]=0;for(s=0;s<this.g.length;s++)for(var i=0;i<e.g.length;i++){var l=this.i(s)>>>16,f=65535&this.i(s),p=e.i(i)>>>16,g=65535&e.i(i);n[2*s+2*i]+=f*g,m(n,2*s+2*i),n[2*s+2*i+1]+=l*g,m(n,2*s+2*i+1),n[2*s+2*i+1]+=f*p,m(n,2*s+2*i+1),n[2*s+2*i+2]+=l*p,m(n,2*s+2*i+2)}for(s=0;s<t;s++)n[s]=n[2*s+1]<<16|n[2*s];for(s=t;s<2*t;s++)n[s]=0;return new r(n,0)},e.A=function(e){return g(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)&e.i(s);return new r(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)|e.i(s);return new r(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],s=0;s<t;s++)n[s]=this.i(s)^e.i(s);return new r(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,ai=li.Md5=t,r.prototype.add=r.prototype.add,r.prototype.multiply=r.prototype.j,r.prototype.modulo=r.prototype.A,r.prototype.compare=r.prototype.l,r.prototype.toNumber=r.prototype.m,r.prototype.toString=r.prototype.toString,r.prototype.getBits=r.prototype.i,r.fromNumber=a,r.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return h(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=a(Math.pow(n,8)),s=o,i=0;i<t.length;i+=8){var l=Math.min(8,t.length-i),c=parseInt(t.substring(i,i+l),n);8>l?(l=a(Math.pow(n,l)),s=s.j(l).add(a(c))):s=(s=s.j(r)).add(a(c))}return s},ii=li.Integer=r}).apply("undefined"!==typeof oi?oi:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var ci,ui,di,hi,fi,mi,pi,gi,yi="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},vi={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof yi&&yi];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var s=n;e=e.split(".");for(var i=0;i<e.length-1;i++){var a=e[i];if(!(a in s))break e;s=s[a]}(r=r(i=s[e=e[e.length-1]]))!=i&&null!=r&&t(s,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,s={next:function(){if(!r&&n<e.length){var s=n++;return{value:t(s,e[s]),done:!1}}return r=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s}(this,function(e,t){return t})}});var r=r||{},s=this||self;function i(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function d(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var s=Array(arguments.length-2),i=2;i<arguments.length;i++)s[i-2]=arguments[i];return t.prototype[n].apply(e,s)}}function h(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function f(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(i(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let s=0;s<r;s++)e[n+s]=t[s]}else e.push(t)}}function m(e){return/^[\s\xa0]*$/.test(e)}function p(){var e=s.navigator;return e&&(e=e.userAgent)?e:""}function g(e){return g[" "](e),e}g[" "]=function(){};var y=-1!=p().indexOf("Gecko")&&!(-1!=p().toLowerCase().indexOf("webkit")&&-1==p().indexOf("Edge"))&&!(-1!=p().indexOf("Trident")||-1!=p().indexOf("MSIE"))&&-1==p().indexOf("Edge");function v(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function b(e){const t={};for(const n in e)t[n]=e[n];return t}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function x(e,t){let n,r;for(let s=1;s<arguments.length;s++){for(n in r=arguments[s],r)e[n]=r[n];for(let t=0;t<w.length;t++)n=w[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function N(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function S(e){s.setTimeout(()=>{throw e},0)}function E(){var e=I;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var k=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new _,e=>e.reset());class _{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let T,C=!1,I=new class{constructor(){this.h=this.g=null}add(e,t){const n=k.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},j=()=>{const e=s.Promise.resolve(void 0);T=()=>{e.then(A)}};var A=()=>{for(var e;e=E();){try{e.h.call(e.g)}catch(n){S(n)}var t=k;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}C=!1};function P(){this.s=this.s,this.C=this.C}function R(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}P.prototype.s=!1,P.prototype.ma=function(){this.s||(this.s=!0,this.N())},P.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},R.prototype.h=function(){this.defaultPrevented=!0};var D=function(){if(!s.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};s.addEventListener("test",e,t),s.removeEventListener("test",e,t)}catch(n){}return e}();function O(e,t){if(R.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(y){e:{try{g(t.nodeName);var s=!0;break e}catch(i){}s=!1}s||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:L[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&O.aa.h.call(this)}}d(O,R);var L={2:"touch",3:"pen",4:"mouse"};O.prototype.h=function(){O.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var M="closure_listenable_"+(1e6*Math.random()|0),F=0;function U(e,t,n,r,s){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=s,this.key=++F,this.da=this.fa=!1}function V(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function z(e){this.src=e,this.g={},this.h=0}function q(e,t){var n=t.type;if(n in e.g){var r,s=e.g[n],i=Array.prototype.indexOf.call(s,t,void 0);(r=0<=i)&&Array.prototype.splice.call(s,i,1),r&&(V(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function B(e,t,n,r){for(var s=0;s<e.length;++s){var i=e[s];if(!i.da&&i.listener==t&&i.capture==!!n&&i.ha==r)return s}return-1}z.prototype.add=function(e,t,n,r,s){var i=e.toString();(e=this.g[i])||(e=this.g[i]=[],this.h++);var a=B(e,t,r,s);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new U(t,this.src,i,!!r,s)).fa=n,e.push(t)),t};var H="closure_lm_"+(1e6*Math.random()|0),G={};function W(e,t,n,r,s){if(r&&r.once)return Q(e,t,n,r,s);if(Array.isArray(t)){for(var i=0;i<t.length;i++)W(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.K(t,n,a(r)?!!r.capture:!!r,s):K(e,t,n,!1,r,s)}function K(e,t,n,r,s,i){if(!t)throw Error("Invalid event type");var o=a(s)?!!s.capture:!!s,l=Z(e);if(l||(e[H]=l=new z(e)),(n=l.add(t,n,r,o,i)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=$;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)D||(s=o),void 0===s&&(s=!1),e.addEventListener(t.toString(),r,s);else if(e.attachEvent)e.attachEvent(J(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function Q(e,t,n,r,s){if(Array.isArray(t)){for(var i=0;i<t.length;i++)Q(e,t[i],n,r,s);return null}return n=te(n),e&&e[M]?e.L(t,n,a(r)?!!r.capture:!!r,s):K(e,t,n,!0,r,s)}function Y(e,t,n,r,s){if(Array.isArray(t))for(var i=0;i<t.length;i++)Y(e,t[i],n,r,s);else r=a(r)?!!r.capture:!!r,n=te(n),e&&e[M]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=B(i=e.g[t],n,r,s))&&(V(i[n]),Array.prototype.splice.call(i,n,1),0==i.length&&(delete e.g[t],e.h--)))):e&&(e=Z(e))&&(t=e.g[t.toString()],e=-1,t&&(e=B(t,n,r,s)),(n=-1<e?t[e]:null)&&X(n))}function X(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[M])q(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(J(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=Z(t))?(q(n,e),0==n.h&&(n.src=null,t[H]=null)):V(e)}}}function J(e){return e in G?G[e]:G[e]="on"+e}function $(e,t){if(e.da)e=!0;else{t=new O(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&X(e),e=n.call(r,t)}return e}function Z(e){return(e=e[H])instanceof z?e:null}var ee="__closure_events_fn_"+(1e9*Math.random()>>>0);function te(e){return"function"===typeof e?e:(e[ee]||(e[ee]=function(t){return e.handleEvent(t)}),e[ee])}function ne(){P.call(this),this.i=new z(this),this.M=this,this.F=null}function re(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new R(t,e);else if(t instanceof R)t.target=t.target||e;else{var s=t;x(t=new R(r,e),s)}if(s=!0,n)for(var i=n.length-1;0<=i;i--){var a=t.g=n[i];s=se(a,r,!0,t)&&s}if(s=se(a=t.g=e,r,!0,t)&&s,s=se(a,r,!1,t)&&s,n)for(i=0;i<n.length;i++)s=se(a=t.g=n[i],r,!1,t)&&s}function se(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var s=!0,i=0;i<t.length;++i){var a=t[i];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&q(e.i,a),s=!1!==o.call(l,r)&&s}}return s&&!r.defaultPrevented}function ie(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:s.setTimeout(e,t||0)}function ae(e){e.g=ie(()=>{e.g=null,e.i&&(e.i=!1,ae(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}d(ne,P),ne.prototype[M]=!0,ne.prototype.removeEventListener=function(e,t,n,r){Y(this,e,t,n,r)},ne.prototype.N=function(){if(ne.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)V(n[r]);delete t.g[e],t.h--}}this.F=null},ne.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},ne.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class oe extends P{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ae(this)}N(){super.N(),this.g&&(s.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function le(e){P.call(this),this.h=e,this.g={}}d(le,P);var ce=[];function ue(e){v(e.g,function(e,t){this.g.hasOwnProperty(t)&&X(e)},e),e.g={}}le.prototype.N=function(){le.aa.N.call(this),ue(this)},le.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var de=s.JSON.stringify,he=s.JSON.parse,fe=class{stringify(e){return s.JSON.stringify(e,void 0)}parse(e){return s.JSON.parse(e,void 0)}};function me(){}function pe(e){return e.h||(e.h=e.i())}function ge(){}me.prototype.h=null;var ye={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function ve(){R.call(this,"d")}function be(){R.call(this,"c")}d(ve,R),d(be,R);var we={},xe=null;function Ne(){return xe=xe||new ne}function Se(e){R.call(this,we.La,e)}function Ee(e){const t=Ne();re(t,new Se(t))}function ke(e,t){R.call(this,we.STAT_EVENT,e),this.stat=t}function _e(e){const t=Ne();re(t,new ke(t,e))}function Te(e,t){R.call(this,we.Ma,e),this.size=t}function Ce(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return s.setTimeout(function(){e()},t)}function Ie(){this.g=!0}function je(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var s=r[1];if(Array.isArray(s)&&!(1>s.length)){var i=s[0];if("noop"!=i&&"stop"!=i&&"close"!=i)for(var a=1;a<s.length;a++)s[a]=""}}}return de(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}we.La="serverreachability",d(Se,R),we.STAT_EVENT="statevent",d(ke,R),we.Ma="timingevent",d(Te,R),Ie.prototype.xa=function(){this.g=!1},Ie.prototype.info=function(){};var Ae,Pe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Re={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function De(){}function Oe(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new le(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Le}function Le(){this.i=null,this.g="",this.h=!1}d(De,me),De.prototype.g=function(){return new XMLHttpRequest},De.prototype.i=function(){return{}},Ae=new De;var Me={},Fe={};function Ue(e,t,n){e.L=1,e.v=dt(at(t)),e.m=n,e.P=!0,Ve(e,null)}function Ve(e,t){e.F=Date.now(),Be(e),e.A=at(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),kt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Le,e.g=fn(e.j,n?t:null,!e.m),0<e.O&&(e.M=new oe(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var s="readystatechange";Array.isArray(s)||(s&&(ce[0]=s.toString()),s=ce);for(var i=0;i<s.length;i++){var a=W(n,s[i],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?b(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Ee(),function(e,t,n,r,s,i){e.info(function(){if(e.g)if(i)for(var a="",o=i.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");a=2<=d.length&&"type"==d[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=i;return"XMLHTTP REQ ("+r+") [attempt "+s+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function ze(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function qe(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Fe:(n=Number(t.substring(n,r)),isNaN(n)?Me:(r+=1)+n>t.length?Fe:(t=t.slice(r,r+n),e.C=r+n,t))}function Be(e){e.S=Date.now()+e.I,He(e,e.I)}function He(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=Ce(c(e.ba,e),t)}function Ge(e){e.B&&(s.clearTimeout(e.B),e.B=null)}function We(e){0==e.j.G||e.J||ln(e.j,e)}function Ke(e){Ge(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,ue(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function Qe(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||Ze(n.h,e)))if(!e.K&&Ze(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var s=r;if(0==s[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;on(n),Xt(n)}rn(n),_e(18)}}else n.za=s[1],0<n.za-n.T&&37500>s[2]&&n.F&&0==n.v&&!n.C&&(n.C=Ce(c(n.Za,n),6e3));if(1>=$e(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else un(n,11)}else if((e.K||n.g==e)&&on(n),!m(t))for(s=n.Da.g.parse(t),t=0;t<s.length;t++){let c=s[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const s=c[4];null!=s&&(n.Aa=s,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const d=e.g;if(d){const e=d.g?d.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var i=r.h;i.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(i.j=i.l,i.g=new Set,i.h&&(et(i,i.h),i.h=null))}if(r.D){const e=d.g?d.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,ut(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=hn(r,r.J?r.ia:null,r.W),a.K){tt(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(Ge(o),Be(o)),r.g=a}else nn(r);0<n.i.length&&$t(n)}else"stop"!=c[0]&&"close"!=c[0]||un(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?un(n,7):Yt(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Ee()}catch(u){}}Oe.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==Gt(e)?t.j():this.Y(e)},Oe.prototype.Y=function(e){try{if(e==this.g)e:{const h=Gt(this.g);var t=this.g.Ba();this.g.Z();if(!(3>h)&&(3!=h||this.g&&(this.h.h||this.g.oa()||Wt(this.g)))){this.J||4!=h||7==t||Ee(),Ge(this);var n=this.g.Z();this.X=n;t:if(ze(this)){var r=Wt(this.g);e="";var i=r.length,a=4==Gt(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){Ke(this),We(this);var o="";break t}this.h.i=new s.TextDecoder}for(t=0;t<i;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==i-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,s,i,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+s+"]: "+t+"\n"+n+"\n"+i+" "+a})}(this.i,this.u,this.A,this.l,this.R,h,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!m(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,_e(12),Ke(this),We(this);break e}je(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Qe(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=qe(this,o),e==Fe){4==h&&(this.s=4,_e(14),n=!1),je(this.i,this.l,null,"[Incomplete Response]");break}if(e==Me){this.s=4,_e(15),je(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}je(this.i,this.l,e,null),Qe(this,e)}if(ze(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=h||0!=o.length||this.h.h||(this.s=1,_e(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var d=this.j;d.g==this&&d.ba&&!d.M&&(d.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),sn(d),d.M=!0,_e(11))}}else je(this.i,this.l,o,"[Invalid Chunked Response]"),Ke(this),We(this)}else je(this.i,this.l,o,null),Qe(this,o);4==h&&Ke(this),this.o&&!this.J&&(4==h?ln(this.j,this):(this.o=!1,Be(this)))}else(function(e){const t={};e=(e.g&&2<=Gt(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(m(e[r]))continue;var n=N(e[r]);const s=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const i=t[s]||[];t[s]=i,i.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,_e(12)):(this.s=0,_e(13)),Ke(this),We(this)}}}catch(h){}},Oe.prototype.cancel=function(){this.J=!0,Ke(this)},Oe.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Ee(),_e(17)),Ke(this),this.s=2,We(this)):He(this,this.S-e)};var Ye=class{constructor(e,t){this.g=e,this.map=t}};function Xe(e){this.l=e||10,s.PerformanceNavigationTiming?e=0<(e=s.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(s.chrome&&s.chrome.loadTimes&&s.chrome.loadTimes()&&s.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Je(e){return!!e.h||!!e.g&&e.g.size>=e.j}function $e(e){return e.h?1:e.g?e.g.size:0}function Ze(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function et(e,t){e.g?e.g.add(t):e.h=t}function tt(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function nt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return h(e.i)}function rt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(i(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(i(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(i(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),s=r.length,a=0;a<s;a++)t.call(void 0,r[a],n&&n[a],e)}Xe.prototype.cancel=function(){if(this.i=nt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var st=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function it(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof it){this.h=e.h,ot(this,e.j),this.o=e.o,this.g=e.g,lt(this,e.s),this.l=e.l;var t=e.i,n=new xt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),ct(this,n),this.m=e.m}else e&&(t=String(e).match(st))?(this.h=!1,ot(this,t[1]||"",!0),this.o=ht(t[2]||""),this.g=ht(t[3]||"",!0),lt(this,t[4]),this.l=ht(t[5]||"",!0),ct(this,t[6]||"",!0),this.m=ht(t[7]||"")):(this.h=!1,this.i=new xt(null,this.h))}function at(e){return new it(e)}function ot(e,t,n){e.j=n?ht(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function lt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function ct(e,t,n){t instanceof xt?(e.i=t,function(e,t){t&&!e.j&&(Nt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(St(this,t),kt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=ft(t,bt)),e.i=new xt(t,e.h))}function ut(e,t,n){e.i.set(t,n)}function dt(e){return ut(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function ht(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function ft(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,mt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function mt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}it.prototype.toString=function(){var e=[],t=this.j;t&&e.push(ft(t,gt,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(ft(t,gt,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(ft(n,"/"==n.charAt(0)?vt:yt,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",ft(n,wt)),e.join("")};var pt,gt=/[#\/\?@]/g,yt=/[#\?:]/g,vt=/[#\?]/g,bt=/[#\?@]/g,wt=/#/g;function xt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Nt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),s=null;if(0<=r){var i=e[n].substring(0,r);s=e[n].substring(r+1)}else i=e[n];t(i,s?decodeURIComponent(s.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function St(e,t){Nt(e),t=_t(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Et(e,t){return Nt(e),t=_t(e,t),e.g.has(t)}function kt(e,t,n){St(e,t),0<n.length&&(e.i=null,e.g.set(_t(e,t),h(n)),e.h+=n.length)}function _t(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Tt(e,t,n,r,s){try{s&&(s.onload=null,s.onerror=null,s.onabort=null,s.ontimeout=null),r(n)}catch(i){}}function Ct(){this.g=new fe}function It(e,t,n){const r=n||"";try{rt(e,function(e,n){let s=e;a(e)&&(s=de(e)),t.push(r+n+"="+encodeURIComponent(s))})}catch(s){throw t.push(r+"type="+encodeURIComponent("_badmap")),s}}function jt(e){this.l=e.Ub||null,this.j=e.eb||!1}function At(e,t){ne.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function Pt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Rt(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Dt(e)}function Dt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Ot(e){let t="";return v(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Lt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Ot(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):ut(e,t,n))}function Mt(e){ne.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=xt.prototype).add=function(e,t){Nt(this),this.i=null,e=_t(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Nt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Nt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const s=e[r];for(let e=0;e<s.length;e++)n.push(t[r])}return n},e.V=function(e){Nt(this);let t=[];if("string"===typeof e)Et(this,e)&&(t=t.concat(this.g.get(_t(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Nt(this),this.i=null,Et(this,e=_t(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const i=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var s=i;""!==a[r]&&(s+="="+encodeURIComponent(String(a[r]))),e.push(s)}}return this.i=e.join("&")},d(jt,me),jt.prototype.g=function(){return new At(this.l,this.j)},jt.prototype.i=(pt={},function(){return pt}),d(At,ne),(e=At.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Dt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||s).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Rt(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Dt(this)),this.g&&(this.readyState=3,Dt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof s.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Pt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Rt(this):Dt(this),3==this.readyState&&Pt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Rt(this))},e.Qa=function(e){this.g&&(this.response=e,Rt(this))},e.ga=function(){this.g&&Rt(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(At.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),d(Mt,ne);var Ft=/^https?$/i,Ut=["POST","PUT"];function Vt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,zt(e),Bt(e)}function zt(e){e.A||(e.A=!0,re(e,"complete"),re(e,"error"))}function qt(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=Gt(e)||2!=e.Z()))if(e.u&&4==Gt(e))ie(e.Ea,0,e);else if(re(e,"readystatechange"),4==Gt(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var i;if(i=0===r){var a=String(e.D).match(st)[1]||null;!a&&s.self&&s.self.location&&(a=s.self.location.protocol.slice(0,-1)),i=!Ft.test(a?a.toLowerCase():"")}n=i}if(n)re(e,"complete"),re(e,"success");else{e.m=6;try{var o=2<Gt(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",zt(e)}}finally{Bt(e)}}}function Bt(e,t){if(e.g){Ht(e);const r=e.g,s=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||re(e,"ready");try{r.onreadystatechange=s}catch(n){}}}function Ht(e){e.I&&(s.clearTimeout(e.I),e.I=null)}function Gt(e){return e.g?e.g.readyState:0}function Wt(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Kt(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function Qt(e){this.Aa=0,this.i=[],this.j=new Ie,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Kt("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Kt("baseRetryDelayMs",5e3,e),this.cb=Kt("retryDelaySeedMs",1e4,e),this.Wa=Kt("forwardChannelMaxRetries",2,e),this.wa=Kt("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new Xe(e&&e.concurrentRequestLimit),this.Da=new Ct,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function Yt(e){if(Jt(e),3==e.G){var t=e.U++,n=at(e.I);if(ut(n,"SID",e.K),ut(n,"RID",t),ut(n,"TYPE","terminate"),en(e,n),(t=new Oe(e,e.j,t)).L=2,t.v=dt(at(n)),n=!1,s.navigator&&s.navigator.sendBeacon)try{n=s.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&s.Image&&((new Image).src=t.v,n=!0),n||(t.g=fn(t.j,null),t.g.ea(t.v)),t.F=Date.now(),Be(t)}dn(e)}function Xt(e){e.g&&(sn(e),e.g.cancel(),e.g=null)}function Jt(e){Xt(e),e.u&&(s.clearTimeout(e.u),e.u=null),on(e),e.h.cancel(),e.s&&("number"===typeof e.s&&s.clearTimeout(e.s),e.s=null)}function $t(e){if(!Je(e.h)&&!e.s){e.s=!0;var t=e.Ga;T||j(),C||(T(),C=!0),I.add(t,e),e.B=0}}function Zt(e,t){var n;n=t?t.l:e.U++;const r=at(e.I);ut(r,"SID",e.K),ut(r,"RID",n),ut(r,"AID",e.T),en(e,r),e.m&&e.o&&Lt(r,e.m,e.o),n=new Oe(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=tn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),et(e.h,n),Ue(n,r,t)}function en(e,t){e.H&&v(e.H,function(e,n){ut(t,n,e)}),e.l&&rt({},function(e,n){ut(t,n,e)})}function tn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var s=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=s[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let a=!0;for(let o=0;o<n;o++){let n=s[o].g;const l=s[o].map;if(n-=t,0>n)t=Math.max(0,s[o].g-100),a=!1;else try{It(l,e,"req"+n+"_")}catch(i){r&&r(l)}}if(a){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function nn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;T||j(),C||(T(),C=!0),I.add(t,e),e.v=0}}function rn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=Ce(c(e.Fa,e),cn(e,e.v)),e.v++,!0)}function sn(e){null!=e.A&&(s.clearTimeout(e.A),e.A=null)}function an(e){e.g=new Oe(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=at(e.qa);ut(t,"RID","rpc"),ut(t,"SID",e.K),ut(t,"AID",e.T),ut(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&ut(t,"TO",e.ja),ut(t,"TYPE","xmlhttp"),en(e,t),e.m&&e.o&&Lt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=dt(at(t)),n.m=null,n.P=!0,Ve(n,e)}function on(e){null!=e.C&&(s.clearTimeout(e.C),e.C=null)}function ln(e,t){var n=null;if(e.g==t){on(e),sn(e),e.g=null;var r=2}else{if(!Ze(e.h,t))return;n=t.D,tt(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var s=e.B;re(r=Ne(),new Te(r,n)),$t(e)}else nn(e);else if(3==(s=t.s)||0==s&&0<t.X||!(1==r&&function(e,t){return!($e(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=Ce(c(e.Ga,e,t),cn(e,e.B)),e.B++,!0))}(e,t)||2==r&&rn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),s){case 1:un(e,5);break;case 4:un(e,10);break;case 3:un(e,6);break;default:un(e,2)}}function cn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function un(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new it(r||"//www.google.com/images/cleardot.gif"),s.location&&"http"==s.location.protocol||ot(r,"https"),dt(r),t?function(e,t){const n=new Ie;if(s.Image){const r=new Image;r.onload=u(Tt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Tt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Tt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Tt,n,"TestLoadImage: timeout",!1,t,r),s.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ie;const n=new AbortController,r=setTimeout(()=>{n.abort(),Tt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Tt(0,0,!0,t):Tt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Tt(0,0,!1,t)})}(r.toString(),n)}else _e(2);e.G=0,e.l&&e.l.sa(t),dn(e),Jt(e)}function dn(e){if(e.G=0,e.ka=[],e.l){const t=nt(e.h);0==t.length&&0==e.i.length||(f(e.ka,t),f(e.ka,e.i),e.h.i.length=0,h(e.i),e.i.length=0),e.l.ra()}}function hn(e,t,n){var r=n instanceof it?at(n):new it(n);if(""!=r.g)t&&(r.g=t+"."+r.g),lt(r,r.s);else{var i=s.location;r=i.protocol,t=t?t+"."+i.hostname:i.hostname,i=+i.port;var a=new it(null);r&&ot(a,r),t&&(a.g=t),i&&lt(a,i),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&ut(r,n,t),ut(r,"VER",e.la),en(e,r),r}function fn(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Mt(new jt({eb:n})):new Mt(e.pa)).Ha(e.J),t}function mn(){}function pn(){}function gn(e,t){ne.call(this),this.g=new Qt(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!m(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!m(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new bn(this)}function yn(e){ve.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function vn(){be.call(this),this.status=1}function bn(e){this.g=e}(e=Mt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ae.g(),this.v=this.o?pe(this.o):pe(Ae),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Vt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),i=s.FormData&&e instanceof s.FormData,!(0<=Array.prototype.indexOf.call(Ut,t,void 0))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ht(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Vt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,re(this,"complete"),re(this,"abort"),Bt(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Bt(this,!0)),Mt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?qt(this):this.bb())},e.bb=function(){qt(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<Gt(this)?this.g.status:-1}catch(pt){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(pt){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),he(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=Qt.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){_e(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=hn(this,null,this.W),$t(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const s=new Oe(this,this.j,e);let i=this.o;if(this.S&&(i?(i=b(i),x(i,this.S)):i=this.S),null!==this.m||this.O||(s.H=i,i=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=tn(this,s,t),ut(n=at(this.I),"RID",e),ut(n,"CVER",22),this.D&&ut(n,"X-HTTP-Session-Id",this.D),en(this,n),i&&(this.O?t="headers="+encodeURIComponent(String(Ot(i)))+"&"+t:this.m&&Lt(n,this.m,i)),et(this.h,s),this.Ua&&ut(n,"TYPE","init"),this.P?(ut(n,"$req",t),ut(n,"SID","null"),s.T=!0,Ue(s,n,null)):Ue(s,n,t),this.G=2}}else 3==this.G&&(e?Zt(this,e):0==this.i.length||Je(this.h)||Zt(this))},e.Fa=function(){if(this.u=null,an(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=Ce(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,_e(10),Xt(this),an(this))},e.Za=function(){null!=this.C&&(this.C=null,Xt(this),rn(this),_e(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),_e(2)):(this.j.info("Failed to ping google.com"),_e(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=mn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},pn.prototype.g=function(e,t){return new gn(e,t)},d(gn,ne),gn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},gn.prototype.close=function(){Yt(this.g)},gn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=de(e),e=n);t.i.push(new Ye(t.Ya++,e)),3==t.G&&$t(t)},gn.prototype.N=function(){this.g.l=null,delete this.j,Yt(this.g),delete this.g,gn.aa.N.call(this)},d(yn,ve),d(vn,be),d(bn,mn),bn.prototype.ua=function(){re(this.g,"a")},bn.prototype.ta=function(e){re(this.g,new yn(e))},bn.prototype.sa=function(e){re(this.g,new vn)},bn.prototype.ra=function(){re(this.g,"b")},pn.prototype.createWebChannel=pn.prototype.g,gn.prototype.send=gn.prototype.o,gn.prototype.open=gn.prototype.m,gn.prototype.close=gn.prototype.close,gi=vi.createWebChannelTransport=function(){return new pn},pi=vi.getStatEventTarget=function(){return Ne()},mi=vi.Event=we,fi=vi.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Pe.NO_ERROR=0,Pe.TIMEOUT=8,Pe.HTTP_ERROR=6,hi=vi.ErrorCode=Pe,Re.COMPLETE="complete",di=vi.EventType=Re,ge.EventType=ye,ye.OPEN="a",ye.CLOSE="b",ye.ERROR="c",ye.MESSAGE="d",ne.prototype.listen=ne.prototype.K,ui=vi.WebChannel=ge,vi.FetchXmlHttpFactory=jt,Mt.prototype.listenOnce=Mt.prototype.L,Mt.prototype.getLastError=Mt.prototype.Ka,Mt.prototype.getLastErrorCode=Mt.prototype.Ba,Mt.prototype.getStatus=Mt.prototype.Z,Mt.prototype.getResponseJson=Mt.prototype.Oa,Mt.prototype.getResponseText=Mt.prototype.oa,Mt.prototype.send=Mt.prototype.ea,Mt.prototype.setWithCredentials=Mt.prototype.Ha,ci=vi.XhrIo=Mt}).apply("undefined"!==typeof yi?yi:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const bi="@firebase/firestore",wi="4.9.0";class xi{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}xi.UNAUTHENTICATED=new xi(null),xi.GOOGLE_CREDENTIALS=new xi("google-credentials-uid"),xi.FIRST_PARTY=new xi("first-party-uid"),xi.MOCK_USER=new xi("mock-user");let Ni="12.0.0";const Si=new $("@firebase/firestore");function Ei(){return Si.logLevel}function ki(e){if(Si.logLevel<=K.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Ci);Si.debug("Firestore (".concat(Ni,"): ").concat(e),...s)}}function _i(e){if(Si.logLevel<=K.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Ci);Si.error("Firestore (".concat(Ni,"): ").concat(e),...s)}}function Ti(e){if(Si.logLevel<=K.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const s=n.map(Ci);Si.warn("Firestore (".concat(Ni,"): ").concat(e),...s)}}function Ci(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function Ii(e,t,n){let r="Unexpected state";"string"==typeof t?r=t:n=t,ji(e,r,n)}function ji(e,t,n){let r="FIRESTORE (".concat(Ni,") INTERNAL ASSERTION FAILED: ").concat(t," (ID: ").concat(e.toString(16),")");if(void 0!==n)try{r+=" CONTEXT: "+JSON.stringify(n)}catch(e){r+=" CONTEXT: "+n}throw _i(r),new Error(r)}function Ai(e,t,n,r){let s="Unexpected state";"string"==typeof n?s=n:r=n,e||ji(t,s,r)}function Pi(e,t){return e}const Ri={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Di extends A{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class Oi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Li{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class Mi{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(xi.UNAUTHENTICATED))}shutdown(){}}class Fi{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Ui{constructor(e){this.t=e,this.currentUser=xi.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ai(void 0===this.o,42304);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let s=new Oi;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Oi,e.enqueueRetryable(()=>r(this.currentUser))};const i=()=>{const t=s;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{ki("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),i())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(ki("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Oi)}},0),i()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(ki("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(Ai("string"==typeof t.accessToken,31837,{l:t}),new Li(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ai(null===e||"string"==typeof e,2055,{h:e}),new xi(e)}}class Vi{constructor(e,t,n){this.P=e,this.T=t,this.I=n,this.type="FirstParty",this.user=xi.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class zi{constructor(e,t,n){this.P=e,this.T=t,this.I=n}getToken(){return Promise.resolve(new Vi(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable(()=>t(xi.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class qi{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Bi{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Ze(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ai(void 0===this.o,3512);const n=e=>{null!=e.error&&ki("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.m;return this.m=e.token,ki("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{ki("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.V.getImmediate({optional:!0});e?r(e):ki("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new qi(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(Ai("string"==typeof e.token,44558,{tokenResult:e}),this.m=e.token,new qi(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}function Hi(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Gi{static newId(){const e=62*Math.floor(256/62);let t="";for(;t.length<20;){const n=Hi(40);for(let r=0;r<n.length;++r)t.length<20&&n[r]<e&&(t+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(n[r]%62))}return t}}function Wi(e,t){return e<t?-1:e>t?1:0}function Ki(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.charAt(r),s=t.charAt(r);if(n!==s)return Xi(n)===Xi(s)?Wi(n,s):Xi(n)?1:-1}return Wi(e.length,t.length)}const Qi=55296,Yi=57343;function Xi(e){const t=e.charCodeAt(0);return t>=Qi&&t<=Yi}function Ji(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}const $i="__name__";class Zi{constructor(e,t,n){void 0===t?t=0:t>e.length&&Ii(637,{offset:t,range:e.length}),void 0===n?n=e.length-t:n>e.length-t&&Ii(1746,{length:n,range:e.length-t}),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===Zi.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Zi?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=Zi.compareSegments(e.get(r),t.get(r));if(0!==n)return n}return Wi(e.length,t.length)}static compareSegments(e,t){const n=Zi.isNumericId(e),r=Zi.isNumericId(t);return n&&!r?-1:!n&&r?1:n&&r?Zi.extractNumericId(e).compare(Zi.extractNumericId(t)):Ki(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ii.fromString(e.substring(4,e.length-2))}}class ea extends Zi{construct(e,t,n){return new ea(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n){if(s.indexOf("//")>=0)throw new Di(Ri.INVALID_ARGUMENT,"Invalid segment (".concat(s,"). Paths must not contain // in them."));e.push(...s.split("/").filter(e=>e.length>0))}return new ea(e)}static emptyPath(){return new ea([])}}const ta=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class na extends Zi{construct(e,t,n){return new na(e,t,n)}static isValidIdentifier(e){return ta.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),na.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&this.get(0)===$i}static keyField(){return new na([$i])}static fromServerFormat(e){const t=[];let n="",r=0;const s=()=>{if(0===n.length)throw new Di(Ri.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let i=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new Di(Ri.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new Di(Ri.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(i=!i,r++):"."!==t||i?(n+=t,r++):(s(),r++)}if(s(),i)throw new Di(Ri.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new na(t)}static emptyPath(){return new na([])}}class ra{constructor(e){this.path=e}static fromPath(e){return new ra(ea.fromString(e))}static fromName(e){return new ra(ea.fromString(e).popFirst(5))}static empty(){return new ra(ea.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===ea.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return ea.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ra(new ea(e.slice()))}}function sa(e,t,n){if(!n)throw new Di(Ri.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function ia(e){if(!ra.isDocumentKey(e))throw new Di(Ri.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function aa(e){if(ra.isDocumentKey(e))throw new Di(Ri.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function oa(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}function la(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":Ii(12329,{type:typeof e})}function ca(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Di(Ri.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=la(e);throw new Di(Ri.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function ua(e,t){const n={typeString:e};return t&&(n.value=t),n}function da(e,t){if(!oa(e))throw new Di(Ri.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const s=t[r].typeString,i="value"in t[r]?{value:t[r].value}:void 0;if(!(r in e)){n="JSON missing required field: '".concat(r,"'");break}const a=e[r];if(s&&typeof a!==s){n="JSON field '".concat(r,"' must be a ").concat(s,".");break}if(void 0!==i&&a!==i.value){n="Expected '".concat(r,"' field to equal '").concat(i.value,"'");break}}if(n)throw new Di(Ri.INVALID_ARGUMENT,n);return!0}const ha=-62135596800,fa=1e6;class ma{static now(){return ma.fromMillis(Date.now())}static fromDate(e){return ma.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor((e-1e3*t)*fa);return new ma(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Di(Ri.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Di(Ri.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<ha)throw new Di(Ri.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Di(Ri.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/fa}_compareTo(e){return this.seconds===e.seconds?Wi(this.nanoseconds,e.nanoseconds):Wi(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:ma._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(da(e,ma._jsonSchema))return new ma(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-ha;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}ma._jsonSchemaVersion="firestore/timestamp/1.0",ma._jsonSchema={type:ua("string",ma._jsonSchemaVersion),seconds:ua("number"),nanoseconds:ua("number")};class pa{static fromTimestamp(e){return new pa(e)}static min(){return new pa(new ma(0,0))}static max(){return new pa(new ma(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}const ga=-1;class ya{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}ya.UNKNOWN_ID=-1;function va(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=pa.fromTimestamp(1e9===r?new ma(n+1,0):new ma(n,r));return new wa(s,ra.empty(),t)}function ba(e){return new wa(e.readTime,e.key,ga)}class wa{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new wa(pa.min(),ra.empty(),ga)}static max(){return new wa(pa.max(),ra.empty(),ga)}}function xa(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ra.comparator(e.documentKey,t.documentKey),0!==n?n:Wi(e.largestBatchId,t.largestBatchId))}const Na="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Sa{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function Ea(e){if(e.code!==Ri.FAILED_PRECONDITION||e.message!==Na)throw e;ki("LocalStore","Unexpectedly lost primary lease")}class ka{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ii(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ka((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ka?t:ka.resolve(t)}catch(e){return ka.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ka.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ka.reject(t)}static resolve(e){return new ka((t,n)=>{t(e)})}static reject(e){return new ka((t,n)=>{n(e)})}static waitFor(e){return new ka((t,n)=>{let r=0,s=0,i=!1;e.forEach(e=>{++r,e.next(()=>{++s,i&&s===r&&t()},e=>n(e))}),i=!0,s===r&&t()})}static or(e){let t=ka.resolve(!1);for(const n of e)t=t.next(e=>e?ka.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new ka((n,r)=>{const s=e.length,i=new Array(s);let a=0;for(let o=0;o<s;o++){const l=o;t(e[l]).next(e=>{i[l]=e,++a,a===s&&n(i)},e=>r(e))}})}static doWhile(e,t){return new ka((n,r)=>{const s=()=>{!0===e()?t().next(()=>{s()},r):n()};s()})}}function _a(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Ta(e){return"IndexedDbTransactionError"===e.name}class Ca{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ae(e),this.ue=e=>t.writeSequenceNumber(e))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Ca.ce=-1;const Ia=-1;function ja(e){return null==e}function Aa(e){return 0===e&&1/e==-1/0}function Pa(e){return"number"==typeof e&&Number.isInteger(e)&&!Aa(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}const Ra="\x01";function Da(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=La(t)),t=Oa(e.get(n),t);return La(t)}function Oa(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const t=e.charAt(s);switch(t){case"\0":n+="\x01\x10";break;case Ra:n+="\x01\x11";break;default:n+=t}}return n}function La(e){return e+Ra+"\x01"}const Ma="remoteDocuments",Fa="owner",Ua="mutationQueues",Va="mutations";const za="documentMutations",qa="remoteDocumentsV14",Ba="remoteDocumentGlobal",Ha="targets",Ga="targetDocuments",Wa="targetGlobal",Ka="collectionParents",Qa="clientMetadata",Ya="bundles",Xa="namedQueries",Ja="indexConfiguration",$a="indexState",Za="indexEntries",eo="documentOverlays",to="globals",no=[Ua,Va,za,Ma,Ha,Fa,Wa,Ga,Qa,Ba,Ka,Ya,Xa],ro=[Ua,Va,za,qa,Ha,Fa,Wa,Ga,Qa,Ba,Ka,Ya,Xa,eo],so=ro,io=[...so,Ja,$a,Za];function ao(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function oo(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function lo(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class co{constructor(e,t){this.comparator=e,this.root=t||ho.EMPTY}insert(e,t){return new co(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ho.BLACK,null,null))}remove(e){return new co(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ho.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new uo(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new uo(this.root,e,this.comparator,!1)}getReverseIterator(){return new uo(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new uo(this.root,e,this.comparator,!0)}}class uo{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?n(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ho{constructor(e,t,n,r,s){this.key=e,this.value=t,this.color=null!=n?n:ho.RED,this.left=null!=r?r:ho.EMPTY,this.right=null!=s?s:ho.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,s){return new ho(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=s?s:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const s=n(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===s?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return ho.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return ho.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ho.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ho.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ii(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ii(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ii(27949);return e+(this.isRed()?0:1)}}ho.EMPTY=null,ho.RED=!0,ho.BLACK=!1,ho.EMPTY=new class{constructor(){this.size=0}get key(){throw Ii(57766)}get value(){throw Ii(16141)}get color(){throw Ii(16727)}get left(){throw Ii(29726)}get right(){throw Ii(36894)}copy(e,t,n,r,s){return this}insert(e,t,n){return new ho(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fo{constructor(e){this.comparator=e,this.data=new co(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new mo(this.data.getIterator())}getIteratorFrom(e){return new mo(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof fo))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new fo(this.comparator);return t.data=e,t}}class mo{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}class po{constructor(e){this.fields=e,e.sort(na.comparator)}static empty(){return new po([])}unionWith(e){let t=new fo(na.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new po(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Ji(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class go extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class yo{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new go("Invalid base64 string: "+e):e}}(e);return new yo(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new yo(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Wi(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yo.EMPTY_BYTE_STRING=new yo("");const vo=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function bo(e){if(Ai(!!e,39018),"string"==typeof e){let t=0;const n=vo.exec(e);if(Ai(!!n,46558,{timestamp:e}),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:wo(e.seconds),nanos:wo(e.nanos)}}function wo(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function xo(e){return"string"==typeof e?yo.fromBase64String(e):yo.fromUint8Array(e)}const No="server_timestamp",So="__type__",Eo="__previous_value__",ko="__local_write_time__";function _o(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[So])||void 0===t?void 0:t.stringValue)===No}function To(e){const t=e.mapValue.fields[Eo];return _o(t)?To(t):t}function Co(e){const t=bo(e.mapValue.fields[ko].timestampValue);return new ma(t.seconds,t.nanos)}class Io{constructor(e,t,n,r,s,i,a,o,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=i,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l,this.isUsingEmulator=c}}const jo="(default)";class Ao{constructor(e,t){this.projectId=e,this.database=t||jo}static empty(){return new Ao("","")}get isDefaultDatabase(){return this.database===jo}isEqual(e){return e instanceof Ao&&e.projectId===this.projectId&&e.database===this.database}}const Po="__type__",Ro="__max__",Do={mapValue:{fields:{__type__:{stringValue:Ro}}}},Oo="__vector__",Lo="value";function Mo(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?_o(e)?4:el(e)?9007199254740991:$o(e)?10:11:Ii(28295,{value:e})}function Fo(e,t){if(e===t)return!0;const n=Mo(e);if(n!==Mo(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Co(e).isEqual(Co(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=bo(e.timestampValue),r=bo(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return xo(e.bytesValue).isEqual(xo(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return wo(e.geoPointValue.latitude)===wo(t.geoPointValue.latitude)&&wo(e.geoPointValue.longitude)===wo(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return wo(e.integerValue)===wo(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=wo(e.doubleValue),r=wo(t.doubleValue);return n===r?Aa(n)===Aa(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Ji(e.arrayValue.values||[],t.arrayValue.values||[],Fo);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ao(n)!==ao(r))return!1;for(const s in n)if(n.hasOwnProperty(s)&&(void 0===r[s]||!Fo(n[s],r[s])))return!1;return!0}(e,t);default:return Ii(52216,{left:e})}}function Uo(e,t){return void 0!==(e.values||[]).find(e=>Fo(e,t))}function Vo(e,t){if(e===t)return 0;const n=Mo(e),r=Mo(t);if(n!==r)return Wi(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Wi(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=wo(e.integerValue||e.doubleValue),r=wo(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return zo(e.timestampValue,t.timestampValue);case 4:return zo(Co(e),Co(t));case 5:return Ki(e.stringValue,t.stringValue);case 6:return function(e,t){const n=xo(e),r=xo(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let s=0;s<n.length&&s<r.length;s++){const e=Wi(n[s],r[s]);if(0!==e)return e}return Wi(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Wi(wo(e.latitude),wo(t.latitude));return 0!==n?n:Wi(wo(e.longitude),wo(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return qo(e.arrayValue,t.arrayValue);case 10:return function(e,t,n,r,s,i){const a=e.fields||{},o=t.fields||{},l=null===(n=a[Lo])||void 0===n?void 0:n.arrayValue,c=null===(r=o[Lo])||void 0===r?void 0:r.arrayValue,u=Wi((null===l||void 0===l||null===(s=l.values)||void 0===s?void 0:s.length)||0,(null===c||void 0===c||null===(i=c.values)||void 0===i?void 0:i.length)||0);return 0!==u?u:qo(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Do.mapValue&&t===Do.mapValue)return 0;if(e===Do.mapValue)return 1;if(t===Do.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),s=t.fields||{},i=Object.keys(s);r.sort(),i.sort();for(let a=0;a<r.length&&a<i.length;++a){const e=Ki(r[a],i[a]);if(0!==e)return e;const t=Vo(n[r[a]],s[i[a]]);if(0!==t)return t}return Wi(r.length,i.length)}(e.mapValue,t.mapValue);default:throw Ii(23264,{he:n})}}function zo(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Wi(e,t);const n=bo(e),r=bo(t),s=Wi(n.seconds,r.seconds);return 0!==s?s:Wi(n.nanos,r.nanos)}function qo(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const e=Vo(n[s],r[s]);if(e)return e}return Wi(n.length,r.length)}function Bo(e){return Ho(e)}function Ho(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=bo(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return xo(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ra.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ho(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const s of t)r?r=!1:n+=",",n+="".concat(s,":").concat(Ho(e.fields[s]));return n+"}"}(e.mapValue):Ii(61005,{value:e})}function Go(e){switch(Mo(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=To(e);return t?16+Go(t):16;case 5:return 2*e.stringValue.length;case 6:return xo(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Go(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return oo(e.fields,(e,n)=>{t+=e.length+Go(n)}),t}(e.mapValue);default:throw Ii(13486,{value:e})}}function Wo(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Ko(e){return!!e&&"integerValue"in e}function Qo(e){return!!e&&"arrayValue"in e}function Yo(e){return!!e&&"nullValue"in e}function Xo(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Jo(e){return!!e&&"mapValue"in e}function $o(e){var t,n;return(null===(t=((null===e||void 0===e||null===(n=e.mapValue)||void 0===n?void 0:n.fields)||{})[Po])||void 0===t?void 0:t.stringValue)===Oo}function Zo(e){if(e.geoPointValue)return{geoPointValue:u({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:u({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return oo(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=Zo(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=Zo(e.arrayValue.values[n]);return t}return u({},e)}function el(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===Ro}class tl{constructor(e){this.value=e}static empty(){return new tl({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Jo(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Zo(t)}setAll(e){let t=na.emptyPath(),n={},r=[];e.forEach((e,s)=>{if(!t.isImmediateParentOf(s)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=s.popLast()}e?n[s.lastSegment()]=Zo(e):r.push(s.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,n,r)}delete(e){const t=this.field(e.popLast());Jo(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fo(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Jo(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){oo(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new tl(Zo(this.value))}}function nl(e){const t=[];return oo(e.fields,(e,n)=>{const r=new na([e]);if(Jo(n)){const e=nl(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new po(t)}class rl{constructor(e,t,n,r,s,i,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=s,this.data=i,this.documentState=a}static newInvalidDocument(e){return new rl(e,0,pa.min(),pa.min(),pa.min(),tl.empty(),0)}static newFoundDocument(e,t,n,r){return new rl(e,1,t,pa.min(),n,r,0)}static newNoDocument(e,t){return new rl(e,2,t,pa.min(),pa.min(),tl.empty(),0)}static newUnknownDocument(e,t){return new rl(e,3,t,pa.min(),pa.min(),tl.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(pa.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=tl.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=tl.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=pa.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof rl&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new rl(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class sl{constructor(e,t){this.position=e,this.inclusive=t}}function il(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(r=i.field.isKeyField()?ra.comparator(ra.fromName(a.referenceValue),n.key):Vo(a,n.data.field(i.field)),"desc"===i.dir&&(r*=-1),0!==r)break}return r}function al(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Fo(e.position[n],t.position[n]))return!1;return!0}class ol{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function ll(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class cl{}class ul extends cl{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new vl(e,t,n):"array-contains"===t?new Nl(e,n):"in"===t?new Sl(e,n):"not-in"===t?new El(e,n):"array-contains-any"===t?new kl(e,n):new ul(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new bl(e,n):new wl(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&void 0===t.nullValue&&this.matchesComparison(Vo(t,this.value)):null!==t&&Mo(this.value)===Mo(t)&&this.matchesComparison(Vo(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ii(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class dl extends cl{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new dl(e,t)}matches(e){return hl(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.Pe||(this.Pe=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hl(e){return"and"===e.op}function fl(e){return ml(e)&&hl(e)}function ml(e){for(const t of e.filters)if(t instanceof dl)return!1;return!0}function pl(e){if(e instanceof ul)return e.field.canonicalString()+e.op.toString()+Bo(e.value);if(fl(e))return e.filters.map(e=>pl(e)).join(",");{const t=e.filters.map(e=>pl(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function gl(e,t){return e instanceof ul?function(e,t){return t instanceof ul&&e.op===t.op&&e.field.isEqual(t.field)&&Fo(e.value,t.value)}(e,t):e instanceof dl?function(e,t){return t instanceof dl&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&gl(n,t.filters[r]),!0)}(e,t):void Ii(19439)}function yl(e){return e instanceof ul?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(Bo(e.value))}(e):e instanceof dl?function(e){return e.op.toString()+" {"+e.getFilters().map(yl).join(" ,")+"}"}(e):"Filter"}class vl extends ul{constructor(e,t,n){super(e,t,n),this.key=ra.fromName(n.referenceValue)}matches(e){const t=ra.comparator(e.key,this.key);return this.matchesComparison(t)}}class bl extends ul{constructor(e,t){super(e,"in",t),this.keys=xl("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class wl extends ul{constructor(e,t){super(e,"not-in",t),this.keys=xl("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function xl(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ra.fromName(e.referenceValue))}class Nl extends ul{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Qo(t)&&Uo(t.arrayValue,this.value)}}class Sl extends ul{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Uo(this.value.arrayValue,t)}}class El extends ul{constructor(e,t){super(e,"not-in",t)}matches(e){if(Uo(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&void 0===t.nullValue&&!Uo(this.value.arrayValue,t)}}class kl extends ul{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Qo(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>Uo(this.value.arrayValue,e))}}class _l{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=i,this.endAt=a,this.Te=null}}function Tl(e){return new _l(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Cl(e){const t=Pi(e);if(null===t.Te){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>pl(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),ja(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>Bo(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>Bo(e)).join(",")),t.Te=e}return t.Te}function Il(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!ll(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!gl(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!al(e.startAt,t.startAt)&&al(e.endAt,t.endAt)}function jl(e){return ra.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}class Al{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=i,this.startAt=a,this.endAt=o,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function Pl(e,t,n,r,s,i,a,o){return new Al(e,t,n,r,s,i,a,o)}function Rl(e){return new Al(e)}function Dl(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Ol(e){return null!==e.collectionGroup}function Ll(e){const t=Pi(e);if(null===t.Ie){t.Ie=[];const e=new Set;for(const s of t.explicitOrderBy)t.Ie.push(s),e.add(s.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new fo(na.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.Ie.push(new ol(r,n))}),e.has(na.keyField().canonicalString())||t.Ie.push(new ol(na.keyField(),n))}return t.Ie}function Ml(e){const t=Pi(e);return t.Ee||(t.Ee=Fl(t,Ll(e))),t.Ee}function Fl(e,t){if("F"===e.limitType)return Tl(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new ol(e.field,t)});const n=e.endAt?new sl(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new sl(e.startAt.position,e.startAt.inclusive):null;return Tl(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Ul(e,t){const n=e.filters.concat([t]);return new Al(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Vl(e,t,n){return new Al(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function zl(e,t){return Il(Ml(e),Ml(t))&&e.limitType===t.limitType}function ql(e){return"".concat(Cl(Ml(e)),"|lt:").concat(e.limitType)}function Bl(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>yl(e)).join(", "),"]")),ja(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>Bo(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>Bo(e)).join(",")),"Target(".concat(t,")")}(Ml(e)),"; limitType=").concat(e.limitType,")")}function Hl(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ra.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Ll(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=il(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Ll(e),t))&&!(e.endAt&&!function(e,t,n){const r=il(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Ll(e),t))}(e,t)}function Gl(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Wl(e){return(t,n)=>{let r=!1;for(const s of Ll(e)){const e=Kl(s,t,n);if(0!==e)return e;r=r||s.field.isKeyField()}return 0}}function Kl(e,t,n){const r=e.field.isKeyField()?ra.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),s=n.data.field(e);return null!==r&&null!==s?Vo(r,s):Ii(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return Ii(19790,{direction:e.dir})}}class Ql{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,s]of n)if(this.equalsFn(r,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){oo(this.inner,(t,n)=>{for(const[r,s]of n)e(r,s)})}isEmpty(){return lo(this.inner)}size(){return this.innerSize}}const Yl=new co(ra.comparator);function Xl(){return Yl}const Jl=new co(ra.comparator);function $l(){let e=Jl;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.insert(s.key,s);return e}function Zl(e){let t=Jl;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function ec(){return nc()}function tc(){return nc()}function nc(){return new Ql(e=>e.toString(),(e,t)=>e.isEqual(t))}const rc=new co(ra.comparator),sc=new fo(ra.comparator);function ic(){let e=sc;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const s of n)e=e.add(s);return e}const ac=new fo(Wi);function oc(){return ac}function lc(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Aa(t)?"-0":t}}function cc(e){return{integerValue:""+e}}function uc(e,t){return Pa(t)?cc(t):lc(e,t)}class dc{constructor(){this._=void 0}}function hc(e,t,n){return e instanceof pc?function(e,t){const n={fields:{[So]:{stringValue:No},[ko]:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&_o(t)&&(t=To(t)),t&&(n.fields[Eo]=t),{mapValue:n}}(n,t):e instanceof gc?yc(e,t):e instanceof vc?bc(e,t):function(e,t){const n=mc(e,t),r=xc(n)+xc(e.Ae);return Ko(n)&&Ko(e.Ae)?cc(r):lc(e.serializer,r)}(e,t)}function fc(e,t,n){return e instanceof gc?yc(e,t):e instanceof vc?bc(e,t):n}function mc(e,t){return e instanceof wc?function(e){return Ko(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class pc extends dc{}class gc extends dc{constructor(e){super(),this.elements=e}}function yc(e,t){const n=Nc(t);for(const r of e.elements)n.some(e=>Fo(e,r))||n.push(r);return{arrayValue:{values:n}}}class vc extends dc{constructor(e){super(),this.elements=e}}function bc(e,t){let n=Nc(t);for(const r of e.elements)n=n.filter(e=>!Fo(e,r));return{arrayValue:{values:n}}}class wc extends dc{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function xc(e){return wo(e.integerValue||e.doubleValue)}function Nc(e){return Qo(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Sc{constructor(e,t){this.field=e,this.transform=t}}class Ec{constructor(e,t){this.version=e,this.transformResults=t}}class kc{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kc}static exists(e){return new kc(void 0,e)}static updateTime(e){return new kc(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function _c(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class Tc{}function Cc(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new Fc(e.key,kc.none()):new Rc(e.key,e.data,kc.none());{const n=e.data,r=tl.empty();let s=new fo(na.comparator);for(let e of t.fields)if(!s.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),s=s.add(e)}return new Dc(e.key,r,new po(s.toArray()),kc.none())}}function Ic(e,t,n){e instanceof Rc?function(e,t,n){const r=e.value.clone(),s=Lc(e.fieldTransforms,t,n.transformResults);r.setAll(s),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Dc?function(e,t,n){if(!_c(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Lc(e.fieldTransforms,t,n.transformResults),s=t.data;s.setAll(Oc(e)),s.setAll(r),t.convertToFoundDocument(n.version,s).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function jc(e,t,n,r){return e instanceof Rc?function(e,t,n,r){if(!_c(e.precondition,t))return n;const s=e.value.clone(),i=Mc(e.fieldTransforms,r,t);return s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null}(e,t,n,r):e instanceof Dc?function(e,t,n,r){if(!_c(e.precondition,t))return n;const s=Mc(e.fieldTransforms,r,t),i=t.data;return i.setAll(Oc(e)),i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return _c(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function Ac(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),s=mc(r.transform,e||null);null!=s&&(null===n&&(n=tl.empty()),n.set(r.field,s))}return n||null}function Pc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Ji(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof gc&&t instanceof gc||e instanceof vc&&t instanceof vc?Ji(e.elements,t.elements,Fo):e instanceof wc&&t instanceof wc?Fo(e.Ae,t.Ae):e instanceof pc&&t instanceof pc}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Rc extends Tc{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Dc extends Tc{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Oc(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Lc(e,t,n){const r=new Map;Ai(e.length===n.length,32656,{Re:n.length,Ve:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,o=t.data.field(i.field);r.set(i.field,fc(a,o,n[s]))}return r}function Mc(e,t,n){const r=new Map;for(const s of e){const e=s.transform,i=n.data.field(s.field);r.set(s.field,hc(e,i,t))}return r}class Fc extends Tc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Uc extends Tc{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Vc{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Ic(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=jc(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=jc(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=tc();return this.mutations.forEach(r=>{const s=e.get(r.key),i=s.overlayedDocument;let a=this.applyToLocalView(i,s.mutatedFields);a=t.has(r.key)?null:a;const o=Cc(i,a);null!==o&&n.set(r.key,o),i.isValidDocument()||i.convertToNoDocument(pa.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),ic())}isEqual(e){return this.batchId===e.batchId&&Ji(this.mutations,e.mutations,(e,t)=>Pc(e,t))&&Ji(this.baseMutations,e.baseMutations,(e,t)=>Pc(e,t))}}class zc{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){Ai(e.mutations.length===n.length,58842,{me:e.mutations.length,fe:n.length});let r=rc;const s=e.mutations;for(let i=0;i<s.length;i++)r=r.insert(s[i].key,n[i].version);return new zc(e,t,n,r)}}class qc{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class Bc{constructor(e,t){this.count=e,this.unchangedNames=t}}var Hc,Gc;function Wc(e){switch(e){case Ri.OK:return Ii(64938);case Ri.CANCELLED:case Ri.UNKNOWN:case Ri.DEADLINE_EXCEEDED:case Ri.RESOURCE_EXHAUSTED:case Ri.INTERNAL:case Ri.UNAVAILABLE:case Ri.UNAUTHENTICATED:return!1;case Ri.INVALID_ARGUMENT:case Ri.NOT_FOUND:case Ri.ALREADY_EXISTS:case Ri.PERMISSION_DENIED:case Ri.FAILED_PRECONDITION:case Ri.ABORTED:case Ri.OUT_OF_RANGE:case Ri.UNIMPLEMENTED:case Ri.DATA_LOSS:return!0;default:return Ii(15467,{code:e})}}function Kc(e){if(void 0===e)return _i("GRPC error has no .code"),Ri.UNKNOWN;switch(e){case Hc.OK:return Ri.OK;case Hc.CANCELLED:return Ri.CANCELLED;case Hc.UNKNOWN:return Ri.UNKNOWN;case Hc.DEADLINE_EXCEEDED:return Ri.DEADLINE_EXCEEDED;case Hc.RESOURCE_EXHAUSTED:return Ri.RESOURCE_EXHAUSTED;case Hc.INTERNAL:return Ri.INTERNAL;case Hc.UNAVAILABLE:return Ri.UNAVAILABLE;case Hc.UNAUTHENTICATED:return Ri.UNAUTHENTICATED;case Hc.INVALID_ARGUMENT:return Ri.INVALID_ARGUMENT;case Hc.NOT_FOUND:return Ri.NOT_FOUND;case Hc.ALREADY_EXISTS:return Ri.ALREADY_EXISTS;case Hc.PERMISSION_DENIED:return Ri.PERMISSION_DENIED;case Hc.FAILED_PRECONDITION:return Ri.FAILED_PRECONDITION;case Hc.ABORTED:return Ri.ABORTED;case Hc.OUT_OF_RANGE:return Ri.OUT_OF_RANGE;case Hc.UNIMPLEMENTED:return Ri.UNIMPLEMENTED;case Hc.DATA_LOSS:return Ri.DATA_LOSS;default:return Ii(39323,{code:e})}}(Gc=Hc||(Hc={}))[Gc.OK=0]="OK",Gc[Gc.CANCELLED=1]="CANCELLED",Gc[Gc.UNKNOWN=2]="UNKNOWN",Gc[Gc.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gc[Gc.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gc[Gc.NOT_FOUND=5]="NOT_FOUND",Gc[Gc.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gc[Gc.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gc[Gc.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gc[Gc.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gc[Gc.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gc[Gc.ABORTED=10]="ABORTED",Gc[Gc.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gc[Gc.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gc[Gc.INTERNAL=13]="INTERNAL",Gc[Gc.UNAVAILABLE=14]="UNAVAILABLE",Gc[Gc.DATA_LOSS=15]="DATA_LOSS";let Qc=null;function Yc(){return new TextEncoder}const Xc=new ii([4294967295,4294967295],0);function Jc(e){const t=Yc().encode(e),n=new ai;return n.update(t),new Uint8Array(n.digest())}function $c(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new ii([n,r],0),new ii([s,i],0)]}class Zc{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new eu("Invalid padding: ".concat(t));if(n<0)throw new eu("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new eu("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new eu("Invalid padding when bitmap length is 0: ".concat(t));this.ge=8*e.length-t,this.pe=ii.fromNumber(this.ge)}ye(e,t,n){let r=e.add(t.multiply(ii.fromNumber(n)));return 1===r.compare(Xc)&&(r=new ii([r.getBits(0),r.getBits(1)],0)),r.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.ge)return!1;const t=Jc(e),[n,r]=$c(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);if(!this.we(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),i=new Zc(s,r,t);return n.forEach(e=>i.insert(e)),i}insert(e){if(0===this.ge)return;const t=Jc(e),[n,r]=$c(t);for(let s=0;s<this.hashCount;s++){const e=this.ye(n,r,s);this.Se(e)}}Se(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class eu extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class tu{constructor(e,t,n,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,nu.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new tu(pa.min(),r,new co(Wi),Xl(),ic())}}class nu{constructor(e,t,n,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new nu(n,t,ic(),ic(),ic())}}class ru{constructor(e,t,n,r){this.be=e,this.removedTargetIds=t,this.key=n,this.De=r}}class su{constructor(e,t){this.targetId=e,this.Ce=t}}class iu{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:yo.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class au{constructor(){this.ve=0,this.Fe=cu(),this.Me=yo.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return 0!==this.ve}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ic(),t=ic(),n=ic();return this.Fe.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:Ii(38017,{changeType:s})}}),new nu(this.Me,this.xe,e,t,n)}qe(){this.Oe=!1,this.Fe=cu()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ai(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class ou{constructor(e){this.Ge=e,this.ze=new Map,this.je=Xl(),this.Je=lu(),this.He=lu(),this.Ye=new co(Wi)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,t=>{const n=this.nt(t);switch(e.state){case 0:this.rt(t)&&n.Le(e.resumeToken);break;case 1:n.Ke(),n.Ne||n.qe(),n.Le(e.resumeToken);break;case 2:n.Ke(),n.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(n.We(),n.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),n.Le(e.resumeToken));break;default:Ii(56790,{state:e.state})}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach((e,n)=>{this.rt(n)&&t(n)})}st(e){const t=e.targetId,n=e.Ce.count,r=this.ot(t);if(r){const i=r.target;if(jl(i))if(0===n){const e=new ra(i.path);this.et(t,e,rl.newNoDocument(e,pa.min()))}else Ai(1===n,20013,{expectedCount:n});else{const r=this._t(t);if(r!==n){var s;const n=this.ut(e),i=n?this.ct(n,e,r):1;if(0!==i){this.it(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,e)}null===(s=Qc)||void 0===s||s.lt(function(e,t,n,r,s,i,a,o,l,c){const u={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(u.bloomFilter={applied:0===s,hashCount:null!==(i=null===d||void 0===d?void 0:d.hashCount)&&void 0!==i?i:0,bitmapLength:null!==(a=null===d||void 0===d||null===(o=d.bits)||void 0===o||null===(o=o.bitmap)||void 0===o?void 0:o.length)&&void 0!==a?a:0,padding:null!==(l=null===d||void 0===d||null===(c=d.bits)||void 0===c?void 0:c.padding)&&void 0!==l?l:0,mightContain:e=>{var t;return null!==(t=null===r||void 0===r?void 0:r.mightContain(e))&&void 0!==t&&t}}),u}(r,e.Ce,this.Ge.ht(),n,i))}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=t;let i,a;try{i=xo(n).toUint8Array()}catch(e){if(e instanceof go)return Ti("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new Zc(i,r,s)}catch(e){return Ti(e instanceof eu?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.ge?null:a}ct(e,t,n){return t.Ce.count===n-this.Pt(e,t.targetId)?0:2}Pt(e,t){const n=this.Ge.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const s=this.Ge.ht(),i="projects/".concat(s.projectId,"/databases/").concat(s.database,"/documents/").concat(n.path.canonicalString());e.mightContain(i)||(this.et(t,n,null),r++)}),r}Tt(e){const t=new Map;this.ze.forEach((n,r)=>{const s=this.ot(r);if(s){if(n.current&&jl(s.target)){const t=new ra(s.target.path);this.It(t).has(r)||this.Et(r,t)||this.et(r,t,rl.newNoDocument(t,e))}n.Be&&(t.set(r,n.ke()),n.qe())}});let n=ic();this.He.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.ot(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.je.forEach((t,n)=>n.setReadTime(e));const r=new tu(e,t,this.Ye,this.je,n);return this.je=Xl(),this.Je=lu(),this.He=lu(),this.Ye=new co(Wi),r}Xe(e,t){if(!this.rt(e))return;const n=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,n),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,n){if(!this.rt(e))return;const r=this.nt(e);this.Et(e,t)?r.Qe(t,1):r.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),n&&(this.je=this.je.insert(t,n))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new au,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new fo(Wi),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new fo(Wi),this.Je=this.Je.insert(e,t)),t}rt(e){const t=null!==this.ot(e);return t||ki("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new au),this.Ge.getRemoteKeysForTarget(e).forEach(t=>{this.et(e,t,null)})}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function lu(){return new co(ra.comparator)}function cu(){return new co(ra.comparator)}const uu={asc:"ASCENDING",desc:"DESCENDING"},du={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},hu={and:"AND",or:"OR"};class fu{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function mu(e,t){return e.useProto3Json||ja(t)?t:{value:t}}function pu(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function gu(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function yu(e,t){return pu(e,t.toTimestamp())}function vu(e){return Ai(!!e,49232),pa.fromTimestamp(function(e){const t=bo(e);return new ma(t.seconds,t.nanos)}(e))}function bu(e,t){return wu(e,t).canonicalString()}function wu(e,t){const n=function(e){return new ea(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function xu(e){const t=ea.fromString(e);return Ai(zu(t),10190,{key:t.toString()}),t}function Nu(e,t){return bu(e.databaseId,t.path)}function Su(e,t){const n=xu(t);if(n.get(1)!==e.databaseId.projectId)throw new Di(Ri.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Di(Ri.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ra(Tu(n))}function Eu(e,t){return bu(e.databaseId,t)}function ku(e){const t=xu(e);return 4===t.length?ea.emptyPath():Tu(t)}function _u(e){return new ea(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Tu(e){return Ai(e.length>4&&"documents"===e.get(4),29091,{key:e.toString()}),e.popFirst(5)}function Cu(e,t,n){return{name:Nu(e,t),fields:n.value.mapValue.fields}}function Iu(e,t){let n;if(t instanceof Rc)n={update:Cu(e,t.key,t.value)};else if(t instanceof Fc)n={delete:Nu(e,t.key)};else if(t instanceof Dc)n={update:Cu(e,t.key,t.data),updateMask:Vu(t.fieldMask)};else{if(!(t instanceof Uc))return Ii(16599,{Vt:t.type});n={verify:Nu(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof pc)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof gc)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof vc)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof wc)return{fieldPath:t.field.canonicalString(),increment:n.Ae};throw Ii(20930,{transform:t.transform})}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:yu(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:Ii(27497)}(e,t.precondition)),n}function ju(e,t){return{documents:[Eu(e,t.path)]}}function Au(e,t){const n={structuredQuery:{}},r=t.path;let s;null!==t.collectionGroup?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Eu(e,s);const i=function(e){if(0!==e.length)return Uu(dl.create(e,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:Mu(e.field),direction:Du(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=mu(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ft:n,parent:s}}function Pu(e){let t=ku(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Ai(1===r,65062);const e=n.from[0];e.allDescendants?s=e.collectionId:t=t.child(e.collectionId)}let i=[];n.where&&(i=function(e){const t=Ru(e);return t instanceof dl&&fl(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new ol(Fu(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,ja(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new sl(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new sl(n,t)}(n.endAt)),Pl(t,s,a,i,o,"F",l,c)}function Ru(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Fu(e.unaryFilter.field);return ul.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=Fu(e.unaryFilter.field);return ul.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Fu(e.unaryFilter.field);return ul.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Fu(e.unaryFilter.field);return ul.create(s,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ii(61313);default:return Ii(60726)}}(e):void 0!==e.fieldFilter?function(e){return ul.create(Fu(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ii(58110);default:return Ii(50506)}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return dl.create(e.compositeFilter.filters.map(e=>Ru(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return Ii(1026)}}(e.compositeFilter.op))}(e):Ii(30097,{filter:e})}function Du(e){return uu[e]}function Ou(e){return du[e]}function Lu(e){return hu[e]}function Mu(e){return{fieldPath:e.canonicalString()}}function Fu(e){return na.fromServerFormat(e.fieldPath)}function Uu(e){return e instanceof ul?function(e){if("=="===e.op){if(Xo(e.value))return{unaryFilter:{field:Mu(e.field),op:"IS_NAN"}};if(Yo(e.value))return{unaryFilter:{field:Mu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(Xo(e.value))return{unaryFilter:{field:Mu(e.field),op:"IS_NOT_NAN"}};if(Yo(e.value))return{unaryFilter:{field:Mu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mu(e.field),op:Ou(e.op),value:e.value}}}(e):e instanceof dl?function(e){const t=e.getFilters().map(e=>Uu(e));return 1===t.length?t[0]:{compositeFilter:{op:Lu(e.op),filters:t}}}(e):Ii(54877,{filter:e})}function Vu(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function zu(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class qu{constructor(e,t,n,r){let s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:pa.min(),i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:pa.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:yo.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=i,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new qu(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new qu(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qu(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class Bu{constructor(e){this.yt=e}}function Hu(e){const t=Pu({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Vl(t,t.limit,"L"):t}class Gu{constructor(){}Dt(e,t){this.Ct(e,t),t.vt()}Ct(e,t){if("nullValue"in e)this.Ft(t,5);else if("booleanValue"in e)this.Ft(t,10),t.Mt(e.booleanValue?1:0);else if("integerValue"in e)this.Ft(t,15),t.Mt(wo(e.integerValue));else if("doubleValue"in e){const n=wo(e.doubleValue);isNaN(n)?this.Ft(t,13):(this.Ft(t,15),Aa(n)?t.Mt(0):t.Mt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Ft(t,20),"string"==typeof n&&(n=bo(n)),t.xt("".concat(n.seconds||"")),t.Mt(n.nanos||0)}else if("stringValue"in e)this.Ot(e.stringValue,t),this.Nt(t);else if("bytesValue"in e)this.Ft(t,30),t.Bt(xo(e.bytesValue)),this.Nt(t);else if("referenceValue"in e)this.Lt(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Ft(t,45),t.Mt(n.latitude||0),t.Mt(n.longitude||0)}else"mapValue"in e?el(e)?this.Ft(t,Number.MAX_SAFE_INTEGER):$o(e)?this.kt(e.mapValue,t):(this.qt(e.mapValue,t),this.Nt(t)):"arrayValue"in e?(this.Qt(e.arrayValue,t),this.Nt(t)):Ii(19022,{$t:e})}Ot(e,t){this.Ft(t,25),this.Ut(e,t)}Ut(e,t){t.xt(e)}qt(e,t){const n=e.fields||{};this.Ft(t,55);for(const r of Object.keys(n))this.Ot(r,t),this.Ct(n[r],t)}kt(e,t){var n;const r=e.fields||{};this.Ft(t,53);const s=Lo,i=(null===(n=r[s].arrayValue)||void 0===n||null===(n=n.values)||void 0===n?void 0:n.length)||0;this.Ft(t,15),t.Mt(wo(i)),this.Ot(s,t),this.Ct(r[s],t)}Qt(e,t){const n=e.values||[];this.Ft(t,50);for(const r of n)this.Ct(r,t)}Lt(e,t){this.Ft(t,37),ra.fromName(e).path.forEach(e=>{this.Ft(t,60),this.Ut(e,t)})}Ft(e,t){e.Mt(t)}Nt(e){e.Mt(2)}}Gu.Kt=new Gu;class Wu{constructor(){this.Cn=new Ku}addToCollectionParentIndex(e,t){return this.Cn.add(t),ka.resolve()}getCollectionParents(e,t){return ka.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return ka.resolve()}deleteFieldIndex(e,t){return ka.resolve()}deleteAllFieldIndexes(e){return ka.resolve()}createTargetIndexes(e,t){return ka.resolve()}getDocumentsMatchingTarget(e,t){return ka.resolve(null)}getIndexType(e,t){return ka.resolve(0)}getFieldIndexes(e,t){return ka.resolve([])}getNextCollectionGroupToUpdate(e){return ka.resolve(null)}getMinOffset(e,t){return ka.resolve(wa.min())}getMinOffsetFromCollectionGroup(e,t){return ka.resolve(wa.min())}updateCollectionGroup(e,t,n){return ka.resolve()}updateIndexEntries(e,t){return ka.resolve()}}class Ku{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new fo(ea.comparator),s=!r.has(n);return this.index[t]=r.add(n),s}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new fo(ea.comparator)).toArray()}}new Uint8Array(0);const Qu={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Yu=41943040;class Xu{static withCacheSize(e){return new Xu(e,Xu.DEFAULT_COLLECTION_PERCENTILE,Xu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}Xu.DEFAULT_COLLECTION_PERCENTILE=10,Xu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xu.DEFAULT=new Xu(Yu,Xu.DEFAULT_COLLECTION_PERCENTILE,Xu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xu.DISABLED=new Xu(-1,0,0);class Ju{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Ju(0)}static cr(){return new Ju(-1)}}const $u="LruGarbageCollector",Zu=1048576;function ed(e,t){let[n,r]=e,[s,i]=t;const a=Wi(n,s);return 0===a?Wi(r,i):a}class td{constructor(e){this.Ir=e,this.buffer=new fo(ed),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();ed(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class nd{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Rr=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return null!==this.Rr}Vr(e){ki($u,"Garbage collection scheduled in ".concat(e,"ms")),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ta(e)?ki($u,"Ignoring IndexedDB error during garbage collection: ",e):await Ea(e)}await this.Vr(3e5)})}}class rd{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return ka.resolve(Ca.ce);const n=new td(t);return this.mr.forEachTarget(e,e=>n.Ar(e.sequenceNumber)).next(()=>this.mr.pr(e,e=>n.Ar(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.mr.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ki("LruGarbageCollector","Garbage collection skipped; disabled"),ka.resolve(Qu)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(ki("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Qu):this.yr(e,t))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let n,r,s,i,a,o,l;const c=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(ki("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,i=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(s=t,o=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(l=Date.now(),Ei()<=K.DEBUG&&ki("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(i-c,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-i)+"ms\n"+"\tRemoved ".concat(s," targets in ")+(o-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(l-o)+"ms\n"+"Total Duration: ".concat(l-c,"ms")),ka.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:e})))}}function sd(e,t){return new rd(e,t)}class id{constructor(){this.changes=new Ql(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,rl.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?ka.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class ad{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class od{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&jc(n.mutation,e,po.empty(),ma.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,ic()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:ic();const r=ec();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=$l();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=ec();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,ic()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let s=Xl();const i=nc(),a=nc();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Dc)?s=s.insert(t.key,t):void 0!==a?(i.set(t.key,a.mutation.getFieldMask()),jc(a.mutation,t,a.mutation.getFieldMask(),ma.now())):i.set(t.key,po.empty())}),this.recalculateAndSaveOverlays(e,s).next(e=>(e.forEach((e,t)=>i.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new ad(t,null!==(n=i.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=nc();let r=new co((e,t)=>e-t),s=ic();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const s of e)s.keys().forEach(e=>{const i=t.get(e);if(null===i)return;let a=n.get(e)||po.empty();a=s.applyToLocalView(i,a),n.set(e,a);const o=(r.get(s.batchId)||ic()).add(e);r=r.insert(s.batchId,o)})}).next(()=>{const i=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=tc();l.forEach(e=>{if(!s.has(e)){const r=Cc(t.get(e),n.get(e));null!==r&&c.set(e,r),s=s.add(e)}}),i.push(this.documentOverlayCache.saveOverlays(e,o,c))}return ka.waitFor(i)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ra.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Ol(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(s=>{const i=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-s.size):ka.resolve(ec());let a=ga,o=s;return i.next(t=>ka.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),s.get(t)?ka.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,s)).next(()=>this.computeViews(e,o,t,ic())).next(e=>({batchId:a,changes:Zl(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ra(t)).next(e=>{let t=$l();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const s=t.collectionGroup;let i=$l();return this.indexManager.getCollectionParents(e,s).next(a=>ka.forEach(a,a=>{const o=function(e,t){return new Al(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(s));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{i=i.insert(e,t)})})}).next(()=>i))}getDocumentsMatchingCollectionQuery(e,t,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(i=>(s=i,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,s,r))).next(e=>{s.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,rl.newInvalidDocument(r)))});let n=$l();return e.forEach((e,r)=>{const i=s.get(e);void 0!==i&&jc(i.mutation,r,po.empty(),ma.now()),Hl(t,r)&&(n=n.insert(e,r))}),n})}}class ld{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return ka.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:vu(e.createTime)}}(t)),ka.resolve()}getNamedQuery(e,t){return ka.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,function(e){return{name:e.name,query:Hu(e.bundledQuery),readTime:vu(e.readTime)}}(t)),ka.resolve()}}class cd{constructor(){this.overlays=new co(ra.comparator),this.qr=new Map}getOverlay(e,t){return ka.resolve(this.overlays.get(t))}getOverlays(e,t){const n=ec();return ka.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.St(e,t,r)}),ka.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.qr.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.qr.delete(n)),ka.resolve()}getOverlaysForCollection(e,t,n){const r=ec(),s=t.length+1,i=new ra(t.child("")),a=this.overlays.getIteratorFrom(i);for(;a.hasNext();){const e=a.getNext().value,i=e.getKey();if(!t.isPrefixOf(i.path))break;i.path.length===s&&e.largestBatchId>n&&r.set(e.getKey(),e)}return ka.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let s=new co((e,t)=>e-t);const i=this.overlays.getIterator();for(;i.hasNext();){const e=i.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=s.get(e.largestBatchId);null===t&&(t=ec(),s=s.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=ec(),o=s.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return ka.resolve(a)}St(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.qr.get(r.largestBatchId).delete(n.key);this.qr.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new qc(t,n));let s=this.qr.get(t);void 0===s&&(s=ic(),this.qr.set(t,s)),this.qr.set(t,s.add(n.key))}}class ud{constructor(){this.sessionToken=yo.EMPTY_BYTE_STRING}getSessionToken(e){return ka.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,ka.resolve()}}class dd{constructor(){this.Qr=new fo(hd.$r),this.Ur=new fo(hd.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const n=new hd(e,t);this.Qr=this.Qr.add(n),this.Ur=this.Ur.add(n)}Wr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.Gr(new hd(e,t))}zr(e,t){e.forEach(e=>this.removeReference(e,t))}jr(e){const t=new ra(new ea([])),n=new hd(t,e),r=new hd(t,e+1),s=[];return this.Ur.forEachInRange([n,r],e=>{this.Gr(e),s.push(e.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new ra(new ea([])),n=new hd(t,e),r=new hd(t,e+1);let s=ic();return this.Ur.forEachInRange([n,r],e=>{s=s.add(e.key)}),s}containsKey(e){const t=new hd(e,0),n=this.Qr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class hd{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return ra.comparator(e.key,t.key)||Wi(e.Yr,t.Yr)}static Kr(e,t){return Wi(e.Yr,t.Yr)||ra.comparator(e.key,t.key)}}class fd{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new fo(hd.$r)}checkEmpty(e){return ka.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const i=new Vc(s,t,n,r);this.mutationQueue.push(i);for(const a of r)this.Zr=this.Zr.add(new hd(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return ka.resolve(i)}lookupMutationBatch(e,t){return ka.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.ei(n),s=r<0?0:r;return ka.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ka.resolve(0===this.mutationQueue.length?Ia:this.tr-1)}getAllMutationBatches(e){return ka.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new hd(t,0),r=new hd(t,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([n,r],e=>{const t=this.Xr(e.Yr);s.push(t)}),ka.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new fo(Wi);return t.forEach(e=>{const t=new hd(e,0),r=new hd(e,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([t,r],e=>{n=n.add(e.Yr)})}),ka.resolve(this.ti(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let s=n;ra.isDocumentKey(s)||(s=s.child(""));const i=new hd(new ra(s),0);let a=new fo(Wi);return this.Zr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.Yr)),!0)},i),ka.resolve(this.ti(a))}ti(e){const t=[];return e.forEach(e=>{const n=this.Xr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){Ai(0===this.ni(t.batchId,"removed"),55003),this.mutationQueue.shift();let n=this.Zr;return ka.forEach(t.mutations,r=>{const s=new hd(r.key,t.batchId);return n=n.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Zr=n})}ir(e){}containsKey(e,t){const n=new hd(t,0),r=this.Zr.firstAfterOrEqual(n);return ka.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,ka.resolve()}ni(e,t){return this.ei(e)}ei(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class md{constructor(e){this.ri=e,this.docs=new co(ra.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),s=r?r.size:0,i=this.ri(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:i}),this.size+=i-s,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return ka.resolve(n?n.document.mutableCopy():rl.newInvalidDocument(t))}getEntries(e,t){let n=Xl();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():rl.newInvalidDocument(e))}),ka.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let s=Xl();const i=t.path,a=new ra(i.child("__id-9223372036854775808__")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!i.isPrefixOf(e.path))break;e.path.length>i.length+1||xa(ba(a),n)<=0||(r.has(a.key)||Hl(t,a))&&(s=s.insert(a.key,a.mutableCopy()))}return ka.resolve(s)}getAllFromCollectionGroup(e,t,n,r){Ii(9500)}ii(e,t){return ka.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new pd(this)}getSize(e){return ka.resolve(this.size)}}class pd extends id{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.Nr.addEntry(e,r)):this.Nr.removeEntry(n)}),ka.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}class gd{constructor(e){this.persistence=e,this.si=new Ql(e=>Cl(e),Il),this.lastRemoteSnapshotVersion=pa.min(),this.highestTargetId=0,this.oi=0,this._i=new dd,this.targetCount=0,this.ai=Ju.ur()}forEachTarget(e,t){return this.si.forEach((e,n)=>t(n)),ka.resolve()}getLastRemoteSnapshotVersion(e){return ka.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ka.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),ka.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.oi&&(this.oi=t),ka.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Ju(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,ka.resolve()}updateTargetData(e,t){return this.Pr(t),ka.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,ka.resolve()}removeTargets(e,t,n){let r=0;const s=[];return this.si.forEach((i,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.si.delete(i),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),ka.waitFor(s).next(()=>r)}getTargetCount(e){return ka.resolve(this.targetCount)}getTargetData(e,t){const n=this.si.get(t)||null;return ka.resolve(n)}addMatchingKeys(e,t,n){return this._i.Wr(t,n),ka.resolve()}removeMatchingKeys(e,t,n){this._i.zr(t,n);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(t=>{s.push(r.markPotentiallyOrphaned(e,t))}),ka.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),ka.resolve()}getMatchingKeysForTargetId(e,t){const n=this._i.Hr(t);return ka.resolve(n)}containsKey(e,t){return ka.resolve(this._i.containsKey(t))}}class yd{constructor(e,t){this.ui={},this.overlays={},this.ci=new Ca(0),this.li=!1,this.li=!0,this.hi=new ud,this.referenceDelegate=e(this),this.Pi=new gd(this),this.indexManager=new Wu,this.remoteDocumentCache=function(e){return new md(e)}(e=>this.referenceDelegate.Ti(e)),this.serializer=new Bu(t),this.Ii=new ld(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new cd,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.ui[e.toKey()];return n||(n=new fd(t,this.referenceDelegate),this.ui[e.toKey()]=n),n}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,n){ki("MemoryPersistence","Starting transaction:",e);const r=new vd(this.ci.next());return this.referenceDelegate.Ei(),n(r).next(e=>this.referenceDelegate.di(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Ai(e,t){return ka.or(Object.values(this.ui).map(n=>()=>n.containsKey(e,t)))}}class vd extends Sa{constructor(e){super(),this.currentSequenceNumber=e}}class bd{constructor(e){this.persistence=e,this.Ri=new dd,this.Vi=null}static mi(e){return new bd(e)}get fi(){if(this.Vi)return this.Vi;throw Ii(60996)}addReference(e,t,n){return this.Ri.addReference(n,t),this.fi.delete(n.toString()),ka.resolve()}removeReference(e,t,n){return this.Ri.removeReference(n,t),this.fi.add(n.toString()),ka.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),ka.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach(e=>this.fi.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.fi.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ka.forEach(this.fi,n=>{const r=ra.fromPath(n);return this.gi(e,r).next(e=>{e||t.removeEntry(r,pa.min())})}).next(()=>(this.Vi=null,t.apply(e)))}updateLimboDocument(e,t){return this.gi(e,t).next(e=>{e?this.fi.delete(t.toString()):this.fi.add(t.toString())})}Ti(e){return 0}gi(e,t){return ka.or([()=>ka.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class wd{constructor(e,t){this.persistence=e,this.pi=new Ql(e=>Da(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=sd(this,t)}static mi(e,t){return new wd(e,t)}Ei(){}di(e){return ka.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}wr(e){let t=0;return this.pr(e,e=>{t++}).next(()=>t)}pr(e,t){return ka.forEach(this.pi,(n,r)=>this.br(e,n,r).next(e=>e?ka.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.ii(e,r=>this.br(e,r,t).next(e=>{e||(n++,s.removeEntry(r,pa.min()))})).next(()=>s.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),ka.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),ka.resolve()}removeReference(e,t,n){return this.pi.set(n,e.currentSequenceNumber),ka.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),ka.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Go(e.data.value)),t}br(e,t,n){return ka.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.pi.get(t);return ka.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class xd{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Es=n,this.ds=r}static As(e,t){let n=ic(),r=ic();for(const s of t.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new xd(e,t.fromCache,n,r)}}class Nd{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Sd{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=I()?8:_a(T())>0?6:4}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,n,r){const s={result:null};return this.ys(e,t).next(e=>{s.result=e}).next(()=>{if(!s.result)return this.ws(e,t,r,n).next(e=>{s.result=e})}).next(()=>{if(s.result)return;const n=new Nd;return this.Ss(e,t,n).next(r=>{if(s.result=r,this.Vs)return this.bs(e,t,n,r.size)})}).next(()=>s.result)}bs(e,t,n,r){return n.documentReadCount<this.fs?(Ei()<=K.DEBUG&&ki("QueryEngine","SDK will not create cache indexes for query:",Bl(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),ka.resolve()):(Ei()<=K.DEBUG&&ki("QueryEngine","Query:",Bl(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.gs*r?(Ei()<=K.DEBUG&&ki("QueryEngine","The SDK decides to create cache indexes for query:",Bl(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Ml(t))):ka.resolve())}ys(e,t){if(Dl(t))return ka.resolve(null);let n=Ml(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Vl(t,null,"F"),n=Ml(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const s=ic(...r);return this.ps.getDocuments(e,s).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const i=this.Ds(t,r);return this.Cs(t,i,s,n.readTime)?this.ys(e,Vl(t,null,"F")):this.vs(e,i,t,n)}))})))}ws(e,t,n,r){return Dl(t)||r.isEqual(pa.min())?ka.resolve(null):this.ps.getDocuments(e,n).next(s=>{const i=this.Ds(t,s);return this.Cs(t,i,n,r)?ka.resolve(null):(Ei()<=K.DEBUG&&ki("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Bl(t)),this.vs(e,i,t,va(r,ga)).next(e=>e))})}Ds(e,t){let n=new fo(Wl(e));return t.forEach((t,r)=>{Hl(e,r)&&(n=n.add(r))}),n}Cs(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}Ss(e,t,n){return Ei()<=K.DEBUG&&ki("QueryEngine","Using full collection scan to execute query:",Bl(t)),this.ps.getDocumentsMatchingQuery(e,t,wa.min(),n)}vs(e,t,n,r){return this.ps.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}const Ed="LocalStore";class kd{constructor(e,t,n,r){this.persistence=e,this.Fs=t,this.serializer=r,this.Ms=new co(Wi),this.xs=new Ql(e=>Cl(e),Il),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(n)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new od(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ms))}}function _d(e,t,n,r){return new kd(e,t,n,r)}async function Td(e,t){const n=Pi(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(s=>(r=s,n.Bs(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const s=[],i=[];let a=ic();for(const e of r){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ls:e,removedBatchIds:s,addedBatchIds:i}))})})}function Cd(e){const t=Pi(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Pi.getLastRemoteSnapshotVersion(e))}function Id(e,t,n){let r=ic(),s=ic();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=Xl();return n.forEach((n,i)=>{const a=e.get(n);i.isFoundDocument()!==a.isFoundDocument()&&(s=s.add(n)),i.isNoDocument()&&i.version.isEqual(pa.min())?(t.removeEntry(n,i.readTime),r=r.insert(n,i)):!a.isValidDocument()||i.version.compareTo(a.version)>0||0===i.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(i),r=r.insert(n,i)):ki(Ed,"Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",i.version)}),{ks:r,qs:s}})}function jd(e,t){const n=Pi(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=Ia),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function Ad(e,t){const n=Pi(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Pi.getTargetData(e,t).next(s=>s?(r=s,ka.resolve(r)):n.Pi.allocateTargetId(e).next(s=>(r=new qu(t,s,"TargetPurposeListen",e.currentSequenceNumber),n.Pi.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.Ms.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(e.targetId,e),n.xs.set(t,e.targetId)),e})}async function Pd(e,t,n){const r=Pi(e),s=r.Ms.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,e=>r.persistence.referenceDelegate.removeTarget(e,s))}catch(e){if(!Ta(e))throw e;ki(Ed,"Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.Ms=r.Ms.remove(t),r.xs.delete(s.target)}function Rd(e,t,n){const r=Pi(e);let s=pa.min(),i=ic();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=Pi(e),s=r.xs.get(n);return void 0!==s?ka.resolve(r.Ms.get(s)):r.Pi.getTargetData(t,n)}(r,e,Ml(t)).next(t=>{if(t)return s=t.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(e,t.targetId).next(e=>{i=e})}).next(()=>r.Fs.getDocumentsMatchingQuery(e,t,n?s:pa.min(),n?i:ic())).next(e=>(Dd(r,Gl(t),e),{documents:e,Qs:i})))}function Dd(e,t,n){let r=e.Os.get(t)||pa.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.Os.set(t,r)}class Od{constructor(){this.activeTargetIds=oc()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Ld{constructor(){this.Mo=new Od,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,n){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new Od,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Md{Oo(e){}shutdown(){}}const Fd="ConnectivityMonitor";class Ud{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ki(Fd,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ki(Fd,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Vd=null;function zd(){return null===Vd?Vd=268435456+Math.round(2147483648*Math.random()):Vd++,"0x"+Vd.toString(16)}const qd="RestConnection",Bd={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Hd{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko="projects/".concat(n,"/databases/").concat(r),this.Wo=this.databaseId.database===jo?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Go(e,t,n,r,s){const i=zd(),a=this.zo(e,t.toUriEncodedString());ki(qd,"Sending RPC '".concat(e,"' ").concat(i,":"),a,n);const o={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(o,r,s);const{host:l}=new URL(a),c=N(l);return this.Jo(e,a,o,n,c).then(t=>(ki(qd,"Received RPC '".concat(e,"' ").concat(i,": "),t),t),t=>{throw Ti(qd,"RPC '".concat(e,"' ").concat(i," failed with error: "),t,"url: ",a,"request:",n),t})}Ho(e,t,n,r,s,i){return this.Go(e,t,n,r,s)}jo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ni,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}zo(e,t){const n=Bd[e];return"".concat(this.Uo,"/v1/").concat(t,":").concat(n)}terminate(){}}class Gd{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}const Wd="WebChannelConnection";class Kd extends Hd{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,n,r,s){const i=zd();return new Promise((s,a)=>{const o=new ci;o.setWithCredentials(!0),o.listenOnce(di.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case hi.NO_ERROR:const n=o.getResponseJson();ki(Wd,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(n)),s(n);break;case hi.TIMEOUT:ki(Wd,"RPC '".concat(e,"' ").concat(i," timed out")),a(new Di(Ri.DEADLINE_EXCEEDED,"Request time out"));break;case hi.HTTP_ERROR:const r=o.getStatus();if(ki(Wd,"RPC '".concat(e,"' ").concat(i," failed with status:"),r,"response text:",o.getResponseText()),r>0){var t;let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const n=null===(t=e)||void 0===t?void 0:t.error;if(n&&n.status&&n.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(Ri).indexOf(t)>=0?t:Ri.UNKNOWN}(n.status);a(new Di(e,n.message))}else a(new Di(Ri.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new Di(Ri.UNAVAILABLE,"Connection failed."));break;default:Ii(9055,{l_:e,streamId:i,h_:o.getLastErrorCode(),P_:o.getLastError()})}}finally{ki(Wd,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);ki(Wd,"RPC '".concat(e,"' ").concat(i," sending request:"),r),o.send(t,"POST",l,n,15)})}T_(e,t,n){const r=zd(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],i=gi(),a=pi(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.jo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=s.join("");ki(Wd,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=i.createWebChannel(c,o);this.I_(u);let d=!1,h=!1;const f=new Gd({Yo:t=>{h?ki(Wd,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(d||(ki(Wd,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),d=!0),ki(Wd,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Zo:()=>u.close()}),m=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return m(u,ui.EventType.OPEN,()=>{h||(ki(Wd,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),f.o_())}),m(u,ui.EventType.CLOSE,()=>{h||(h=!0,ki(Wd,"RPC '".concat(e,"' stream ").concat(r," transport closed")),f.a_(),this.E_(u))}),m(u,ui.EventType.ERROR,t=>{h||(h=!0,Ti(Wd,"RPC '".concat(e,"' stream ").concat(r," transport errored. Name:"),t.name,"Message:",t.message),f.a_(new Di(Ri.UNAVAILABLE,"The operation could not be completed")))}),m(u,ui.EventType.MESSAGE,t=>{if(!h){var n;const s=t.data[0];Ai(!!s,16349);const i=s,a=(null===i||void 0===i?void 0:i.error)||(null===(n=i[0])||void 0===n?void 0:n.error);if(a){ki(Wd,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=Hc[e];if(void 0!==t)return Kc(t)}(t),s=a.message;void 0===n&&(n=Ri.INTERNAL,s="Unknown error status: "+t+" with message "+a.message),h=!0,f.a_(new Di(n,s)),u.close()}else ki(Wd,"RPC '".concat(e,"' stream ").concat(r," received:"),s),f.u_(s)}}),m(a,mi.STAT_EVENT,t=>{t.stat===fi.PROXY?ki(Wd,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===fi.NOPROXY&&ki(Wd,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{f.__()},0),f}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(t=>t===e)}}function Qd(){return"undefined"!=typeof document?document:null}function Yd(e){return new fu(e,!0)}class Xd{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.Mi=e,this.timerId=t,this.d_=n,this.A_=r,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),n=Math.max(0,Date.now()-this.f_),r=Math.max(0,t-n);r>0&&ki("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.V_," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.m_=this.Mi.enqueueAfterDelay(this.timerId,r,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){null!==this.m_&&(this.m_.skipDelay(),this.m_=null)}cancel(){null!==this.m_&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}const Jd="PersistentStream";class $d{constructor(e,t,n,r,s,i,a,o){this.Mi=e,this.S_=n,this.b_=r,this.connection=s,this.authCredentialsProvider=i,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new Xd(e,t)}x_(){return 1===this.state||5===this.state||this.O_()}O_(){return 2===this.state||3===this.state}start(){this.F_=0,4!==this.state?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&null===this.C_&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,4!==e?this.M_.reset():t&&t.code===Ri.RESOURCE_EXHAUSTED?(_i(t.toString()),_i("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===Ri.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.D_===t&&this.G_(n,r)},t=>{e(()=>{const e=new Di(Ri.UNKNOWN,"Fetching auth token failed: "+t.message);return this.z_(e)})})}G_(e,t){const n=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo(()=>{n(()=>this.listener.Xo())}),this.stream.t_(()=>{n(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(e=>{n(()=>this.z_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.F_?this.J_(e):this.onNext(e))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return ki(Jd,"close with error: ".concat(e)),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget(()=>this.D_===e?t():(ki(Jd,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Zd extends $d{constructor(e,t,n,r,s,i){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:Ii(39313,{state:e})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(e,t){return e.useProto3Json?(Ai(void 0===t||"string"==typeof t,58123),yo.fromBase64String(t||"")):(Ai(void 0===t||t instanceof Buffer||t instanceof Uint8Array,16193),yo.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?Ri.UNKNOWN:Kc(e.code);return new Di(t,e.message||"")}(a);n=new iu(r,s,i,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=Su(e,r.document.name),i=vu(r.document.updateTime),a=r.document.createTime?vu(r.document.createTime):pa.min(),o=new tl({mapValue:{fields:r.document.fields}}),l=rl.newFoundDocument(s,i,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new ru(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=Su(e,r.document),i=r.readTime?vu(r.readTime):pa.min(),a=rl.newNoDocument(s,i),o=r.removedTargetIds||[];n=new ru([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=Su(e,r.document),i=r.removedTargetIds||[];n=new ru([],i,s,null)}else{if(!("filter"in t))return Ii(11601,{Rt:t});{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:s}=e,i=new Bc(r,s),a=e.targetId;n=new su(a,i)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return pa.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?pa.min():t.readTime?vu(t.readTime):pa.min()}(e);return this.listener.H_(t,n)}Y_(e){const t={};t.database=_u(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=jl(r)?{documents:ju(e,r)}:{query:Au(e,r).ft},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=gu(e,t.resumeToken);const r=mu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(pa.min())>0){n.readTime=pu(e,t.snapshotVersion.toTimestamp());const r=mu(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ii(28987,{purpose:e})}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.q_(t)}Z_(e){const t={};t.database=_u(this.serializer),t.removeTarget=e,this.q_(t)}}class eh extends $d{constructor(e,t,n,r,s,i){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,i),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ai(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ai(!e.writeResults||0===e.writeResults.length,55816),this.listener.ta()}onNext(e){Ai(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=function(e,t){return e&&e.length>0?(Ai(void 0!==t,14353),e.map(e=>function(e,t){let n=e.updateTime?vu(e.updateTime):vu(t);return n.isEqual(pa.min())&&(n=vu(t)),new Ec(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=vu(e.commitTime);return this.listener.na(n,t)}ra(){const e={};e.database=_u(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>Iu(this.serializer,e))};this.q_(t)}}class th{}class nh extends th{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.ia=!1}sa(){if(this.ia)throw new Di(Ri.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,n,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[i,a]=s;return this.connection.Go(e,wu(t,n),r,i,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ri.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Di(Ri.UNKNOWN,e.toString())})}Ho(e,t,n,r,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[a,o]=i;return this.connection.Ho(e,wu(t,n),r,a,o,s)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===Ri.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new Di(Ri.UNKNOWN,e.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class rh{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){0===this.oa&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){"Online"===this.state?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,"Online"===e&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.aa?(_i(t),this.aa=!1):ki("OnlineStateTracker",t)}Pa(){null!==this._a&&(this._a.cancel(),this._a=null)}}const sh="RemoteStore";class ih{constructor(e,t,n,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(e=>{n.enqueueAndForget(async()=>{mh(this)&&(ki(sh,"Restarting streams for network reachability change."),await async function(e){const t=Pi(e);t.Ea.add(4),await oh(t),t.Ra.set("Unknown"),t.Ea.delete(4),await ah(t)}(this))})}),this.Ra=new rh(n,r)}}async function ah(e){if(mh(e))for(const t of e.da)await t(!0)}async function oh(e){for(const t of e.da)await t(!1)}function lh(e,t){const n=Pi(e);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),fh(n)?hh(n):Rh(n).O_()&&uh(n,t))}function ch(e,t){const n=Pi(e),r=Rh(n);n.Ia.delete(t),r.O_()&&dh(n,t),0===n.Ia.size&&(r.O_()?r.L_():mh(n)&&n.Ra.set("Unknown"))}function uh(e,t){if(e.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(pa.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Rh(e).Y_(t)}function dh(e,t){e.Va.Ue(t),Rh(e).Z_(t)}function hh(e){e.Va=new ou({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),At:t=>e.Ia.get(t)||null,ht:()=>e.datastore.serializer.databaseId}),Rh(e).start(),e.Ra.ua()}function fh(e){return mh(e)&&!Rh(e).x_()&&e.Ia.size>0}function mh(e){return 0===Pi(e).Ea.size}function ph(e){e.Va=void 0}async function gh(e){e.Ra.set("Online")}async function yh(e){e.Ia.forEach((t,n)=>{uh(e,t)})}async function vh(e,t){ph(e),fh(e)?(e.Ra.ha(t),hh(e)):e.Ra.set("Unknown")}async function bh(e,t,n){if(e.Ra.set("Online"),t instanceof iu&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.Ia.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.Ia.delete(r),e.Va.removeTarget(r))}(e,t)}catch(n){ki(sh,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),await wh(e,n)}else if(t instanceof ru?e.Va.Ze(t):t instanceof su?e.Va.st(t):e.Va.tt(t),!n.isEqual(pa.min()))try{const t=await Cd(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.Va.Tt(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const s=e.Ia.get(r);s&&e.Ia.set(r,s.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.Ia.get(t);if(!r)return;e.Ia.set(t,r.withResumeToken(yo.EMPTY_BYTE_STRING,r.snapshotVersion)),dh(e,t);const s=new qu(r.target,t,n,r.sequenceNumber);uh(e,s)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){ki(sh,"Failed to raise snapshot:",t),await wh(e,t)}}async function wh(e,t,n){if(!Ta(t))throw t;e.Ea.add(1),await oh(e),e.Ra.set("Offline"),n||(n=()=>Cd(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{ki(sh,"Retrying IndexedDB access"),await n(),e.Ea.delete(1),await ah(e)})}function xh(e,t){return t().catch(n=>wh(e,n,t))}async function Nh(e){const t=Pi(e),n=Dh(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:Ia;for(;Sh(t);)try{const e=await jd(t.localStore,r);if(null===e){0===t.Ta.length&&n.L_();break}r=e.batchId,Eh(t,e)}catch(e){await wh(t,e)}kh(t)&&_h(t)}function Sh(e){return mh(e)&&e.Ta.length<10}function Eh(e,t){e.Ta.push(t);const n=Dh(e);n.O_()&&n.X_&&n.ea(t.mutations)}function kh(e){return mh(e)&&!Dh(e).x_()&&e.Ta.length>0}function _h(e){Dh(e).start()}async function Th(e){Dh(e).ra()}async function Ch(e){const t=Dh(e);for(const n of e.Ta)t.ea(n.mutations)}async function Ih(e,t,n){const r=e.Ta.shift(),s=zc.from(r,t,n);await xh(e,()=>e.remoteSyncer.applySuccessfulWrite(s)),await Nh(e)}async function jh(e,t){t&&Dh(e).X_&&await async function(e,t){if(function(e){return Wc(e)&&e!==Ri.ABORTED}(t.code)){const n=e.Ta.shift();Dh(e).B_(),await xh(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await Nh(e)}}(e,t),kh(e)&&_h(e)}async function Ah(e,t){const n=Pi(e);n.asyncQueue.verifyOperationInProgress(),ki(sh,"RemoteStore received new credentials");const r=mh(n);n.Ea.add(3),await oh(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await ah(n)}async function Ph(e,t){const n=Pi(e);t?(n.Ea.delete(2),await ah(n)):t||(n.Ea.add(2),await oh(n),n.Ra.set("Unknown"))}function Rh(e){return e.ma||(e.ma=function(e,t,n){const r=Pi(e);return r.sa(),new Zd(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:gh.bind(null,e),t_:yh.bind(null,e),r_:vh.bind(null,e),H_:bh.bind(null,e)}),e.da.push(async t=>{t?(e.ma.B_(),fh(e)?hh(e):e.Ra.set("Unknown")):(await e.ma.stop(),ph(e))})),e.ma}function Dh(e){return e.fa||(e.fa=function(e,t,n){const r=Pi(e);return r.sa(),new eh(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Xo:()=>Promise.resolve(),t_:Th.bind(null,e),r_:jh.bind(null,e),ta:Ch.bind(null,e),na:Ih.bind(null,e)}),e.da.push(async t=>{t?(e.fa.B_(),await Nh(e)):(await e.fa.stop(),e.Ta.length>0&&(ki(sh,"Stopping write stream with ".concat(e.Ta.length," pending writes")),e.Ta=[]))})),e.fa}class Oh{constructor(e,t,n,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Oi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,s){const i=Date.now()+n,a=new Oh(e,t,i,r,s);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Di(Ri.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Lh(e,t){if(_i("AsyncQueue","".concat(t,": ").concat(e)),Ta(e))return new Di(Ri.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class Mh{static emptySet(e){return new Mh(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ra.comparator(t.key,n.key):(e,t)=>ra.comparator(e.key,t.key),this.keyedMap=$l(),this.sortedSet=new co(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Mh))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new Mh;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class Fh{constructor(){this.ga=new co(ra.comparator)}track(e){const t=e.doc.key,n=this.ga.get(t);n?0!==e.type&&3===n.type?this.ga=this.ga.insert(t,e):3===e.type&&1!==n.type?this.ga=this.ga.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.ga=this.ga.remove(t):1===e.type&&2===n.type?this.ga=this.ga.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ii(63341,{Rt:e,pa:n}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal((t,n)=>{e.push(n)}),e}}class Uh{constructor(e,t,n,r,s,i,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=i,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,s){const i=[];return t.forEach(e=>{i.push({type:0,doc:e})}),new Uh(e,t,Mh.emptySet(t),i,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zl(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class Vh{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class zh{constructor(){this.queries=qh(),this.onlineState="Unknown",this.Ca=new Set}terminate(){!function(e,t){const n=Pi(e),r=n.queries;n.queries=qh(),r.forEach((e,n)=>{for(const r of n.Sa)r.onError(t)})}(this,new Di(Ri.ABORTED,"Firestore shutting down"))}}function qh(){return new Ql(e=>ql(e),zl)}async function Bh(e,t){const n=Pi(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.ba()&&t.Da()&&(r=2):(i=new Vh,r=t.Da()?0:1);try{switch(r){case 0:i.wa=await n.onListen(s,!0);break;case 1:i.wa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(e){const n=Lh(e,"Initialization of query '".concat(Bl(t.query),"' failed"));return void t.onError(n)}n.queries.set(s,i),i.Sa.push(t),t.va(n.onlineState),i.wa&&t.Fa(i.wa)&&Kh(n)}async function Hh(e,t){const n=Pi(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const e=i.Sa.indexOf(t);e>=0&&(i.Sa.splice(e,1),0===i.Sa.length?s=t.Da()?0:1:!i.ba()&&t.Da()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Gh(e,t){const n=Pi(e);let r=!1;for(const s of t){const e=s.query,t=n.queries.get(e);if(t){for(const e of t.Sa)e.Fa(s)&&(r=!0);t.wa=s}}r&&Kh(n)}function Wh(e,t,n){const r=Pi(e),s=r.queries.get(t);if(s)for(const i of s.Sa)i.onError(n);r.queries.delete(t)}function Kh(e){e.Ca.forEach(e=>{e.next()})}var Qh,Yh;(Yh=Qh||(Qh={})).Ma="default",Yh.Cache="cache";class Xh{constructor(e,t,n){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=n||{}}Fa(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new Uh(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache)return!0;if(!this.Da())return!0;const n="Offline"!==t;return(!this.options.qa||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}ka(e){e=Uh.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Qh.Cache}}class Jh{constructor(e){this.key=e}}class $h{constructor(e){this.key=e}}class Zh{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ic(),this.mutatedKeys=ic(),this.eu=Wl(e),this.tu=new Mh(this.eu)}get nu(){return this.Ya}ru(e,t){const n=t?t.iu:new Fh,r=t?t.tu:this.tu;let s=t?t.mutatedKeys:this.mutatedKeys,i=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=Hl(this.query,t)?t:null,d=!!c&&this.mutatedKeys.has(c.key),h=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?d!==h&&(n.track({type:3,doc:u}),f=!0):this.su(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.eu(u,o)>0||l&&this.eu(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(i=i.add(u),s=h?s.add(e):s.delete(e)):(i=i.delete(e),s=s.delete(e)))}),null!==this.query.limit)for(;i.size>this.query.limit;){const e="F"===this.query.limitType?i.last():i.first();i=i.delete(e.key),s=s.delete(e.key),n.track({type:1,doc:e})}return{tu:i,iu:n,Cs:a,mutatedKeys:s}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const i=e.iu.ya();i.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ii(20277,{Rt:e})}};return n(e)-n(t)}(e.type,t.type)||this.eu(e.doc,t.doc)),this.ou(n),r=null!==r&&void 0!==r&&r;const a=t&&!r?this._u():[],o=0===this.Xa.size&&this.current&&!r?1:0,l=o!==this.Za;return this.Za=o,0!==i.length||l?{snapshot:new Uh(this.query,e.tu,s,i,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Fh,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(e=>this.Ya=this.Ya.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.Ya=this.Ya.delete(e)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ic(),this.tu.forEach(e=>{this.uu(e.key)&&(this.Xa=this.Xa.add(e.key))});const t=[];return e.forEach(e=>{this.Xa.has(e)||t.push(new $h(e))}),this.Xa.forEach(n=>{e.has(n)||t.push(new Jh(n))}),t}cu(e){this.Ya=e.Qs,this.Xa=ic();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Uh.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,0===this.Za,this.hasCachedResults)}}const ef="SyncEngine";class tf{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class nf{constructor(e){this.key=e,this.hu=!1}}class rf{constructor(e,t,n,r,s,i){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=i,this.Pu={},this.Tu=new Ql(e=>ql(e),zl),this.Iu=new Map,this.Eu=new Set,this.du=new co(ra.comparator),this.Au=new Map,this.Ru=new dd,this.Vu={},this.mu=new Map,this.fu=Ju.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return!0===this.gu}}async function sf(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=_f(e);let s;const i=r.Tu.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.lu()):s=await of(r,t,n,!0),s}async function af(e,t){const n=_f(e);await of(n,t,!0,!1)}async function of(e,t,n,r){const s=await Ad(e.localStore,Ml(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let o;return r&&(o=await lf(e,t,i,"current"===a,s.resumeToken)),e.isPrimaryClient&&n&&lh(e.remoteStore,s),o}async function lf(e,t,n,r,s){e.pu=(t,n,r)=>async function(e,t,n,r){let s=t.view.ru(n);s.Cs&&(s=await Rd(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ru(n,s)}));const i=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(s,e.isPrimaryClient,i,a);return wf(e,t.targetId,o.au),o.snapshot}(e,t,n,r);const i=await Rd(e.localStore,t,!0),a=new Zh(t,i.Qs),o=a.ru(i.documents),l=nu.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,s),c=a.applyChanges(o,e.isPrimaryClient,l);wf(e,n,c.au);const u=new tf(t,n,a);return e.Tu.set(t,u),e.Iu.has(n)?e.Iu.get(n).push(t):e.Iu.set(n,[t]),c.snapshot}async function cf(e,t,n){const r=Pi(e),s=r.Tu.get(t),i=r.Iu.get(s.targetId);if(i.length>1)return r.Iu.set(s.targetId,i.filter(e=>!zl(e,t))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Pd(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ch(r.remoteStore,s.targetId),vf(r,s.targetId)}).catch(Ea)):(vf(r,s.targetId),await Pd(r.localStore,s.targetId,!0))}async function uf(e,t){const n=Pi(e),r=n.Tu.get(t),s=n.Iu.get(r.targetId);n.isPrimaryClient&&1===s.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ch(n.remoteStore,r.targetId))}async function df(e,t){const n=Pi(e);try{const e=await function(e,t){const n=Pi(e),r=t.snapshotVersion;let s=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const i=n.Ns.newChangeBuffer({trackRemovals:!0});s=n.Ms;const a=[];t.targetChanges.forEach((i,o)=>{const l=s.get(o);if(!l)return;a.push(n.Pi.removeMatchingKeys(e,i.removedDocuments,o).next(()=>n.Pi.addMatchingKeys(e,i.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(yo.EMPTY_BYTE_STRING,pa.min()).withLastLimboFreeSnapshotVersion(pa.min()):i.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(i.resumeToken,r)),s=s.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||(t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0)}(l,c,i)&&a.push(n.Pi.updateTargetData(e,c))});let o=Xl(),l=ic();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(Id(e,i,t.documentUpdates).next(e=>{o=e.ks,l=e.qs})),!r.isEqual(pa.min())){const t=n.Pi.getLastRemoteSnapshotVersion(e).next(t=>n.Pi.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return ka.waitFor(a).next(()=>i.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.Ms=s,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Au.get(t);r&&(Ai(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1,22616),e.addedDocuments.size>0?r.hu=!0:e.modifiedDocuments.size>0?Ai(r.hu,14607):e.removedDocuments.size>0&&(Ai(r.hu,42227),r.hu=!1))}),await Sf(n,e,t)}catch(e){await Ea(e)}}function hf(e,t,n){const r=Pi(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.Tu.forEach((n,r)=>{const s=r.view.va(t);s.snapshot&&e.push(s.snapshot)}),function(e,t){const n=Pi(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const s of n.Sa)s.va(t)&&(r=!0)}),r&&Kh(n)}(r.eventManager,t),e.length&&r.Pu.H_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function ff(e,t,n){const r=Pi(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r.Au.get(t),i=s&&s.key;if(i){let e=new co(ra.comparator);e=e.insert(i,rl.newNoDocument(i,pa.min()));const n=ic().add(i),s=new tu(pa.min(),new Map,new co(Wi),e,n);await df(r,s),r.du=r.du.remove(i),r.Au.delete(t),Nf(r)}else await Pd(r.localStore,t,!1).then(()=>vf(r,t,n)).catch(Ea)}async function mf(e,t){const n=Pi(e),r=t.batch.batchId;try{const e=await function(e,t){const n=Pi(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const s=n.batch,i=s.keys();let a=ka.resolve();return i.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const i=n.docVersions.get(e);Ai(null!==i,48541),t.version.compareTo(i)<0&&(s.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,s))}(n,e,t,s).next(()=>s.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=ic();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);yf(n,r,null),gf(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Sf(n,e)}catch(e){await Ea(e)}}async function pf(e,t,n){const r=Pi(e);try{const e=await function(e,t){const n=Pi(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(Ai(null!==t,37113),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);yf(r,t,n),gf(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Sf(r,e)}catch(n){await Ea(n)}}function gf(e,t){(e.mu.get(t)||[]).forEach(e=>{e.resolve()}),e.mu.delete(t)}function yf(e,t,n){const r=Pi(e);let s=r.Vu[r.currentUser.toKey()];if(s){const e=s.get(t);e&&(n?e.reject(n):e.resolve(),s=s.remove(t)),r.Vu[r.currentUser.toKey()]=s}}function vf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Iu.get(t))e.Tu.delete(r),n&&e.Pu.yu(r,n);e.Iu.delete(t),e.isPrimaryClient&&e.Ru.jr(t).forEach(t=>{e.Ru.containsKey(t)||bf(e,t)})}function bf(e,t){e.Eu.delete(t.path.canonicalString());const n=e.du.get(t);null!==n&&(ch(e.remoteStore,n),e.du=e.du.remove(t),e.Au.delete(n),Nf(e))}function wf(e,t,n){for(const r of n)r instanceof Jh?(e.Ru.addReference(r.key,t),xf(e,r)):r instanceof $h?(ki(ef,"Document no longer in limbo: "+r.key),e.Ru.removeReference(r.key,t),e.Ru.containsKey(r.key)||bf(e,r.key)):Ii(19791,{wu:r})}function xf(e,t){const n=t.key,r=n.path.canonicalString();e.du.get(n)||e.Eu.has(r)||(ki(ef,"New document in limbo: "+n),e.Eu.add(r),Nf(e))}function Nf(e){for(;e.Eu.size>0&&e.du.size<e.maxConcurrentLimboResolutions;){const t=e.Eu.values().next().value;e.Eu.delete(t);const n=new ra(ea.fromString(t)),r=e.fu.next();e.Au.set(r,new nf(n)),e.du=e.du.insert(n,r),lh(e.remoteStore,new qu(Ml(Rl(n.path)),r,"TargetPurposeLimboResolution",Ca.ce))}}async function Sf(e,t,n){const r=Pi(e),s=[],i=[],a=[];r.Tu.isEmpty()||(r.Tu.forEach((e,o)=>{a.push(r.pu(o,t,n).then(e=>{if((e||n)&&r.isPrimaryClient){var t;const s=e?!e.fromCache:null===n||void 0===n||null===(t=n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,s?"current":"not-current")}if(e){s.push(e);const t=xd.As(o.targetId,e);i.push(t)}}))}),await Promise.all(a),r.Pu.H_(s),await async function(e,t){const n=Pi(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>ka.forEach(t,t=>ka.forEach(t.Es,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>ka.forEach(t.ds,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Ta(e))throw e;ki(Ed,"Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.Ms.get(e),r=t.snapshotVersion,s=t.withLastLimboFreeSnapshotVersion(r);n.Ms=n.Ms.insert(e,s)}}}(r.localStore,i))}async function Ef(e,t){const n=Pi(e);if(!n.currentUser.isEqual(t)){ki(ef,"User change. New user:",t.toKey());const e=await Td(n.localStore,t);n.currentUser=t,function(e,t){e.mu.forEach(e=>{e.forEach(e=>{e.reject(new Di(Ri.CANCELLED,t))})}),e.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await Sf(n,e.Ls)}}function kf(e,t){const n=Pi(e),r=n.Au.get(t);if(r&&r.hu)return ic().add(r.key);{let e=ic();const r=n.Iu.get(t);if(!r)return e;for(const t of r){const r=n.Tu.get(t);e=e.unionWith(r.view.nu)}return e}}function _f(e){const t=Pi(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=df.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=kf.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=ff.bind(null,t),t.Pu.H_=Gh.bind(null,t.eventManager),t.Pu.yu=Wh.bind(null,t.eventManager),t}function Tf(e){const t=Pi(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=mf.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=pf.bind(null,t),t}class Cf{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Yd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return _d(this.persistence,new Sd,e.initialUser,this.serializer)}Cu(e){return new yd(bd.mi,this.serializer)}Du(e){return new Ld}async terminate(){var e,t;null!==(e=this.gcScheduler)&&void 0!==e&&e.stop(),null!==(t=this.indexBackfillerScheduler)&&void 0!==t&&t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Cf.provider={build:()=>new Cf};class If extends Cf{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ai(this.persistence.referenceDelegate instanceof wd,46915);const n=this.persistence.referenceDelegate.garbageCollector;return new nd(n,e.asyncQueue,t)}Cu(e){const t=void 0!==this.cacheSizeBytes?Xu.withCacheSize(this.cacheSizeBytes):Xu.DEFAULT;return new yd(e=>wd.mi(e,t),this.serializer)}}class jf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>hf(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ef.bind(null,this.syncEngine),await Ph(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new zh}createDatastore(e){const t=Yd(e.databaseInfo.databaseId),n=function(e){return new Kd(e)}(e.databaseInfo);return function(e,t,n,r){return new nh(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,s){return new ih(e,t,n,r,s)}(this.localStore,this.datastore,e.asyncQueue,e=>hf(this.syncEngine,e,0),Ud.v()?new Ud:new Md)}createSyncEngine(e,t){return function(e,t,n,r,s,i,a){const o=new rf(e,t,n,r,s,i);return a&&(o.gu=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=Pi(e);ki(sh,"RemoteStore shutting down."),t.Ea.add(5),await oh(t),t.Aa.shutdown(),t.Ra.set("Unknown")}(this.remoteStore),null!==(e=this.datastore)&&void 0!==e&&e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}jf.provider={build:()=>new jf};class Af{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):_i("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Pf{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new Di(Ri.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=Pi(e),r={documents:t.map(e=>Nu(n.serializer,e))},s=await n.Ho("BatchGetDocuments",n.serializer.databaseId,ea.emptyPath(),r,t.length),i=new Map;s.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){Ai(!!t.found,43571),t.found.name,t.found.updateTime;const n=Su(e,t.found.name),r=vu(t.found.updateTime),s=t.found.createTime?vu(t.found.createTime):pa.min(),i=new tl({mapValue:{fields:t.found.fields}});return rl.newFoundDocument(n,r,s,i)}(e,t):"missing"in t?function(e,t){Ai(!!t.missing,3894),Ai(!!t.readTime,22933);const n=Su(e,t.missing),r=vu(t.readTime);return rl.newNoDocument(n,r)}(e,t):Ii(7234,{result:t})}(n.serializer,e);i.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=i.get(e.toString());Ai(!!t,55234,{key:e}),a.push(t)}),a}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new Fc(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=ra.fromPath(t);this.mutations.push(new Uc(n,this.precondition(n)))}),await async function(e,t){const n=Pi(e),r={writes:t.map(e=>Iu(n.serializer,e))};await n.Go("Commit",n.serializer.databaseId,ea.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ii(50498,{Gu:e.constructor.name});t=pa.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new Di(Ri.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(pa.min())?kc.exists(!1):kc.updateTime(t):kc.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(pa.min()))throw new Di(Ri.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kc.updateTime(t)}return kc.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Rf{constructor(e,t,n,r,s){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=s,this.zu=n.maxAttempts,this.M_=new Xd(this.asyncQueue,"transaction_retry")}ju(){this.zu-=1,this.Ju()}Ju(){this.M_.p_(async()=>{const e=new Pf(this.datastore),t=this.Hu(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.Yu(e)}))}).catch(e=>{this.Yu(e)})})}Hu(e){try{const t=this.updateFunction(e);return!ja(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Yu(e){this.zu>0&&this.Zu(e)?(this.zu-=1,this.asyncQueue.enqueueAndForget(()=>(this.Ju(),Promise.resolve()))):this.deferred.reject(e)}Zu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Wc(t)}return!1}}const Df="FirestoreClient";class Of{constructor(e,t,n,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=xi.UNAUTHENTICATED,this.clientId=Gi.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,async e=>{ki(Df,"Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(ki(Df,"Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Oi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=Lh(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Lf(e,t){e.asyncQueue.verifyOperationInProgress(),ki(Df,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await Td(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Mf(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Ff(e);ki(Df,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>Ah(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>Ah(t.remoteStore,n)),e._onlineComponents=t}async function Ff(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){ki(Df,"Using user provided OfflineComponentProvider");try{await Lf(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===Ri.FAILED_PRECONDITION||e.code===Ri.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;Ti("Error using user provided cache. Falling back to memory cache: "+n),await Lf(e,new Cf)}}else ki(Df,"Using default OfflineComponentProvider"),await Lf(e,new If(void 0));return e._offlineComponents}async function Uf(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(ki(Df,"Using user provided OnlineComponentProvider"),await Mf(e,e._uninitializedComponentsProvider._online)):(ki(Df,"Using default OnlineComponentProvider"),await Mf(e,new jf))),e._onlineComponents}function Vf(e){return Uf(e).then(e=>e.syncEngine)}function zf(e){return Uf(e).then(e=>e.datastore)}async function qf(e){const t=await Uf(e),n=t.eventManager;return n.onListen=sf.bind(null,t.syncEngine),n.onUnlisten=cf.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=af.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=uf.bind(null,t.syncEngine),n}function Bf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Oi;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Af({next:o=>{i.Nu(),t.enqueueAndForget(()=>Hh(e,a));const l=o.docs.has(n);!l&&o.fromCache?s.reject(new Di(Ri.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?s.reject(new Di(Ri.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(o)},error:e=>s.reject(e)}),a=new Xh(Rl(n.path),i,{includeMetadataChanges:!0,qa:!0});return Bh(e,a)}(await qf(e),e.asyncQueue,t,n,r)),r.promise}function Hf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new Oi;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,s){const i=new Af({next:n=>{i.Nu(),t.enqueueAndForget(()=>Hh(e,a)),n.fromCache&&"server"===r.source?s.reject(new Di(Ri.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):s.resolve(n)},error:e=>s.reject(e)}),a=new Xh(n,i,{includeMetadataChanges:!0,qa:!0});return Bh(e,a)}(await qf(e),e.asyncQueue,t,n,r)),r.promise}function Gf(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Wf=new Map,Kf="firestore.googleapis.com",Qf=!0;class Yf{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new Di(Ri.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Kf,this.ssl=Qf}else this.host=e.host,this.ssl=null!==(t=e.ssl)&&void 0!==t?t:Qf;if(this.isUsingEmulator=void 0!==e.emulatorOptions,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=Yu;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<Zu)throw new Di(Ri.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}(function(e,t,n,r){if(!0===t&&!0===r)throw new Di(Ri.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))})("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Gf(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new Di(Ri.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new Di(Ri.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new Di(Ri.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Xf{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Yf({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Di(Ri.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Di(Ri.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Yf(e),this._emulatorOptions=e.emulatorOptions||{},void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new Mi;switch(e.type){case"firstParty":return new zi(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new Di(Ri.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Wf.get(e);t&&(ki("ComponentProvider","Removing Datastore"),Wf.delete(e),t.terminate())}(this),Promise.resolve()}}function Jf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};e=ca(e,Xf);const s=N(t),i=e._getSettings(),a=u(u({},i),{},{emulatorOptions:e._getEmulatorOptions()}),o="".concat(t,":").concat(n);s&&(S("https://".concat(o)),_("Firestore",!0)),i.host!==Kf&&i.host!==o&&Ti("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=u(u({},i),{},{host:o,ssl:s,emulatorOptions:r});if(!D(l,a)&&(e._setSettings(l),r.mockUserToken)){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=xi.MOCK_USER;else{var c;t=function(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const i=u({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[m(JSON.stringify({alg:"none",type:"JWT"})),m(JSON.stringify(i)),""].join(".")}(r.mockUserToken,null===(c=e._app)||void 0===c?void 0:c.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new Di(Ri.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new xi(s)}e._authCredentials=new Fi(new Li(t,n))}}class $f{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new $f(this.firestore,e,this._query)}}class Zf{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new em(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Zf(this.firestore,e,this._key)}toJSON(){return{type:Zf._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,n){if(da(t,Zf._jsonSchema))return new Zf(e,n||null,new ra(ea.fromString(t.referencePath)))}}Zf._jsonSchemaVersion="firestore/documentReference/1.0",Zf._jsonSchema={type:ua("string",Zf._jsonSchemaVersion),referencePath:ua("string")};class em extends $f{constructor(e,t,n){super(e,t,Rl(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Zf(this.firestore,null,new ra(e))}withConverter(e){return new em(this.firestore,e,this._path)}}function tm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=z(e),sa("collection","path",t),e instanceof Xf){const n=ea.fromString(t,...r);return aa(n),new em(e,null,n)}{if(!(e instanceof Zf||e instanceof em))throw new Di(Ri.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ea.fromString(t,...r));return aa(n),new em(e.firestore,null,n)}}function nm(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),s=2;s<n;s++)r[s-2]=arguments[s];if(e=z(e),1===arguments.length&&(t=Gi.newId()),sa("doc","path",t),e instanceof Xf){const n=ea.fromString(t,...r);return ia(n),new Zf(e,null,new ra(n))}{if(!(e instanceof Zf||e instanceof em))throw new Di(Ri.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(ea.fromString(t,...r));return ia(n),new Zf(e.firestore,e instanceof em?e.converter:null,new ra(n))}}const rm="AsyncQueue";class sm{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new Xd(this,"async_queue_retry"),this._c=()=>{const e=Qd();e&&ki(rm,"Visibility state changed to "+e.visibilityState),this.M_.w_()},this.ac=e;const t=Qd();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Qd();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const t=new Oi;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(0!==this.Xu.length){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Ta(e))throw e;ki(rm,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const t=this.ac.then(()=>(this.rc=!0,e().catch(e=>{throw this.nc=e,this.rc=!1,_i("INTERNAL UNHANDLED ERROR: ",im(e)),e}).then(e=>(this.rc=!1,e))));return this.ac=t,t}enqueueAfterDelay(e,t,n){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const r=Oh.createAndSchedule(this,e,t,n,e=>this.hc(e));return this.tc.push(r),r}uc(){this.nc&&Ii(47125,{Pc:im(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do{e=this.ac,await e}while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.tc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function im(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}function am(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class om extends Xf{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new sm,this._persistenceKey=(null===r||void 0===r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new sm(e),this._firestoreClient=void 0,await e}}}function lm(e){if(e._terminated)throw new Di(Ri.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||cm(e),e._firestoreClient}function cm(e){var t,n,r;const s=e._freezeSettings(),i=function(e,t,n,r){return new Io(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,Gf(r.experimentalLongPollingOptions),r.useFetchStreams,r.isUsingEmulator)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||null!==(n=s.localCache)&&void 0!==n&&n._offlineComponentProvider&&null!==(r=s.localCache)&&void 0!==r&&r._onlineComponentProvider&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new Of(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(e){const t=null===e||void 0===e?void 0:e._online.build();return{_offline:null===e||void 0===e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}class um{constructor(e){this._byteString=e}static fromBase64String(e){try{return new um(yo.fromBase64String(e))}catch(e){throw new Di(Ri.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new um(yo.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:um._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(da(e,um._jsonSchema))return um.fromBase64String(e.bytes)}}um._jsonSchemaVersion="firestore/bytes/1.0",um._jsonSchema={type:ua("string",um._jsonSchemaVersion),bytes:ua("string")};class dm{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new Di(Ri.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new na(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class hm{constructor(e){this._methodName=e}}class fm{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Di(Ri.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Di(Ri.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Wi(this._lat,e._lat)||Wi(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:fm._jsonSchemaVersion}}static fromJSON(e){if(da(e,fm._jsonSchema))return new fm(e.latitude,e.longitude)}}fm._jsonSchemaVersion="firestore/geoPoint/1.0",fm._jsonSchema={type:ua("string",fm._jsonSchemaVersion),latitude:ua("number"),longitude:ua("number")};class mm{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}toJSON(){return{type:mm._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(da(e,mm._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(e=>"number"==typeof e))return new mm(e.vectorValues);throw new Di(Ri.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}mm._jsonSchemaVersion="firestore/vectorValue/1.0",mm._jsonSchema={type:ua("string",mm._jsonSchemaVersion),vectorValues:ua("object")};const pm=/^__.*__$/;class gm{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Dc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Rc(e,this.data,t,this.fieldTransforms)}}class ym{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Dc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function vm(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ii(40011,{Ac:e})}}class bm{constructor(e,t,n,r,s,i){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===s&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=i||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new bm(u(u({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Om(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(0===e.length)throw this.Sc("Document fields must not be empty");if(vm(this.Ac)&&pm.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class wm{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Yd(e)}Cc(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new bm({Ac:e,methodName:t,Dc:n,path:na.emptyPath(),fc:!1,bc:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xm(e){const t=e._freezeSettings(),n=Yd(e._databaseId);return new wm(e._databaseId,!!t.ignoreUndefinedProperties,n)}function Nm(e,t,n,r,s){let i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.Cc(i.merge||i.mergeFields?2:0,t,n,s);Am("Data must be an object, but it was:",a,r);const o=Im(r,a);let l,c;if(i.merge)l=new po(a.fieldMask),c=a.fieldTransforms;else if(i.mergeFields){const e=[];for(const r of i.mergeFields){const s=Pm(t,r,n);if(!a.contains(s))throw new Di(Ri.INVALID_ARGUMENT,"Field '".concat(s,"' is specified in your field mask but missing from your input data."));Lm(e,s)||e.push(s)}l=new po(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new gm(new tl(o),l,c)}class Sm extends hm{_toFieldTransform(e){if(2!==e.Ac)throw 1===e.Ac?e.Sc("".concat(this._methodName,"() can only appear at the top level of your update data")):e.Sc("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sm}}class Em extends hm{_toFieldTransform(e){return new Sc(e.path,new pc)}isEqual(e){return e instanceof Em}}function km(e,t,n,r){const s=e.Cc(1,t,n);Am("Data must be an object, but it was:",s,r);const i=[],a=tl.empty();oo(r,(e,r)=>{const o=Dm(t,e,n);r=z(r);const l=s.yc(o);if(r instanceof Sm)i.push(o);else{const e=Cm(r,l);null!=e&&(i.push(o),a.set(o,e))}});const o=new po(i);return new ym(a,o,s.fieldTransforms)}function _m(e,t,n,r,s,i){const a=e.Cc(1,t,n),o=[Pm(t,r,n)],l=[s];if(i.length%2!=0)throw new Di(Ri.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let h=0;h<i.length;h+=2)o.push(Pm(t,i[h])),l.push(i[h+1]);const c=[],u=tl.empty();for(let h=o.length-1;h>=0;--h)if(!Lm(c,o[h])){const e=o[h];let t=l[h];t=z(t);const n=a.yc(e);if(t instanceof Sm)c.push(e);else{const r=Cm(t,n);null!=r&&(c.push(e),u.set(e,r))}}const d=new po(c);return new ym(u,d,a.fieldTransforms)}function Tm(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Cm(n,e.Cc(r?4:3,t))}function Cm(e,t){if(jm(e=z(e)))return Am("Unsupported field value:",t,e),Im(e,t);if(e instanceof hm)return function(e,t){if(!vm(t.Ac))throw t.Sc("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.Sc("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.fc&&4!==t.Ac)throw t.Sc("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const s of e){let e=Cm(s,t.wc(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=z(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return uc(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=ma.fromDate(e);return{timestampValue:pu(t.serializer,n)}}if(e instanceof ma){const n=new ma(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:pu(t.serializer,n)}}if(e instanceof fm)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof um)return{bytesValue:gu(t.serializer,e._byteString)};if(e instanceof Zf){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.Sc("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:bu(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof mm)return function(e,t){return{mapValue:{fields:{[Po]:{stringValue:Oo},[Lo]:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.Sc("VectorValues must only contain numeric values.");return lc(t.serializer,e)})}}}}}}(e,t);throw t.Sc("Unsupported field value: ".concat(la(e)))}(e,t)}function Im(e,t){const n={};return lo(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):oo(e,(e,r)=>{const s=Cm(r,t.mc(e));null!=s&&(n[e]=s)}),{mapValue:{fields:n}}}function jm(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof ma||e instanceof fm||e instanceof um||e instanceof Zf||e instanceof hm||e instanceof mm)}function Am(e,t,n){if(!jm(n)||!oa(n)){const r=la(n);throw"an object"===r?t.Sc(e+" a custom object"):t.Sc(e+" "+r)}}function Pm(e,t,n){if((t=z(t))instanceof dm)return t._internalPath;if("string"==typeof t)return Dm(e,t);throw Om("Field path arguments must be of type string or ",e,!1,void 0,n)}const Rm=new RegExp("[~\\*/\\[\\]]");function Dm(e,t,n){if(t.search(Rm)>=0)throw Om("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new dm(...t.split("."))._internalPath}catch(r){throw Om("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function Om(e,t,n,r,s){const i=r&&!r.isEmpty(),a=void 0!==s;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(i||a)&&(l+=" (found",i&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(s)),l+=")"),new Di(Ri.INVALID_ARGUMENT,o+e+l)}function Lm(e,t){return e.some(e=>e.isEqual(t))}class Mm{constructor(e,t,n,r,s){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Zf(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new Fm(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(Um("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class Fm extends Mm{data(){return super.data()}}function Um(e,t){return"string"==typeof t?Dm(e,t):t instanceof dm?t._internalPath:t._delegate._internalPath}function Vm(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new Di(Ri.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class zm{}class qm extends zm{}function Bm(e,t){let n=[];for(var r=arguments.length,s=new Array(r>2?r-2:0),i=2;i<r;i++)s[i-2]=arguments[i];t instanceof zm&&n.push(t),n=n.concat(s),function(e){const t=e.filter(e=>e instanceof Wm).length,n=e.filter(e=>e instanceof Hm).length;if(t>1||t>0&&n>0)throw new Di(Ri.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class Hm extends qm{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new Hm(e,t,n)}_apply(e){const t=this._parse(e);return Xm(e._query,t),new $f(e.firestore,e.converter,Ul(e._query,t))}_parse(e){const t=xm(e.firestore),n=function(e,t,n,r,s,i,a){let o;if(s.isKeyField()){if("array-contains"===i||"array-contains-any"===i)throw new Di(Ri.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(i,"' queries on documentId()."));if("in"===i||"not-in"===i){Ym(a,i);const t=[];for(const n of a)t.push(Qm(r,e,n));o={arrayValue:{values:t}}}else o=Qm(r,e,a)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||Ym(a,i),o=Tm(n,t,a,"in"===i||"not-in"===i);return ul.create(s,i,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function Gm(e,t,n){const r=t,s=Um("where",e);return Hm._create(s,r,n)}class Wm extends zm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Wm(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:dl.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const s of r)Xm(n,s),n=Ul(n,s)}(e._query,t),new $f(e.firestore,e.converter,Ul(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Km extends qm{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Km(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new Di(Ri.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new Di(Ri.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new ol(t,n)}(e._query,this._field,this._direction);return new $f(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Al(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function Qm(e,t,n){if("string"==typeof(n=z(n))){if(""===n)throw new Di(Ri.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Ol(t)&&-1!==n.indexOf("/"))throw new Di(Ri.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(ea.fromString(n));if(!ra.isDocumentKey(r))throw new Di(Ri.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Wo(e,new ra(r))}if(n instanceof Zf)return Wo(e,n._key);throw new Di(Ri.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(la(n),"."))}function Ym(e,t){if(!Array.isArray(e)||0===e.length)throw new Di(Ri.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function Xm(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new Di(Ri.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new Di(Ri.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}class Jm{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Mo(e)){case 0:return null;case 1:return e.booleanValue;case 2:return wo(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(xo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ii(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return oo(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t;const n=null===(t=e.fields)||void 0===t||null===(t=t[Lo].arrayValue)||void 0===t||null===(t=t.values)||void 0===t?void 0:t.map(e=>wo(e.doubleValue));return new mm(n)}convertGeoPoint(e){return new fm(wo(e.latitude),wo(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=To(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Co(e));default:return null}}convertTimestamp(e){const t=bo(e);return new ma(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=ea.fromString(e);Ai(zu(n),9688,{name:e});const r=new Ao(n.get(1),n.get(3)),s=new ra(n.popFirst(5));return r.isEqual(t)||_i("Document ".concat(s," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),s}}function $m(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Zm extends Jm{constructor(e){super(),this.firestore=e}convertBytes(e){return new um(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zf(this.firestore,null,t)}}class ep{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class tp extends Mm{constructor(e,t,n,r,s,i){super(e,t,n,r,i),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new np(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(Um("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Di(Ri.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=tp._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),e&&e.isValidDocument()&&e.isFoundDocument()?(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t):t}}tp._jsonSchemaVersion="firestore/documentSnapshot/1.0",tp._jsonSchema={type:ua("string",tp._jsonSchemaVersion),bundleSource:ua("string","DocumentSnapshot"),bundleName:ua("string"),bundle:ua("string")};class np extends tp{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class rp{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new ep(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new np(this._firestore,this._userDataWriter,n.key,n,new ep(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Di(Ri.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new np(e._firestore,e._userDataWriter,n.doc.key,n.doc,new ep(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new np(e._firestore,e._userDataWriter,t.doc.key,t.doc,new ep(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let s=-1,i=-1;return 0!==t.type&&(s=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),i=n.indexOf(t.doc.key)),{type:sp(t.type),doc:r,oldIndex:s,newIndex:i}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Di(Ri.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=rp._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Gi.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],n=[],r=[];return this.docs.forEach(e=>{null!==e._document&&(t.push(e._document),n.push(this._userDataWriter.convertObjectMap(e._document.data.value.mapValue.fields,"previous")),r.push(e.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function sp(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ii(61501,{type:e})}}function ip(e){e=ca(e,Zf);const t=ca(e.firestore,om);return Bf(lm(t),e._key).then(n=>fp(t,e,n))}rp._jsonSchemaVersion="firestore/querySnapshot/1.0",rp._jsonSchema={type:ua("string",rp._jsonSchemaVersion),bundleSource:ua("string","QuerySnapshot"),bundleName:ua("string"),bundle:ua("string")};class ap extends Jm{constructor(e){super(),this.firestore=e}convertBytes(e){return new um(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Zf(this.firestore,null,t)}}function op(e){e=ca(e,$f);const t=ca(e.firestore,om),n=lm(t),r=new ap(t);return Vm(e._query),Hf(n,e._query).then(n=>new rp(t,r,e,n))}function lp(e,t,n){e=ca(e,Zf);const r=ca(e.firestore,om),s=xm(r);let i;for(var a=arguments.length,o=new Array(a>3?a-3:0),l=3;l<a;l++)o[l-3]=arguments[l];return i="string"==typeof(t=z(t))||t instanceof dm?_m(s,"updateDoc",e._key,t,n,o):km(s,"updateDoc",e._key,t),hp(r,[i.toMutation(e._key,kc.exists(!0))])}function cp(e){return hp(ca(e.firestore,om),[new Fc(e._key,kc.none())])}function up(e,t){const n=ca(e.firestore,om),r=nm(e),s=$m(e.converter,t);return hp(n,[Nm(xm(e.firestore),"addDoc",r._key,s,null!==e.converter,{}).toMutation(r._key,kc.exists(!1))]).then(()=>r)}function dp(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];e=z(e);let s={includeMetadataChanges:!1,source:"default"},i=0;"object"!=typeof n[i]||am(n[i])||(s=n[i++]);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(am(n[i])){var o,l,c;const e=n[i];n[i]=null===(o=e.next)||void 0===o?void 0:o.bind(e),n[i+1]=null===(l=e.error)||void 0===l?void 0:l.bind(e),n[i+2]=null===(c=e.complete)||void 0===c?void 0:c.bind(e)}let u,d,h;if(e instanceof Zf)d=ca(e.firestore,om),h=Rl(e._key.path),u={next:t=>{n[i]&&n[i](fp(d,e,t))},error:n[i+1],complete:n[i+2]};else{const t=ca(e,$f);d=ca(t.firestore,om),h=t._query;const r=new ap(d);u={next:e=>{n[i]&&n[i](new rp(d,r,t,e))},error:n[i+1],complete:n[i+2]},Vm(e._query)}return function(e,t,n,r){const s=new Af(r),i=new Xh(t,s,n);return e.asyncQueue.enqueueAndForget(async()=>Bh(await qf(e),i)),()=>{s.Nu(),e.asyncQueue.enqueueAndForget(async()=>Hh(await qf(e),i))}}(lm(d),h,a,u)}function hp(e,t){return function(e,t){const n=new Oi;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=Tf(e);try{const e=await function(e,t){const n=Pi(e),r=ma.now(),s=t.reduce((e,t)=>e.add(t.key),ic());let i,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=Xl(),l=ic();return n.Ns.getEntries(e,s).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(s=>{i=s;const a=[];for(const e of t){const t=Ac(e,i.get(e.key).overlayedDocument);null!=t&&a.push(new Dc(e.key,t,nl(t.value.mapValue),kc.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(i,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:Zl(i)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.Vu[e.currentUser.toKey()];r||(r=new co(Wi)),r=r.insert(t,n),e.Vu[e.currentUser.toKey()]=r}(r,e.batchId,n),await Sf(r,e.changes),await Nh(r.remoteStore)}catch(e){const t=Lh(e,"Failed to persist write");n.reject(t)}}(await Vf(e),t,n)),n.promise}(lm(e),t)}function fp(e,t,n){const r=n.docs.get(t._key),s=new ap(e);return new tp(e,s,t._key,r,new ep(n.hasPendingWrites,n.fromCache),t.converter)}const mp={maxAttempts:5};function pp(e,t){if((e=z(e)).firestore!==t)throw new Di(Ri.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class gp{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=xm(e)}get(e){const t=pp(e,this._firestore),n=new Zm(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return Ii(24041);const r=e[0];if(r.isFoundDocument())return new Mm(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new Mm(this._firestore,n,t._key,null,t.converter);throw Ii(18433,{doc:r})})}set(e,t,n){const r=pp(e,this._firestore),s=$m(r.converter,t,n),i=Nm(this._dataReader,"Transaction.set",r._key,s,null!==r.converter,n);return this._transaction.set(r._key,i),this}update(e,t,n){const r=pp(e,this._firestore);let s;for(var i=arguments.length,a=new Array(i>3?i-3:0),o=3;o<i;o++)a[o-3]=arguments[o];return s="string"==typeof(t=z(t))||t instanceof dm?_m(this._dataReader,"Transaction.update",r._key,t,n,a):km(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,s),this}delete(e){const t=pp(e,this._firestore);return this._transaction.delete(t._key),this}}class yp extends gp{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=pp(e,this._firestore),n=new ap(this._firestore);return super.get(e).then(e=>new tp(this._firestore,n,t._key,e._document,new ep(!1,!1),t.converter))}}function vp(e,t,n){e=ca(e,om);const r=u(u({},mp),n);return function(e){if(e.maxAttempts<1)throw new Di(Ri.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new Oi;return e.asyncQueue.enqueueAndForget(async()=>{const s=await zf(e);new Rf(e.asyncQueue,s,n,t,r).ju()}),r.promise}(lm(e),n=>t(new yp(e,n)),r)}function bp(){return new Em("serverTimestamp")}new WeakMap;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){Ni=e}(nt),Je(new q("firestore",(e,n)=>{let{instanceIdentifier:r,options:s}=n;const i=e.getProvider("app").getImmediate(),a=new om(new Ui(e.getProvider("auth-internal")),new Bi(i,e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new Di(Ri.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ao(e.options.projectId,t)}(i,r),i);return s=u({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),at(bi,wi,e),at(bi,wi,"esm2020")}();var wp=n(579);const xp=["id"],Np={apiKey:"AIzaSyAAo5Pz5EVVexUxUy3TOY08BG2ieV72RU4",authDomain:"store-room-information.firebaseapp.com",projectId:"store-room-information",storageBucket:"store-room-information.firebasestorage.app",messagingSenderId:"161322471803",appId:"1:161322471803:web:7cca31385a01fcd398edde",measurementId:"G-TSS4RLVXVM"},Sp=rt(Np),Ep=ri(Sp),kp=function(e,t){const n="object"==typeof e?e:st(),r="string"==typeof e?e:t||jo,s=$e(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const e=(e=>{const t=v(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]})("firestore");e&&Jf(s,...e)}return s}(Sp);function _p(){const[e,t]=(0,r.useState)(null),[n,s]=(0,r.useState)(null),[i,a]=(0,r.useState)(!0),[o,l]=(0,r.useState)("");(0,r.useEffect)(()=>{const e=(e,t,n)=>{if(document.getElementById(t))n&&n();else{const r=document.createElement("script");r.src=e,r.id=t,r.onload=()=>{n&&n()},document.head.appendChild(r)}};e("https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js","jspdf-script",()=>{e("https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js","jspdf-autotable-script")}),e("https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js","xlsx-script")},[]);const c=async()=>{a(!0);try{await function(e){return z(e).signOut()}(Ep)}catch(o){console.error("Logout Error:",o),l("Failed to log out.")}finally{t(null),s(null),a(!1)}};(0,r.useEffect)(()=>{const e=function(e,t,n,r){return z(e).onAuthStateChanged(t,n,r)}(Ep,async e=>{if(e){const n=nm(kp,"users",e.uid),r=await ip(n);r.exists()?(s(r.data().role),t(e)):(l("Your user role is not configured. Please contact an administrator."),c())}else t(null),s(null);a(!1)});return()=>e()},[]);const u=async(e,t)=>{l(""),a(!0);const n="".concat(e,"@gmail.com");try{await function(e,t,n){return Ze(e.app)?Promise.reject(Ct(e)):kr(z(e),ur.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Tr(e),t})}(Ep,n,t)}catch(o){l("Failed to login. Please check your username and password."),console.error("Login Error:",o),a(!1)}};if(i)return(0,wp.jsx)("div",{className:"flex items-center justify-center h-screen bg-gray-100",children:(0,wp.jsx)("div",{className:"text-xl font-semibold",children:"Loading..."})});return(0,wp.jsxs)("div",{className:"h-screen bg-gray-50",children:[(0,wp.jsx)("div",{id:"recaptcha-container",style:{display:"none"}}),(()=>{switch(n){case"master":return(0,wp.jsx)(Mp,{user:e,userRole:n,onLogout:c});case"caseworker":return(0,wp.jsx)(Fp,{user:e,userRole:n,onLogout:c});case"approver":return(0,wp.jsx)(Jp,{user:e,userRole:n,onLogout:c});case"consumer":return(0,wp.jsx)(ng,{user:e,userRole:n,onLogout:c});default:return e?(0,wp.jsxs)("div",{className:"flex flex-col items-center justify-center h-screen bg-gray-100",children:[(0,wp.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Authorization Pending"}),(0,wp.jsx)("p",{className:"mb-4 text-center",children:o||"Your account role is being set up. This should be quick."}),(0,wp.jsx)("button",{onClick:c,className:"px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600",children:"Logout"})]}):(0,wp.jsx)(Cp,{onLogin:u,error:o})}})()]})}const Tp=e=>{let{visible:t,onClick:n}=e;return(0,wp.jsx)("div",{className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:(0,wp.jsx)("button",{type:"button",onClick:n,className:"p-1",children:t?(0,wp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",viewBox:"0 0 20 20",fill:"currentColor",children:[(0,wp.jsx)("path",{d:"M10 12a2 2 0 100-4 2 2 0 000 4z"}),(0,wp.jsx)("path",{fillRule:"evenodd",d:"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.022 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z",clipRule:"evenodd"})]}):(0,wp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,wp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0110 19c-4.478 0-8.268-2.943-9.542-7 .946-3.118 3.544-5.473 6.836-6.234M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,wp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.066 6.934A10.009 10.009 0 0110 3c4.478 0 8.268 2.943 9.542 7a9.982 9.982 0 01-1.42 2.994M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,wp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2 2l20 20"})]})})})};function Cp(e){let{onLogin:t,error:n}=e;const[s,i]=(0,r.useState)(""),[a,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(!1),m=(0,r.useRef)(null);(0,r.useEffect)(()=>(m.current&&clearTimeout(m.current),""!==s.trim()?m.current=setTimeout(async()=>{try{const e=Bm(tm(kp,"users"),Gm("uniqueId","==",s.trim())),t=await op(e);if(t.empty)o("");else{const e=t.docs[0].data();e.email&&o(e.email.split("@")[0])}}catch(e){console.error("Error fetching user by UID:",e)}},300):o(""),()=>{m.current&&clearTimeout(m.current)}),[s]);return(0,wp.jsxs)("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:[(0,wp.jsxs)("div",{className:"w-full max-w-md p-8 space-y-6 bg-white rounded-lg shadow-md",children:[(0,wp.jsx)("h2",{className:"text-3xl font-bold text-center text-gray-900",children:"Sign In"}),(0,wp.jsxs)("form",{className:"space-y-6",onSubmit:e=>{e.preventDefault(),t(a,l)},children:[(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{htmlFor:"uniqueId",className:"text-sm font-medium text-gray-700",children:"Unique ID"}),(0,wp.jsx)("input",{id:"uniqueId",name:"uniqueId",type:"text",value:s,onChange:e=>i(e.target.value),className:"w-full px-3 py-2 mt-1 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your UID"})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{htmlFor:"username",className:"text-sm font-medium text-gray-700",children:"Username"}),(0,wp.jsx)("input",{id:"username",name:"username",type:"text",autoComplete:"username",required:!0,value:a,onChange:e=>o(e.target.value),className:"w-full px-3 py-2 mt-1 border border-gray-300 rounded-md placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"your-username"})]}),(0,wp.jsxs)("div",{className:"relative",children:[(0,wp.jsx)("label",{htmlFor:"password",className:"text-sm font-medium text-gray-700",children:"Password"}),(0,wp.jsxs)("div",{className:"relative mt-1",children:[(0,wp.jsx)("input",{id:"password",name:"password",type:u?"text":"password",required:!0,value:l,onChange:e=>c(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm placeholder-gray-400 focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 pr-12",placeholder:"\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022"}),(0,wp.jsx)(Tp,{visible:u,onClick:()=>d(!u)})]})]}),(0,wp.jsx)("div",{className:"flex items-center justify-between",children:(0,wp.jsx)("div",{className:"text-sm",children:(0,wp.jsx)("button",{type:"button",onClick:()=>f(!0),className:"font-medium text-indigo-600 hover:text-indigo-500",children:"Forgot your password?"})})}),n&&(0,wp.jsx)("p",{className:"text-sm text-red-600 text-center",children:n}),(0,wp.jsx)("div",{children:(0,wp.jsx)("button",{type:"submit",className:"w-full px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Sign In"})})]})]}),h&&(0,wp.jsx)(Ip,{onClose:()=>f(!1)})]})}function Ip(e){let{onClose:t}=e;const[n,s]=(0,r.useState)(1),[i,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[f,m]=(0,r.useState)(""),[p,g]=(0,r.useState)(""),[y,v]=(0,r.useState)(""),[b,w]=(0,r.useState)(null),[x,N]=(0,r.useState)(""),[S,E]=(0,r.useState)(""),[,k]=(0,r.useState)(null);return(0,wp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,wp.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl w-full max-w-md",children:[(0,wp.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Reset Password"}),1===n&&(0,wp.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),a(""),l(!0);try{const e=Bm(tm(kp,"users"),Gm("uniqueId","==",c),Gm("email","==","".concat(d,"@gmail.com")),Gm("dateOfBirth","==",f),Gm("phoneNumber","==",p));if((await op(e)).empty)return a("The details provided do not match any user. Please check and try again."),void l(!1);window.recaptchaVerifier||(window.recaptchaVerifier=new os(Ep,"recaptcha-container",{size:"invisible",callback:e=>{}}));const t=window.recaptchaVerifier,n="+91".concat(p),r=await cs(Ep,n,t);w(r),s(2)}catch(t){console.error("Verification Error:",t),a("Failed to verify details or send OTP. Please ensure your phone number is correct and try again.")}finally{l(!1)}},className:"space-y-4",children:[(0,wp.jsx)("p",{className:"text-sm text-gray-600 text-center",children:"Enter your details to verify your identity."}),(0,wp.jsx)("input",{type:"text",placeholder:"Unique ID",value:c,onChange:e=>u(e.target.value),className:"w-full p-2 border rounded-md",required:!0}),(0,wp.jsx)("input",{type:"text",placeholder:"Username",value:d,onChange:e=>h(e.target.value),className:"w-full p-2 border rounded-md",required:!0}),(0,wp.jsx)("input",{type:"date",placeholder:"Date of Birth",value:f,onChange:e=>m(e.target.value),className:"w-full p-2 border rounded-md",required:!0}),(0,wp.jsx)("input",{type:"tel",placeholder:"10-Digit Phone Number",value:p,onChange:e=>g(e.target.value.replace(/\D/g,"")),className:"w-full p-2 border rounded-md",maxLength:"10",required:!0}),i&&(0,wp.jsx)("p",{className:"text-red-500 text-sm text-center",children:i}),(0,wp.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,wp.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-300 rounded-md hover:bg-gray-400",children:"Cancel"}),(0,wp.jsx)("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-400",children:o?"Verifying...":"Verify & Send OTP"})]})]}),2===n&&(0,wp.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),a(""),l(!0);try{await b.confirm(y),s(3)}catch(t){console.error("OTP Verification Error:",t),a("Invalid OTP. Please try again.")}finally{l(!1)}},className:"space-y-4",children:[(0,wp.jsx)("p",{className:"text-sm text-gray-600 text-center",children:"An OTP has been sent to your phone number."}),(0,wp.jsx)("input",{type:"text",placeholder:"Enter 6-Digit OTP",value:y,onChange:e=>v(e.target.value),className:"w-full p-2 border rounded-md",maxLength:"6",required:!0}),i&&(0,wp.jsx)("p",{className:"text-red-500 text-sm text-center",children:i}),(0,wp.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,wp.jsx)("button",{type:"button",onClick:()=>s(1),className:"px-4 py-2 bg-gray-300 rounded-md hover:bg-gray-400",children:"Back"}),(0,wp.jsx)("button",{type:"submit",disabled:o,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-400",children:o?"Verifying...":"Verify OTP"})]})]}),3===n&&(0,wp.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),alert("This final step requires a secure backend function (like Firebase Cloud Functions) to complete for security reasons. This functionality is mocked on the client-side."),t()},className:"space-y-4",children:[(0,wp.jsx)("p",{className:"text-sm text-gray-600 text-center",children:"Verification successful. Set your new password."}),(0,wp.jsx)("input",{type:"password",placeholder:"New Password",value:x,onChange:e=>N(e.target.value),className:"w-full p-2 border rounded-md",required:!0}),(0,wp.jsx)("input",{type:"password",placeholder:"Confirm New Password",value:S,onChange:e=>E(e.target.value),className:"w-full p-2 border rounded-md",required:!0}),i&&(0,wp.jsx)("p",{className:"text-red-500 text-sm text-center",children:i}),(0,wp.jsx)("div",{className:"flex justify-end gap-4 pt-4",children:(0,wp.jsx)("button",{type:"submit",disabled:o||x!==S,className:"w-full px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-400",children:"Reset Password"})})]})]})})}function jp(e){let{user:t,onClose:n}=e;const[s,i]=(0,r.useState)(1),[a,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)(!1),[h,f]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),[g,y]=(0,r.useState)(null),[v,b]=(0,r.useState)(""),[w,x]=(0,r.useState)("");(0,r.useEffect)(()=>{(async()=>{if(t){const e=nm(kp,"users",t.uid),n=await ip(e);n.exists()&&f(n.data().phoneNumber||"")}})()},[t]);return(0,wp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,wp.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl w-full max-w-md",children:[(0,wp.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Change Password"}),a&&(0,wp.jsx)("p",{className:"text-red-500 text-sm mb-4 text-center",children:a}),l&&(0,wp.jsx)("p",{className:"text-green-500 text-sm mb-4 text-center",children:l}),1===s&&(0,wp.jsxs)("div",{className:"space-y-4",children:[(0,wp.jsxs)("p",{className:"text-center",children:["An OTP will be sent to your registered phone number: ",(0,wp.jsxs)("strong",{children:["+91",h]})]}),(0,wp.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,wp.jsx)("button",{onClick:n,className:"px-4 py-2 bg-gray-300 rounded-md hover:bg-gray-400",children:"Cancel"}),(0,wp.jsx)("button",{onClick:async()=>{o(""),d(!0);try{window.recaptchaVerifier||(window.recaptchaVerifier=new os(Ep,"recaptcha-container",{size:"invisible"}));const e=window.recaptchaVerifier,t="+91".concat(h),n=await cs(Ep,t,e);y(n),i(2)}catch(e){console.error("Send OTP Error:",e),o("Failed to send OTP. Please try again.")}finally{d(!1)}},disabled:u||!h,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-400",children:u?"Sending...":"Send OTP"})]})]}),2===s&&(0,wp.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),o(""),d(!0);try{await g.confirm(m),i(3)}catch(t){console.error("OTP Verification Error:",t),o("Invalid OTP. Please try again.")}finally{d(!1)}},className:"space-y-4",children:[(0,wp.jsx)("input",{type:"text",placeholder:"Enter 6-Digit OTP",value:m,onChange:e=>p(e.target.value),className:"w-full p-2 border rounded-md",maxLength:"6",required:!0}),(0,wp.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,wp.jsx)("button",{type:"button",onClick:()=>i(1),className:"px-4 py-2 bg-gray-300 rounded-md hover:bg-gray-400",children:"Back"}),(0,wp.jsx)("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-400",children:u?"Verifying...":"Verify OTP"})]})]}),3===s&&(0,wp.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),v===w){o(""),c(""),d(!0);try{await function(e,t){return Cr(z(e),null,t)}(t,v),c("Password updated successfully!"),setTimeout(n,2e3)}catch(a){console.error("Password Change Error:",a),o("Failed to change password.")}finally{d(!1)}}else o("New passwords do not match.")},className:"space-y-4",children:[(0,wp.jsx)("input",{type:"password",placeholder:"New Password",value:v,onChange:e=>b(e.target.value),className:"w-full p-2 border rounded-md",required:!0}),(0,wp.jsx)("input",{type:"password",placeholder:"Confirm New Password",value:w,onChange:e=>x(e.target.value),className:"w-full p-2 border rounded-md",required:!0}),(0,wp.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,wp.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-300 rounded-md hover:bg-gray-400",children:"Cancel"}),(0,wp.jsx)("button",{type:"submit",disabled:u||v!==w,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-400",children:"Update Password"})]})]})]})})}function Ap(e){let{user:t,onClose:n}=e;const[s,i]=(0,r.useState)(""),[a,o]=(0,r.useState)(""),[l,c]=(0,r.useState)(""),[u,d]=(0,r.useState)("");return(0,wp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,wp.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl w-full max-w-md",children:[(0,wp.jsx)("h2",{className:"text-2xl font-bold mb-6",children:"Change Username"}),(0,wp.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),c(""),d(""),a.trim()&&!/\s/.test(a))if(t)try{const e=ur.credential(t.email,s);await _r(t,e);const r="".concat(a.trim(),"@gmail.com");await function(e,t){const n=z(e);return Ze(n.auth.app)?Promise.reject(Ct(n.auth)):Cr(n,t,null)}(t,r);const i=nm(kp,"users",t.uid);await lp(i,{email:r}),d("Username updated successfully!"),setTimeout(()=>{n()},2e3)}catch(l){console.error("Username Change Error:",l),"auth/wrong-password"===l.code?c("Incorrect password. Please try again."):"auth/email-already-in-use"===l.code?c("This username is already taken."):c("Failed to change username.")}else c("No user is signed in.");else c("Please enter a valid username without spaces.")},className:"space-y-4",children:[(0,wp.jsx)("input",{type:"password",placeholder:"Current Password",value:s,onChange:e=>i(e.target.value),className:"w-full p-2 border rounded-md",required:!0}),(0,wp.jsx)("input",{type:"text",placeholder:"New Username (no spaces)",value:a,onChange:e=>o(e.target.value),className:"w-full p-2 border rounded-md",required:!0}),l&&(0,wp.jsx)("p",{className:"text-red-500 text-sm",children:l}),u&&(0,wp.jsx)("p",{className:"text-green-500 text-sm",children:u}),(0,wp.jsxs)("div",{className:"flex justify-end gap-4 pt-4",children:[(0,wp.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-300 rounded-md hover:bg-gray-400",children:"Cancel"}),(0,wp.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Update Username"})]})]})]})})}function Pp(e){let{onConfirm:t,onCancel:n}=e;return(0,wp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,wp.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-xl w-full max-w-sm",children:[(0,wp.jsx)("h2",{className:"text-xl font-bold mb-4 text-center",children:"Confirm Logout"}),(0,wp.jsx)("p",{className:"text-center text-gray-600 mb-6",children:"Are you sure you want to log out?"}),(0,wp.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,wp.jsx)("button",{onClick:n,className:"px-6 py-2 bg-gray-300 rounded-md hover:bg-gray-400",children:"No"}),(0,wp.jsx)("button",{onClick:t,className:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700",children:"Yes, Logout"})]})]})})}const Rp=e=>{if(!e)return null;const[t,n,r]=e.split("-");return"".concat(r,"/").concat(n,"/").concat(t)};function Dp(e){let{user:t,userRole:n,onLogout:s}=e;const[i,a]=(0,r.useState)(!1),[o,l]=(0,r.useState)(!1),[c,u]=(0,r.useState)(!1),[d,h]=(0,r.useState)(!1),f=(0,r.useRef)(null);return(0,r.useEffect)(()=>{function e(e){f.current&&!f.current.contains(e.target)&&a(!1)}return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[f]),(0,wp.jsxs)("div",{className:"relative",ref:f,children:[(0,wp.jsx)("button",{onClick:()=>a(e=>!e),className:"p-2 rounded-full hover:bg-gray-200",title:"Settings",children:(0,wp.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,wp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),(0,wp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})}),i&&(0,wp.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-md shadow-lg z-50 py-1",children:["master"===n&&(0,wp.jsx)("button",{onClick:()=>{u(!0),a(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Change Username"}),(0,wp.jsx)("button",{onClick:()=>{l(!0),a(!1)},className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:"Change Password"}),(0,wp.jsx)("button",{onClick:()=>{h(!0),a(!1)},className:"block w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-100",children:"Logout"})]}),c&&(0,wp.jsx)(Ap,{user:t,onClose:()=>u(!1)}),o&&(0,wp.jsx)(jp,{user:t,onClose:()=>l(!1)}),d&&(0,wp.jsx)(Pp,{onConfirm:s,onCancel:()=>h(!1)})]})}function Op(e){let{onClose:t,onAddDesignation:n}=e;const[s,i]=(0,r.useState)("");return(0,wp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50",children:(0,wp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[(0,wp.jsx)("h2",{className:"text-2xl font-bold mb-4",children:"Add New Designation"}),(0,wp.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n(s),t()},children:[(0,wp.jsx)("input",{type:"text",value:s,onChange:e=>i(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md mb-4",placeholder:"Enter new designation",required:!0}),(0,wp.jsxs)("div",{className:"flex justify-end gap-4",children:[(0,wp.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 bg-gray-300 rounded-md hover:bg-gray-400",children:"Cancel"}),(0,wp.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Add"})]})]})]})})}function Lp(e){let{availableSections:t,selectedSections:n,onClose:s,onSave:i,onRenameSection:a,onAddSection:o}=e;const[l,c]=(0,r.useState)(n||[]),[u,d]=(0,r.useState)(null),[h,f]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),g=()=>{d(null),f("")},y=()=>{""!==h.trim()&&(a(u,h.trim()),d(null),f(""))};return(0,wp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,wp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-xl w-full max-w-md",children:[(0,wp.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Select & Manage Sections"}),(0,wp.jsxs)("div",{className:"flex gap-2 mb-4",children:[(0,wp.jsx)("input",{type:"text",value:m,onChange:e=>p(e.target.value),placeholder:"Add new section...",className:"flex-grow p-2 border border-gray-300 rounded-md"}),(0,wp.jsx)("button",{onClick:()=>{""!==m.trim()&&(o(m.trim()),p(""))},className:"px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",children:"Add"})]}),(0,wp.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto p-2 border rounded-md",children:t.map(e=>(0,wp.jsx)("div",{className:"flex items-center justify-between p-2 rounded-md hover:bg-gray-100",children:u===e.id?(0,wp.jsxs)("div",{className:"flex-grow flex items-center gap-2",children:[(0,wp.jsx)("input",{type:"text",value:h,onChange:e=>f(e.target.value),className:"flex-grow p-1 border border-gray-300 rounded-md"}),(0,wp.jsx)("button",{onClick:y,className:"p-1 text-green-600 hover:text-green-800",children:"\u2713"}),(0,wp.jsx)("button",{onClick:g,className:"p-1 text-red-600 hover:text-red-800",children:"\u2717"})]}):(0,wp.jsxs)(wp.Fragment,{children:[(0,wp.jsxs)("label",{className:"flex items-center space-x-2 flex-grow cursor-pointer",children:[(0,wp.jsx)("input",{type:"checkbox",checked:l.includes(e.name),onChange:()=>{return t=e.name,void c(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),(0,wp.jsx)("span",{children:e.name})]}),(0,wp.jsx)("button",{onClick:()=>(e=>{d(e.id),f(e.name)})(e),className:"p-1 text-gray-500 hover:text-gray-800",title:"Rename ".concat(e.name),children:(0,wp.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"http://www.w3.org/2000/svg",fill:"currentColor",children:(0,wp.jsx)("path",{d:"M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"})})})]})},e.id))}),(0,wp.jsxs)("div",{className:"flex justify-end gap-4 pt-6",children:[(0,wp.jsx)("button",{type:"button",onClick:s,className:"px-4 py-2 bg-gray-300 rounded-md hover:bg-gray-400",children:"Cancel"}),(0,wp.jsx)("button",{type:"button",onClick:()=>{i(l),s()},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Save Selected"})]})]})})}function Mp(e){let{user:t,userRole:n,onLogout:s}=e;const[i,a]=(0,r.useState)([]),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),[g,y]=(0,r.useState)(""),[v,b]=(0,r.useState)([]),[w,x]=(0,r.useState)(""),[N,S]=(0,r.useState)("consumer"),[E,k]=(0,r.useState)(""),[_,T]=(0,r.useState)(""),[C,I]=(0,r.useState)(!1),[j,A]=(0,r.useState)(!1),[P,R]=(0,r.useState)([]),[D,O]=(0,r.useState)(!1),[L,M]=(0,r.useState)(!1),[F,U]=(0,r.useState)(null),[V,z]=(0,r.useState)([]),[q,B]=(0,r.useState)(""),[H,G]=(0,r.useState)("Non-returnable"),[W,K]=(0,r.useState)("Non-Electronic"),[Q,Y]=(0,r.useState)(""),[X,J]=(0,r.useState)(""),[$,Z]=(0,r.useState)(null),[ee,te]=(0,r.useState)(null),[ne,re]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=tm(kp,"sections"),t=dp(Bm(e,function(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=Um("orderBy",e);return Km._create(n,t)}("name")),async t=>{if(t.empty){console.log("No sections found, initializing A-Z...");const t=vp(kp,async t=>{Array.from({length:26},(e,t)=>String.fromCharCode("A".charCodeAt(0)+t)).forEach(n=>{const r=nm(e);t.set(r,{name:n})})});await t}else{const e=t.docs.map(e=>u({id:e.id},e.data()));re(e)}});return()=>t()},[]),(0,r.useEffect)(()=>{const e=Q.split(",").map(e=>e.trim());e.length>1&&e[1]&&J(e[1])},[Q]),(0,r.useEffect)(()=>{const e=dp(tm(kp,"users"),e=>{const t=e.docs.map(e=>u({id:e.id},e.data())).filter(e=>"master"!==e.role);a(t)}),t=dp(tm(kp,"materials"),e=>{const t=e.docs.map(e=>u({id:e.id},e.data()));z(t)}),n=dp(tm(kp,"designations"),e=>{const t=e.docs.map(e=>u({id:e.id},e.data())),n=["First Division Assistant","Second Division Assistant","Shiristhedar (RHA)",...t.map(e=>e.name)],r=[...new Set(n)];R(r.map(e=>({name:e})))});return()=>{e(),t(),n()}},[]);const se=()=>{l(""),d(""),f(""),p(""),y(""),b([]),x(""),k(""),T(""),S("consumer"),U(null)},ie=()=>{B(""),G("Non-returnable"),K("Non-Electronic"),Y(""),J(""),Z(null)},ae=e=>{Z(e.id),B(e.name),G(e.type),K(e.info),Y(e.caseworkerUnit||""),J(e.consumerUnit||"")},oe=async e=>{try{await cp(nm(kp,"materials",e)),te(null)}catch(t){console.error("Error deleting material: ",t),alert("Failed to delete material.")}},le=V.filter(e=>"Returnable"===e.type),ce=V.filter(e=>"Returnable"!==e.type);return(0,wp.jsxs)("div",{className:"flex flex-col h-screen p-4 md:p-8",children:[(0,wp.jsxs)("header",{className:"flex-shrink-0 flex justify-between items-center mb-8",children:[(0,wp.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Master Portal"}),(0,wp.jsxs)("div",{className:"flex items-center gap-4",children:[(0,wp.jsx)("span",{className:"text-gray-600",children:t.email?t.email.split("@")[0]:""}),(0,wp.jsx)(Dp,{user:t,userRole:n,onLogout:s})]})]}),(0,wp.jsxs)("main",{className:"flex-grow grid grid-cols-1 lg:grid-cols-2 gap-8 overflow-hidden",children:[(0,wp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md flex flex-col",children:[(0,wp.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:F?"Edit User":"Create & Manage Users"}),(0,wp.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),10!==m.length)return void alert("Phone number must be exactly 10 digits.");if(F){const e={uniqueId:o,name:c,dateOfBirth:h,phoneNumber:m,designation:g,sections:v,role:N};try{const t=nm(kp,"users",F);await lp(t,e),alert("User details updated successfully."),se()}catch(i){console.error("Error updating user details:",i),alert("Failed to update user details.")}return}if("messenger"===N){try{await up(tm(kp,"users"),{uniqueId:o,name:c,designation:g,sections:v,role:"messenger",email:null}),alert("Messenger created successfully."),se()}catch(i){console.error("Error creating messenger:",i),alert("Failed to create messenger: ".concat(i.message))}return}if(10!==m.length)return void alert("Phone number must be exactly 10 digits.");if(/\s/.test(w))return void alert("Username cannot contain spaces.");if(E!==_)return void alert("Passwords do not match.");const t="".concat(w,"@gmail.com"),n="temp-app-".concat(Date.now()),r=rt(Np,n),s=ri(r);try{const e=await async function(e,t,n){if(Ze(e.app))return Promise.reject(Ct(e));const r=Ln(e),s=Yn(r,{returnSecureToken:!0,email:t,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",yr,"EMAIL_PASSWORD_PROVIDER"),i=await s.catch(t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Tr(e),t}),a=await vr._fromIdTokenResponse(r,"signIn",i);return await r._updateCurrentUser(a.user),a}(s,t,E),n=e.user;await function(e,t,n){e=ca(e,Zf);const r=ca(e.firestore,om),s=$m(e.converter,t,n);return hp(r,[Nm(xm(r),"setDoc",e._key,s,null!==e.converter,n).toMutation(e._key,kc.none())])}(nm(kp,"users",n.uid),{uniqueId:o,name:c,dateOfBirth:h,phoneNumber:m,designation:g,sections:v,email:t,role:N}),alert("User ".concat(w," created successfully.")),se()}catch(i){console.error("Error creating new user:",i),alert("Failed to create user: ".concat(i.message))}finally{await it(r)}},className:"space-y-6",children:[(0,wp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4",children:[(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Unique ID"}),(0,wp.jsx)("input",{type:"text",value:o,onChange:e=>l(e.target.value),className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",required:!0})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,wp.jsx)("input",{type:"text",value:c,onChange:e=>d(e.target.value),className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",required:!0})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Date of Birth"}),(0,wp.jsx)("input",{type:"date",value:h,onChange:e=>f(e.target.value),className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",required:!0})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),(0,wp.jsx)("input",{type:"text",value:m,onChange:e=>{const t=e.target.value.replace(/\D/g,"");t.length<=10&&p(t)},className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",placeholder:"10-digit number",required:!0})]}),(0,wp.jsxs)("div",{className:"md:col-span-2 grid md:grid-cols-3 gap-x-8 gap-y-4 items-end",children:[(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Designation"}),(0,wp.jsxs)("select",{value:g,onChange:e=>{"add-new"===e.target.value?(O(!0),y("")):y(e.target.value)},className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",required:!0,children:[(0,wp.jsx)("option",{value:"",children:"Select Designation"}),P.map((e,t)=>(0,wp.jsx)("option",{value:e.name,children:e.name},t)),(0,wp.jsx)("option",{value:"add-new",children:"Add New Designation..."})]})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Section"}),(0,wp.jsx)("div",{onClick:()=>M(!0),className:"mt-1 w-full p-2 border border-gray-300 rounded-md bg-white cursor-pointer min-h-[42px] flex items-center",children:v.length>0?(0,wp.jsx)("span",{className:"text-black",children:v.join(", ")}):(0,wp.jsx)("span",{className:"text-gray-500",children:"Select sections..."})})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Assign Role"}),(0,wp.jsxs)("select",{value:N,onChange:e=>S(e.target.value),className:"mt-1 block w-full p-2 border border-gray-300 rounded-md",children:[(0,wp.jsx)("option",{value:"consumer",children:"Consumer"}),(0,wp.jsx)("option",{value:"caseworker",children:"Caseworker"}),(0,wp.jsx)("option",{value:"approver",children:"Approver"}),(0,wp.jsx)("option",{value:"messenger",children:"Messenger"})]})]})]})]}),"messenger"!==N&&!F&&(0,wp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-x-8 gap-y-4 pt-2",children:[(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Username"}),(0,wp.jsx)("div",{className:"mt-1 relative",children:(0,wp.jsx)("input",{type:"text",value:w,onChange:e=>x(e.target.value),className:"block w-full p-2 border border-gray-300 rounded-md",placeholder:"No spaces allowed",required:!0})})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Set Password"}),(0,wp.jsxs)("div",{className:"mt-1 relative",children:[(0,wp.jsx)("input",{type:C?"text":"password",value:E,onChange:e=>k(e.target.value),className:"block w-full p-2 border border-gray-300 rounded-md pr-10",required:!0}),(0,wp.jsx)(Tp,{visible:C,onClick:()=>I(!C)})]})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Confirm Password"}),(0,wp.jsxs)("div",{className:"mt-1 relative",children:[(0,wp.jsx)("input",{type:j?"text":"password",value:_,onChange:e=>T(e.target.value),className:"block w-full p-2 border border-gray-300 rounded-md pr-10",required:!0}),(0,wp.jsx)(Tp,{visible:j,onClick:()=>A(!j)})]})]})]}),"messenger"!==N&&F&&(0,wp.jsxs)("div",{className:"pt-2",children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Username"}),(0,wp.jsx)("div",{className:"mt-1 relative",children:(0,wp.jsx)("input",{type:"text",value:w,readOnly:!0,className:"block w-full p-2 border border-gray-300 rounded-md bg-gray-100"})})]}),(0,wp.jsxs)("div",{className:"flex gap-4 pt-4",children:[F&&(0,wp.jsx)("button",{type:"button",onClick:se,className:"w-full py-2 px-4 bg-gray-500 text-white font-semibold rounded-md hover:bg-gray-600",children:"Cancel"}),(0,wp.jsx)("button",{type:"submit",className:"w-full py-2 px-4 bg-indigo-600 text-white font-semibold rounded-md hover:bg-indigo-700",children:F?"Update User":"Create User"})]})]}),(0,wp.jsx)("hr",{className:"my-6"}),(0,wp.jsx)("div",{className:"flex-grow overflow-y-auto max-h-96 border rounded-md",children:(0,wp.jsxs)("table",{className:"w-full text-left",children:[(0,wp.jsx)("thead",{className:"sticky top-0 bg-gray-100",children:(0,wp.jsxs)("tr",{className:"bg-gray-100",children:[(0,wp.jsx)("th",{className:"p-3 text-base font-semibold text-gray-600",children:"ID"}),(0,wp.jsx)("th",{className:"p-3 text-base font-semibold text-gray-600",children:"Name"}),(0,wp.jsx)("th",{className:"p-3 text-base font-semibold text-gray-600",children:"DOB"}),(0,wp.jsx)("th",{className:"p-3 text-base font-semibold text-gray-600",children:"Phone"}),(0,wp.jsx)("th",{className:"p-3 text-base font-semibold text-gray-600",children:"Designation"}),(0,wp.jsx)("th",{className:"p-3 text-base font-semibold text-gray-600",children:"Section"}),(0,wp.jsx)("th",{className:"p-3 text-base font-semibold text-gray-600",children:"Username"}),(0,wp.jsx)("th",{className:"p-3 text-base font-semibold text-gray-600",children:"Role"}),(0,wp.jsx)("th",{className:"p-3 text-base font-semibold text-gray-600",children:"Action"})]})}),(0,wp.jsxs)("tbody",{children:[i.map(e=>(0,wp.jsxs)("tr",{className:"border-b",children:[(0,wp.jsx)("td",{className:"p-3 text-sm",children:e.uniqueId||"N/A"}),(0,wp.jsx)("td",{className:"p-3 text-sm",children:e.name||"N/A"}),(0,wp.jsx)("td",{className:"p-3 text-sm",children:Rp(e.dateOfBirth)||"N/A"}),(0,wp.jsx)("td",{className:"p-3 text-sm",children:e.phoneNumber||"N/A"}),(0,wp.jsx)("td",{className:"p-3 text-sm",children:e.designation||"N/A"}),(0,wp.jsx)("td",{className:"p-3 text-sm",children:(e.sections||[]).join(", ")||"N/A"}),(0,wp.jsx)("td",{className:"p-3 text-sm",children:e.email?e.email.split("@")[0]:"N/A"}),(0,wp.jsx)("td",{className:"p-3 capitalize text-sm",children:e.role||"N/A"}),(0,wp.jsxs)("td",{className:"p-3 flex gap-2",children:[(0,wp.jsx)("button",{onClick:()=>{return U((t=e).id),l(t.uniqueId||""),d(t.name||""),f(t.dateOfBirth||""),p(t.phoneNumber||""),y(t.designation||""),b(t.sections||[]),x(t.email?t.email.split("@")[0]:""),void S(t.role||"consumer");var t},className:"text-sm px-2 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200",children:"Edit"}),(0,wp.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this user? This will remove their access permanently."))try{await cp(nm(kp,"users",e)),alert("User role and access have been removed.")}catch(t){console.error("Error deleting user role: ",t),alert("Failed to delete user role.")}})(e.id),className:"text-sm px-2 py-1 bg-red-100 text-red-700 rounded-md hover:bg-red-200",children:"Delete"})]})]},e.id)),0===i.length&&(0,wp.jsx)("tr",{children:(0,wp.jsx)("td",{colSpan:"9",className:"text-center p-8 text-gray-500",children:"No users found."})})]})]})})]}),(0,wp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md flex flex-col",children:[(0,wp.jsxs)("div",{className:"flex-shrink-0",children:[(0,wp.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:$?"Edit Material":"Add Material"}),(0,wp.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),!q||!Q||!X)return void alert("Please fill in all material details, including units.");const t={name:q,type:H,info:W,caseworkerUnit:Q,consumerUnit:X};if($)try{const e=nm(kp,"materials",$);await lp(e,t),alert("Material updated successfully."),ie()}catch(n){console.error("Error updating material: ",n),alert("Failed to update material.")}else try{await up(tm(kp,"materials"),t),ie()}catch(n){console.error("Error adding new material: ",n),alert("Failed to add material.")}},className:"space-y-4 p-4 border rounded-md",children:[(0,wp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Name"}),(0,wp.jsx)("input",{type:"text",value:q,onChange:e=>B(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",required:!0})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Type"}),(0,wp.jsxs)("select",{value:H,onChange:e=>G(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[(0,wp.jsx)("option",{children:"Non-returnable"}),(0,wp.jsx)("option",{children:"Returnable"})]})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material Information"}),(0,wp.jsxs)("select",{value:W,onChange:e=>K(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[(0,wp.jsx)("option",{children:"Non-Electronic"}),(0,wp.jsx)("option",{children:"Electronic"})]})]})]}),(0,wp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Caseworker Units"}),(0,wp.jsx)("input",{type:"text",placeholder:"e.g., Box, Rim",value:Q,onChange:e=>Y(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",required:!0})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Consumer Unit"}),(0,wp.jsx)("input",{type:"text",placeholder:"e.g., Rim",value:X,onChange:e=>J(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",required:!0})]})]}),(0,wp.jsxs)("div",{className:"flex gap-2 justify-end pt-2",children:[$&&(0,wp.jsx)("button",{type:"button",onClick:ie,className:"px-4 py-2 bg-gray-500 text-white font-semibold rounded-md hover:bg-gray-600",children:"Cancel"}),(0,wp.jsx)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 shrink-0",children:$?"Update Material":"Add Material"})]})]})]}),(0,wp.jsx)("hr",{className:"my-6 flex-shrink-0"}),(0,wp.jsxs)("div",{className:"flex flex-col flex-grow min-h-0",children:[(0,wp.jsx)("h2",{className:"text-2xl font-semibold mb-4 flex-shrink-0",children:"Manage Materials"}),(0,wp.jsxs)("div",{className:"grid grid-cols-2 gap-4 flex-grow min-h-0",children:[(0,wp.jsxs)("div",{className:"flex flex-col min-h-0",children:[(0,wp.jsx)("h3",{className:"font-semibold text-lg mb-2 flex-shrink-0",children:"Returnable Materials"}),(0,wp.jsx)("div",{className:"border rounded-md overflow-y-auto max-h-96",children:(0,wp.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,wp.jsx)("thead",{className:"sticky top-0 bg-gray-50",children:(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-2 font-semibold",children:"SL.NO"}),(0,wp.jsx)("th",{className:"p-2 font-semibold",children:"Name"}),(0,wp.jsx)("th",{className:"p-2 font-semibold",children:"Action"})]})}),(0,wp.jsxs)("tbody",{children:[le.map((e,t)=>(0,wp.jsxs)("tr",{className:"border-b last:border-b-0",children:[(0,wp.jsxs)("td",{className:"p-2",children:[t+1,"."]}),(0,wp.jsx)("td",{className:"p-2",children:e.name}),(0,wp.jsx)("td",{className:"p-2 flex gap-2",children:ee===e.id?(0,wp.jsxs)(wp.Fragment,{children:[(0,wp.jsx)("button",{onClick:()=>oe(e.id),className:"text-xs px-2 py-1 bg-red-500 text-white rounded-md hover:bg-red-600",children:"Confirm"}),(0,wp.jsx)("button",{onClick:()=>te(null),className:"text-xs px-2 py-1 bg-gray-300 rounded-md hover:bg-gray-400",children:"Cancel"})]}):(0,wp.jsxs)(wp.Fragment,{children:[(0,wp.jsx)("button",{onClick:()=>ae(e),className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200",children:"Edit"}),(0,wp.jsx)("button",{onClick:()=>te(e.id),className:"text-xs px-2 py-1 bg-red-100 text-red-700 rounded-md hover:bg-red-200",children:"Delete"})]})})]},e.id)),0===le.length&&(0,wp.jsx)("tr",{children:(0,wp.jsx)("td",{colSpan:"3",className:"p-4 text-center text-gray-500",children:"No returnable materials found."})})]})]})})]}),(0,wp.jsxs)("div",{className:"flex flex-col min-h-0",children:[(0,wp.jsx)("h3",{className:"font-semibold text-lg mb-2 flex-shrink-0",children:"Non-returnable Materials"}),(0,wp.jsx)("div",{className:"border rounded-md overflow-y-auto max-h-96",children:(0,wp.jsxs)("table",{className:"w-full text-sm text-left",children:[(0,wp.jsx)("thead",{className:"sticky top-0 bg-gray-50",children:(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-2 font-semibold",children:"SL.NO"}),(0,wp.jsx)("th",{className:"p-2 font-semibold",children:"Name"}),(0,wp.jsx)("th",{className:"p-2 font-semibold",children:"Action"})]})}),(0,wp.jsxs)("tbody",{children:[ce.map((e,t)=>(0,wp.jsxs)("tr",{className:"border-b last:border-b-0",children:[(0,wp.jsxs)("td",{className:"p-2",children:[t+1,"."]}),(0,wp.jsx)("td",{className:"p-2",children:e.name}),(0,wp.jsx)("td",{className:"p-2 flex gap-2",children:ee===e.id?(0,wp.jsxs)(wp.Fragment,{children:[(0,wp.jsx)("button",{onClick:()=>oe(e.id),className:"text-xs px-2 py-1 bg-red-500 text-white rounded-md hover:bg-red-600",children:"Confirm"}),(0,wp.jsx)("button",{onClick:()=>te(null),className:"text-xs px-2 py-1 bg-gray-300 rounded-md hover:bg-gray-400",children:"Cancel"})]}):(0,wp.jsxs)(wp.Fragment,{children:[(0,wp.jsx)("button",{onClick:()=>ae(e),className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200",children:"Edit"}),(0,wp.jsx)("button",{onClick:()=>te(e.id),className:"text-xs px-2 py-1 bg-red-100 text-red-700 rounded-md hover:bg-red-200",children:"Delete"})]})})]},e.id)),0===ce.length&&(0,wp.jsx)("tr",{children:(0,wp.jsx)("td",{colSpan:"3",className:"p-4 text-center text-gray-500",children:"No non-returnable materials found."})})]})]})})]})]})]})]})]}),D&&(0,wp.jsx)(Op,{onClose:()=>O(!1),onAddDesignation:async e=>{if(e)try{await up(tm(kp,"designations"),{name:e}),alert("Designation added successfully.")}catch(t){console.error("Error adding designation: ",t),alert("Failed to add designation.")}else alert("Please enter a designation name.")}}),L&&(0,wp.jsx)(Lp,{availableSections:ne,selectedSections:v,onClose:()=>M(!1),onSave:b,onRenameSection:async(e,t)=>{const n=ne.find(t=>t.id===e);if(!n)return;const r=n.name;if(ne.some(n=>n.name.toLowerCase()===t.toLowerCase()&&n.id!==e))return void alert('The section name "'.concat(t,'" already exists.'));const s=nm(kp,"sections",e);try{await lp(s,{name:t}),b(e=>e.map(e=>e===r?t:e))}catch(i){console.error("Error renaming section:",i),alert("Failed to rename the section.")}},onAddSection:async e=>{if(ne.some(t=>t.name.toLowerCase()===e.toLowerCase()))alert('The section name "'.concat(e,'" already exists.'));else try{await up(tm(kp,"sections"),{name:e})}catch(t){console.error("Error adding section:",t),alert("Failed to add the section. Please check Firestore rules.")}}})]})}function Fp(e){let{user:t,userRole:n,onLogout:s}=e;const[i,a]=(0,r.useState)("dataEntry"),o=e=>{let{tabId:t,children:n}=e;return(0,wp.jsx)("button",{onClick:()=>a(t),className:"px-3 py-2 text-sm font-medium rounded-md transition-all duration-200 ".concat(i===t?"bg-indigo-600 text-white shadow":"text-gray-600 hover:bg-gray-200"),children:n})};return(0,wp.jsxs)("div",{className:"flex flex-col h-screen p-4 md:p-8",children:[(0,wp.jsxs)("header",{className:"flex-shrink-0 flex flex-col md:flex-row justify-between items-center mb-6",children:[(0,wp.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-gray-800 mb-4 md:mb-0",children:"Caseworker Portal"}),(0,wp.jsxs)("div",{className:"flex items-center gap-4",children:[(0,wp.jsx)("span",{className:"text-gray-600 text-sm md:text-base",children:t.email?t.email.split("@")[0]:""}),(0,wp.jsx)(Dp,{user:t,userRole:n,onLogout:s})]})]}),(0,wp.jsxs)("nav",{className:"flex-shrink-0 mb-8 flex flex-wrap gap-2 p-2 bg-gray-100 rounded-lg",children:[(0,wp.jsx)(o,{tabId:"dataEntry",children:"Data Entry Form"}),(0,wp.jsx)(o,{tabId:"consumerHandover",children:"Consumer Handover"}),(0,wp.jsx)(o,{tabId:"consumerItems",children:"Consumer Items"}),(0,wp.jsx)(o,{tabId:"annualVerification",children:"Annual Verification Report"}),(0,wp.jsx)(o,{tabId:"rejectedCase",children:"Rejected Cases"}),(0,wp.jsx)(o,{tabId:"verificationHistory",children:"Verification History"}),(0,wp.jsx)(o,{tabId:"existingItems",children:"Existing Items"}),(0,wp.jsx)(o,{tabId:"reports",children:"Reports"})]}),(0,wp.jsx)("main",{className:"flex-grow overflow-hidden",children:(()=>{switch(i){case"dataEntry":default:return(0,wp.jsx)(Kp,{user:t});case"consumerHandover":return(0,wp.jsx)(Wp,{});case"consumerItems":return(0,wp.jsx)(Hp,{});case"annualVerification":return(0,wp.jsx)(qp,{user:t});case"rejectedCase":return(0,wp.jsx)(Bp,{});case"verificationHistory":return(0,wp.jsx)(zp,{});case"existingItems":return(0,wp.jsx)(Vp,{});case"reports":return(0,wp.jsx)(Up,{})}})()})]})}function Up(){const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)([]),[i,a]=(0,r.useState)([]),[o,l]=(0,r.useState)(new Map),[c,u]=(0,r.useState)(""),[d,h]=(0,r.useState)(""),[f,m]=(0,r.useState)(String((new Date).getMonth()+1).padStart(2,"0")),[p,g]=(0,r.useState)((new Date).getFullYear()),[y,v]=(0,r.useState)((new Date).getFullYear()),[b,w]=(0,r.useState)(!1),[x,N]=(0,r.useState)("dateReport");(0,r.useEffect)(()=>{const e=dp(tm(kp,"materials"),e=>{const t=new Map;e.docs.forEach(e=>{const n=e.data();t.set(n.name,n.consumerUnit||n.unit||"")}),l(t)});return()=>e()},[]);(0,r.useEffect)(()=>{"dateReport"===x?(async()=>{if(!c||!d)return void t([]);const e=new Date(c),n=new Date(d);n.setHours(23,59,59,999);const r=Bm(tm(kp,"approval_requests"),Gm("billDate",">=",c),Gm("billDate","<=",d)),s=await op(r),i=new Map;s.forEach(e=>{const t=e.data();"approved"!==t.status&&"partially-approved"!==t.status||t.items.forEach(e=>{if("approved"===e.status){const t=i.get(e.name)||0;i.set(e.name,t+parseInt(e.quantity,10))}})});const a=Bm(tm(kp,"distribution_requests"),Gm("submittedAt",">=",e),Gm("submittedAt","<=",n)),l=await op(a),u=new Map;l.forEach(e=>{e.data().items.forEach(e=>{if("collected"===e.status){const t=u.get(e.name)||0;u.set(e.name,t+parseInt(e.requiredQuantity,10))}})});const h=new Set([...i.keys(),...u.keys()]),f=Array.from(h).map(e=>{const t=i.get(e)||0,n=u.get(e)||0;return{name:e,totalPurchased:t,totalGiven:n,totalBalance:t-n,unit:o.get(e)||""}});t(f)})():"monthlyReport"===x?(async()=>{const e="".concat(p,"-").concat(f),[t,n]=e.split("-").map(Number),r=new Date(t,n-1,1),i=new Date(t,n,0);i.setHours(23,59,59,999);const a=tm(kp,"materials"),l=(await op(a)).docs.map(e=>e.data().name),c=Bm(tm(kp,"approval_requests"),Gm("billDate","<=",e+"-"+i.getDate())),u=await op(c),d=Bm(tm(kp,"distribution_requests"),Gm("submittedAt","<=",i)),h=await op(d),m=new Map;l.forEach(e=>{const t=o.get(e)||"";m.set(e,{name:e,purchasedLastMonth:0,purchasedThisMonth:0,givenLastMonth:0,givenThisMonth:0,balance:0,unit:t})}),u.forEach(e=>{const t=e.data();if("approved"===t.status||"partially-approved"===t.status){const e=new Date(t.billDate);t.items.forEach(t=>{if("approved"===t.status){const n=m.get(t.name);if(n){const s=parseInt(t.quantity,10)||0;e<r?n.purchasedLastMonth+=s:n.purchasedThisMonth+=s}}})}}),h.forEach(e=>{const t=e.data();if(t.submittedAt){const e=t.submittedAt.toDate();t.items.forEach(t=>{if("collected"===t.status){const n=m.get(t.name);if(n){const s=parseInt(t.requiredQuantity,10)||0;e<r?n.givenLastMonth+=s:n.givenThisMonth+=s}}})}});const g=Array.from(m.values()).map(e=>{const t=e.purchasedLastMonth+e.purchasedThisMonth,n=e.givenLastMonth+e.givenThisMonth;return e.balance=t-n,e}).filter(e=>0!==e.balance||e.purchasedThisMonth>0||e.givenThisMonth>0);s(g)})():"annualReport"===x&&(async()=>{const e=parseInt(y,10),t=new Date(e,0,1),n=new Date(e,11,31);n.setHours(23,59,59,999);const r=tm(kp,"materials"),s=(await op(r)).docs.map(e=>e.data().name),i=Bm(tm(kp,"approval_requests"),Gm("billDate","<=","".concat(e,"-12-31"))),l=await op(i),c=Bm(tm(kp,"distribution_requests"),Gm("submittedAt","<=",n)),u=await op(c),d=new Map;s.forEach(e=>{const t=o.get(e)||"";d.set(e,{name:e,purchasedLastYear:0,purchasedThisYear:0,givenLastYear:0,givenThisYear:0,balance:0,unit:t})}),l.forEach(e=>{const n=e.data();if("approved"===n.status||"partially-approved"===n.status){const e=new Date(n.billDate);n.items.forEach(n=>{if("approved"===n.status){const r=d.get(n.name);if(r){const s=parseInt(n.quantity,10)||0;e<t?r.purchasedLastYear+=s:r.purchasedThisYear+=s}}})}}),u.forEach(e=>{const n=e.data();if(n.submittedAt){const e=n.submittedAt.toDate();n.items.forEach(n=>{if("collected"===n.status){const r=d.get(n.name);if(r){const s=parseInt(n.requiredQuantity,10)||0;e<t?r.givenLastYear+=s:r.givenThisYear+=s}}})}});const h=Array.from(d.values()).map(e=>{const t=e.purchasedLastYear+e.purchasedThisYear,n=e.givenLastYear+e.givenThisYear;return e.balance=t-n,e}).filter(e=>0!==e.balance||e.purchasedThisYear>0||e.givenThisYear>0);a(h)})()},[d,c,x,f,p,y]);const S=e=>{let{tabId:t,children:n}=e;return(0,wp.jsx)("button",{onClick:()=>N(t),className:"px-4 py-2 text-sm font-medium rounded-md ".concat(x===t?"bg-blue-600 text-white":"bg-gray-200 text-gray-700"),children:n})};return(0,wp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md h-full flex flex-col",children:[b&&(0,wp.jsx)(Yp,{onClose:()=>w(!1),exportToPDF:()=>{if("undefined"===typeof window.jspdf||"undefined"===typeof window.jspdf.jsPDF)return void alert("PDF export library is not loaded yet. Please try again in a moment.");const{jsPDF:t}=window.jspdf,r=new t;"function"===typeof r.autoTable?"dateReport"===x?(r.text("Date Wise Report",14,15),r.autoTable({head:[["SL.NO","MATERIAL","TOTAL PURCHASED","TOTAL GIVEN","BALANCE"]],body:e.map((e,t)=>[t+1,e.name,"".concat(e.totalPurchased," ").concat(e.unit),"".concat(e.totalGiven," ").concat(e.unit),"".concat(e.totalBalance," ").concat(e.unit)]),startY:20,theme:"grid"}),r.save("date_report.pdf")):"monthlyReport"===x?(r.text("Monthly Report",14,15),r.autoTable({head:[[{content:"SL.NO",rowSpan:2,styles:{halign:"center",valign:"middle"}},{content:"MATERIAL",rowSpan:2,styles:{halign:"center",valign:"middle"}},{content:"TOTAL PURCHASED",colSpan:2,styles:{halign:"center"}},{content:"TOTAL GIVEN",colSpan:2,styles:{halign:"center"}},{content:"BALANCE",rowSpan:2,styles:{halign:"center",valign:"middle"}}],["UPTO LAST MONTH","THIS MONTH","UPTO LAST MONTH","THIS MONTH"]],body:n.map((e,t)=>[t+1,e.name,"".concat(e.purchasedLastMonth," ").concat(e.unit),"".concat(e.purchasedThisMonth," ").concat(e.unit),"".concat(e.givenLastMonth," ").concat(e.unit),"".concat(e.givenThisMonth," ").concat(e.unit),"".concat(e.balance," ").concat(e.unit)]),startY:20,theme:"grid",headStyles:{fillColor:[22,160,133],textColor:255,fontStyle:"bold"}}),r.save("monthly_report.pdf")):"annualReport"===x&&(r.text("Annual Report",14,15),r.autoTable({head:[[{content:"SL.NO",rowSpan:2,styles:{halign:"center",valign:"middle"}},{content:"MATERIAL",rowSpan:2,styles:{halign:"center",valign:"middle"}},{content:"TOTAL PURCHASED",colSpan:2,styles:{halign:"center"}},{content:"TOTAL GIVEN",colSpan:2,styles:{halign:"center"}},{content:"BALANCE",rowSpan:2,styles:{halign:"center",valign:"middle"}}],["UPTO LAST YEAR","THIS YEAR","UPTO LAST YEAR","THIS YEAR"]],body:i.map((e,t)=>[t+1,e.name,"".concat(e.purchasedLastYear," ").concat(e.unit),"".concat(e.purchasedThisYear," ").concat(e.unit),"".concat(e.givenLastYear," ").concat(e.unit),"".concat(e.givenThisYear," ").concat(e.unit),"".concat(e.balance," ").concat(e.unit)]),startY:20,theme:"grid",headStyles:{fillColor:[22,160,133],textColor:255,fontStyle:"bold"}}),r.save("annual_report.pdf")):alert("PDF autoTable plugin is not loaded yet. Please try again in a moment.")},exportToDoc:()=>{let t="",r="",s="",a="";"dateReport"===x?(r="Date Wise Report",s="<th>SL.NO</th><th>MATERIAL</th><th>TOTAL PURCHASED</th><th>TOTAL GIVEN</th><th>BALANCE</th>",e.forEach((e,t)=>{a+="<tr><td>".concat(t+1,"</td><td>").concat(e.name,"</td><td>").concat(e.totalPurchased," ").concat(e.unit,"</td><td>").concat(e.totalGiven," ").concat(e.unit,"</td><td>").concat(e.totalBalance," ").concat(e.unit,"</td></tr>")})):"monthlyReport"===x?(r="Monthly Report",s='<th rowspan="2">SL.NO</th><th rowspan="2">MATERIAL</th><th colspan="2">TOTAL PURCHASED</th><th colspan="2">TOTAL GIVEN</th><th rowspan="2">BALANCE</th></tr><tr><th>UPTO LAST MONTH</th><th>THIS MONTH</th><th>UPTO LAST MONTH</th><th>THIS MONTH</th>',n.forEach((e,t)=>{a+="<tr><td>".concat(t+1,"</td><td>").concat(e.name,"</td><td>").concat(e.purchasedLastMonth," ").concat(e.unit,"</td><td>").concat(e.purchasedThisMonth," ").concat(e.unit,"</td><td>").concat(e.givenLastMonth," ").concat(e.unit,"</td><td>").concat(e.givenThisMonth," ").concat(e.unit,"</td><td>").concat(e.balance," ").concat(e.unit,"</td></tr>")})):"annualReport"===x&&(r="Annual Report",s='<th rowspan="2">SL.NO</th><th rowspan="2">MATERIAL</th><th colspan="2">TOTAL PURCHASED</th><th colspan="2">TOTAL GIVEN</th><th rowspan="2">BALANCE</th></tr><tr><th>UPTO LAST YEAR</th><th>THIS YEAR</th><th>UPTO LAST YEAR</th><th>THIS YEAR</th>',i.forEach((e,t)=>{a+="<tr><td>".concat(t+1,"</td><td>").concat(e.name,"</td><td>").concat(e.purchasedLastYear," ").concat(e.unit,"</td><td>").concat(e.purchasedThisYear," ").concat(e.unit,"</td><td>").concat(e.givenLastYear," ").concat(e.unit,"</td><td>").concat(e.givenThisYear," ").concat(e.unit,"</td><td>").concat(e.balance," ").concat(e.unit,"</td></tr>")})),t="<html><head><title>".concat(r,"</title><style>body{font-family: Arial, sans-serif;} table{width:100%; border-collapse: collapse;} th, td{border: 1px solid #dddddd; text-align: left; padding: 8px;} tr:nth-child(even) {background-color: #f2f2f2;}</style></head><body><h1>").concat(r,"</h1><table><thead><tr>").concat(s,"</tr></thead><tbody>").concat(a,"</tbody></table></body></html>");const o=new Blob(["\ufeff",t],{type:"application/msword"}),l=URL.createObjectURL(o),c=document.createElement("a");c.href=l,c.download="".concat(x,".doc"),document.body.appendChild(c),c.click(),document.body.removeChild(c)},exportToExcel:()=>{if(!window.XLSX)return void alert("Excel export library is not loaded yet. Please try again in a moment.");let t=[],r=[];"dateReport"===x?(t.push(["SL.NO","MATERIAL","TOTAL PURCHASED","TOTAL GIVEN","BALANCE"]),e.forEach((e,n)=>{t.push([n+1,e.name,"".concat(e.totalPurchased," ").concat(e.unit),"".concat(e.totalGiven," ").concat(e.unit),"".concat(e.totalBalance," ").concat(e.unit)])})):"monthlyReport"===x?(t=[["","",{t:"s",v:"TOTAL PURCHASED"},"",{t:"s",v:"TOTAL GIVEN"},""],["SL.NO","MATERIAL","UPTO LAST MONTH","THIS MONTH","UPTO LAST MONTH","THIS MONTH","BALANCE"]],n.forEach((e,n)=>{t.push([n+1,e.name,"".concat(e.purchasedLastMonth," ").concat(e.unit),"".concat(e.purchasedThisMonth," ").concat(e.unit),"".concat(e.givenLastMonth," ").concat(e.unit),"".concat(e.givenThisMonth," ").concat(e.unit),"".concat(e.balance," ").concat(e.unit)])}),r=[{s:{r:0,c:2},e:{r:0,c:3}},{s:{r:0,c:4},e:{r:0,c:5}}]):"annualReport"===x&&(t=[["","",{t:"s",v:"TOTAL PURCHASED"},"",{t:"s",v:"TOTAL GIVEN"},""],["SL.NO","MATERIAL","UPTO LAST YEAR","THIS YEAR","UPTO LAST YEAR","THIS YEAR","BALANCE"]],i.forEach((e,n)=>{t.push([n+1,e.name,"".concat(e.purchasedLastYear," ").concat(e.unit),"".concat(e.purchasedThisYear," ").concat(e.unit),"".concat(e.givenLastYear," ").concat(e.unit),"".concat(e.givenThisYear," ").concat(e.unit),"".concat(e.balance," ").concat(e.unit)])}),r=[{s:{r:0,c:2},e:{r:0,c:3}},{s:{r:0,c:4},e:{r:0,c:5}}]);const s=window.XLSX.utils.aoa_to_sheet(t);r.length>0&&(s["!merges"]=r);const a={Sheets:{data:s},SheetNames:["data"]};window.XLSX.writeFile(a,"".concat(x,".xlsx"))}}),(0,wp.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-6",children:"Reports"}),(0,wp.jsxs)("div",{className:"flex items-center gap-4 mb-6 border-b pb-4",children:[(0,wp.jsx)(S,{tabId:"dateReport",children:"Date Report"}),(0,wp.jsx)(S,{tabId:"monthlyReport",children:"Monthly report"}),(0,wp.jsx)(S,{tabId:"annualReport",children:"Annual report"}),(0,wp.jsx)("div",{className:"flex-grow"}),(0,wp.jsx)("button",{onClick:()=>w(!0),className:"self-end px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Export"})]}),"dateReport"===x&&(0,wp.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,wp.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wp.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"From date:"}),(0,wp.jsx)("input",{type:"date",value:c,onChange:e=>u(e.target.value),className:"p-2 border border-gray-300 rounded-md"})]}),(0,wp.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wp.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"To date:"}),(0,wp.jsx)("input",{type:"date",value:d,onChange:e=>h(e.target.value),className:"p-2 border border-gray-300 rounded-md"})]})]}),"monthlyReport"===x&&(0,wp.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,wp.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Select Month:"}),(0,wp.jsxs)("div",{className:"flex items-center gap-2",children:[(0,wp.jsx)("select",{value:f,onChange:e=>m(e.target.value),className:"p-2 border border-gray-300 rounded-md",children:Array.from({length:12},(e,t)=>{const n=String(t+1).padStart(2,"0");return(0,wp.jsx)("option",{value:n,children:n},n)})}),(0,wp.jsx)("span",{className:"text-gray-500",children:"/"}),(0,wp.jsx)("select",{value:p,onChange:e=>g(e.target.value),className:"p-2 border border-gray-300 rounded-md",children:Array.from({length:10},(e,t)=>{const n=(new Date).getFullYear()-t;return(0,wp.jsx)("option",{value:n,children:n},n)})})]})]}),"annualReport"===x&&(0,wp.jsxs)("div",{className:"flex items-center gap-2 mb-6",children:[(0,wp.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"Select Year:"}),(0,wp.jsx)("input",{type:"number",placeholder:"YYYY",value:y,onChange:e=>v(e.target.value),className:"p-2 border border-gray-300 rounded-md w-24"})]}),(0,wp.jsxs)("div",{className:"flex-grow overflow-y-auto",children:["dateReport"===x&&(0,wp.jsxs)("table",{className:"w-full text-left",children:[(0,wp.jsx)("thead",{className:"bg-gray-100 sticky top-0",children:(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"SL.NO"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"MATERIAL"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"TOTAL PURCHASED"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"TOTAL GIVEN"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"BALANCE"})]})}),(0,wp.jsx)("tbody",{children:0===e.length?(0,wp.jsx)("tr",{children:(0,wp.jsx)("td",{colSpan:"5",className:"text-center p-8 text-gray-500",children:"No data to display."})}):e.map((e,t)=>(0,wp.jsxs)("tr",{className:"border-b",children:[(0,wp.jsx)("td",{className:"p-3",children:t+1}),(0,wp.jsx)("td",{className:"p-3",children:e.name}),(0,wp.jsxs)("td",{className:"p-3",children:[e.totalPurchased," ",e.unit]}),(0,wp.jsxs)("td",{className:"p-3",children:[e.totalGiven," ",e.unit]}),(0,wp.jsxs)("td",{className:"p-3",children:[e.totalBalance," ",e.unit]})]},t))})]}),"monthlyReport"===x&&(0,wp.jsxs)("table",{className:"w-full text-left",children:[(0,wp.jsxs)("thead",{className:"bg-gray-100 sticky top-0",children:[(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",rowSpan:"2",children:"SL.NO"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",rowSpan:"2",children:"MATERIAL"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600 text-center",colSpan:"2",children:"TOTAL PURCHASED"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600 text-center",colSpan:"2",children:"TOTAL GIVEN"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",rowSpan:"2",children:"BALANCE"})]}),(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"UPTO LAST MONTH"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"THIS MONTH"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"UPTO LAST MONTH"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"THIS MONTH"})]})]}),(0,wp.jsx)("tbody",{children:0===n.length?(0,wp.jsx)("tr",{children:(0,wp.jsx)("td",{colSpan:"7",className:"text-center p-8 text-gray-500",children:"No data to display. Select a month and data will generate automatically."})}):n.map((e,t)=>(0,wp.jsxs)("tr",{className:"border-b",children:[(0,wp.jsx)("td",{className:"p-3",children:t+1}),(0,wp.jsx)("td",{className:"p-3",children:e.name}),(0,wp.jsxs)("td",{className:"p-3",children:[e.purchasedLastMonth," ",e.unit]}),(0,wp.jsxs)("td",{className:"p-3",children:[e.purchasedThisMonth," ",e.unit]}),(0,wp.jsxs)("td",{className:"p-3",children:[e.givenLastMonth," ",e.unit]}),(0,wp.jsxs)("td",{className:"p-3",children:[e.givenThisMonth," ",e.unit]}),(0,wp.jsxs)("td",{className:"p-3",children:[e.balance," ",e.unit]})]},t))})]}),"annualReport"===x&&(0,wp.jsxs)("table",{className:"w-full text-left",children:[(0,wp.jsxs)("thead",{className:"bg-gray-100 sticky top-0",children:[(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",rowSpan:"2",children:"SL.NO"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",rowSpan:"2",children:"MATERIAL"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600 text-center",colSpan:"2",children:"TOTAL PURCHASED"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600 text-center",colSpan:"2",children:"TOTAL GIVEN"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",rowSpan:"2",children:"BALANCE"})]}),(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"UPTO LAST YEAR"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"THIS YEAR"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"UPTO LAST YEAR"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"THIS YEAR"})]})]}),(0,wp.jsx)("tbody",{children:0===i.length?(0,wp.jsx)("tr",{children:(0,wp.jsx)("td",{colSpan:"7",className:"text-center p-8 text-gray-500",children:"No data to display. Select a year and data will generate automatically."})}):i.map((e,t)=>(0,wp.jsxs)("tr",{className:"border-b",children:[(0,wp.jsx)("td",{className:"p-3",children:t+1}),(0,wp.jsx)("td",{className:"p-3",children:e.name}),(0,wp.jsxs)("td",{className:"p-3",children:[e.purchasedLastYear," ",e.unit]}),(0,wp.jsxs)("td",{className:"p-3",children:[e.purchasedThisYear," ",e.unit]}),(0,wp.jsxs)("td",{className:"p-3",children:[e.givenLastYear," ",e.unit]}),(0,wp.jsxs)("td",{className:"p-3",children:[e.givenThisYear," ",e.unit]}),(0,wp.jsxs)("td",{className:"p-3",children:[e.balance," ",e.unit]})]},t))})]})]})]})}function Vp(){const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)([]),[i,a]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{const e=dp(Bm(tm(kp,"approval_requests")),e=>{dp(Bm(tm(kp,"distribution_requests")),n=>{const r=new Map,i=new Map;e.forEach(e=>{const t=e.data();"approved"!==t.status&&"partially-approved"!==t.status||t.items.forEach(e=>{if("approved"===e.status){const t=parseInt(e.quantity,10)||0;if("Returnable"===e.type){const n="".concat(e.name,"-").concat(e.serialNumber,"-").concat(e.modelNumber),r=i.get(n);r?r.quantity+=t:i.set(n,u(u({},e),{},{quantity:t}))}else{const n=r.get(e.name);n?n.quantity+=t:r.set(e.name,u(u({},e),{},{quantity:t}))}}})});const o=new Map;n.forEach(e=>{e.data().items.forEach(e=>{if(["pending","approved","collected"].includes(e.status)){const t=parseInt(e.requiredQuantity,10)||0,n="Returnable"===e.type?"".concat(e.name,"-").concat(e.serialNumber,"-").concat(e.modelNumber):e.name,r=o.get(n)||0;o.set(n,r+t)}})});const l=[];r.forEach((e,t)=>{const n=o.get(t)||0,r=e.quantity-n;r>0&&l.push(u(u({},e),{},{quantity:r}))});const c=[];i.forEach((e,t)=>{const n=o.get(t)||0,r=e.quantity-n;r>0&&c.push(u(u({},e),{},{quantity:r}))}),t(c),s(l),a(!1)})});return()=>e()},[]),i?(0,wp.jsx)("div",{className:"text-center p-8",children:"Loading stock..."}):(0,wp.jsxs)("div",{className:"space-y-8",children:[(0,wp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,wp.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Non-Returnable Materials"}),(0,wp.jsx)("div",{className:"overflow-x-auto",children:(0,wp.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,wp.jsx)("thead",{className:"bg-gray-100",children:(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"SL.NO"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"MATERIAL NAME"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"INFO"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"PRESENT QUANTITY"})]})}),(0,wp.jsx)("tbody",{children:n.length>0?n.map((e,t)=>(0,wp.jsxs)("tr",{className:"border-b",children:[(0,wp.jsx)("td",{className:"p-3",children:t+1}),(0,wp.jsx)("td",{className:"p-3",children:e.name}),(0,wp.jsx)("td",{className:"p-3",children:e.info}),(0,wp.jsxs)("td",{className:"p-3",children:[e.quantity," ",e.unit?e.unit:""]})]},e.name)):(0,wp.jsx)("tr",{children:(0,wp.jsx)("td",{colSpan:"4",className:"text-center p-8 text-gray-500",children:"No items in this category."})})})]})})]}),(0,wp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,wp.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Returnable Material"}),(0,wp.jsx)("div",{className:"overflow-x-auto",children:(0,wp.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,wp.jsx)("thead",{className:"bg-gray-100",children:(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"SL.NO"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"MATERIAL NAME"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"INFO"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"SERIAL NO"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"MODEL NO"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"PRESENT QUANTITY"})]})}),(0,wp.jsx)("tbody",{children:e.length>0?e.map((e,t)=>(0,wp.jsxs)("tr",{className:"border-b",children:[(0,wp.jsx)("td",{className:"p-3",children:t+1}),(0,wp.jsx)("td",{className:"p-3",children:e.name}),(0,wp.jsx)("td",{className:"p-3",children:e.info}),(0,wp.jsx)("td",{className:"p-3",children:e.serialNumber||"N/A"}),(0,wp.jsx)("td",{className:"p-3",children:e.modelNumber||"N/A"}),(0,wp.jsxs)("td",{className:"p-3",children:[e.quantity," ",e.unit?e.unit:""]})]},"".concat(e.name,"-").concat(e.serialNumber))):(0,wp.jsx)("tr",{children:(0,wp.jsx)("td",{colSpan:"6",className:"text-center p-8 text-gray-500",children:"No items in this category."})})})]})})]})]})}function zp(){const[e,t]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=dp(Bm(tm(kp,"annual_verification_requests"),Gm("status","!=","pending")),e=>{const n=e.docs.map(e=>u({id:e.id},e.data()));t(n)});return()=>e()},[]);const n=e=>{if(!e)return"N/A";return new Date(e).toLocaleDateString("en-GB")},s=e=>{if(!e)return"N/A";return e.toDate().toLocaleDateString("en-GB")};return(0,wp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md h-full flex flex-col",children:[(0,wp.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-6",children:"Annual Verification History"}),(0,wp.jsx)("div",{className:"flex-grow overflow-y-auto",children:0===e.length?(0,wp.jsx)("p",{className:"text-gray-500 text-center mt-8",children:"No verification history found."}):e.map(e=>(0,wp.jsxs)("div",{className:"mb-6 p-4 border rounded-md",children:[(0,wp.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-4",children:[(0,wp.jsxs)("div",{children:[(0,wp.jsx)("span",{className:"font-semibold",children:"Request ID:"})," ",e.id]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("span",{className:"font-semibold",children:"Date Submitted:"})," ",s(e.submittedAt)]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("span",{className:"font-semibold",children:"Status:"})," ",(0,wp.jsx)("span",{className:"font-bold ".concat("approved"===e.status?"text-green-600":"text-yellow-600"),children:e.status})]})]}),(0,wp.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,wp.jsx)("thead",{className:"bg-gray-50",children:(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-2",children:"Material"}),(0,wp.jsx)("th",{className:"p-2",children:"Serial No"}),(0,wp.jsx)("th",{className:"p-2",children:"Original Condition"}),(0,wp.jsx)("th",{className:"p-2",children:"New Condition"}),(0,wp.jsx)("th",{className:"p-2",children:"Verified Date"}),(0,wp.jsx)("th",{className:"p-2",children:"Remarks"})]})}),(0,wp.jsx)("tbody",{children:e.items.map(e=>(0,wp.jsxs)("tr",{className:"border-b",children:[(0,wp.jsx)("td",{className:"p-2",children:e.name}),(0,wp.jsx)("td",{className:"p-2",children:e.serialNumber}),(0,wp.jsx)("td",{className:"p-2",children:e.productCondition}),(0,wp.jsx)("td",{className:"p-2",children:e.newCondition}),(0,wp.jsx)("td",{className:"p-2",children:n(e.physicallyVerifiedDate)}),(0,wp.jsx)("td",{className:"p-2",children:e.remarks||"---"})]},e.id))})]})]},e.id))})]})}function qp(e){let{user:t}=e;const[n,s]=(0,r.useState)([]),[i,a]=(0,r.useState)({}),[o,l]=(0,r.useState)({});(0,r.useEffect)(()=>{const e=dp(tm(kp,"users"),e=>{const t={};e.forEach(e=>{t[e.id]=e.data()}),a(t)}),t=dp(Bm(tm(kp,"distribution_requests")),e=>{const t=[];e.forEach(e=>{const n=e.data();n.items.forEach((r,s)=>{"Returnable"===r.type&&"collected"===r.status&&t.push(u(u({},r),{},{id:"".concat(e.id,"-").concat(s),consumerId:n.consumerId,distributionId:e.id}))})}),s(t)});return()=>{e(),t()}},[]);const c=e=>{if(!e)return"N/A";return e.toDate().toLocaleDateString("en-GB")};return(0,wp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md h-full flex flex-col",children:[(0,wp.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-6",children:"Annual Verification Report"}),(0,wp.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,wp.jsxs)("table",{className:"w-full text-left",children:[(0,wp.jsx)("thead",{className:"bg-gray-100 sticky top-0",children:(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Sl.No"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Material Name"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Model"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Serial Number"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Quantity"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Consumer Name"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Designation"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Date of Taken"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Condition of the Material"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Status"})]})}),(0,wp.jsx)("tbody",{children:n.map((e,t)=>{const n=i[e.consumerId]||{};return(0,wp.jsxs)("tr",{className:"border-b",children:[(0,wp.jsx)("td",{className:"p-3",children:t+1}),(0,wp.jsx)("td",{className:"p-3",children:e.name}),(0,wp.jsx)("td",{className:"p-3",children:e.modelNumber}),(0,wp.jsx)("td",{className:"p-3",children:e.serialNumber}),(0,wp.jsxs)("td",{className:"p-3",children:[e.requiredQuantity," ",e.unit?e.unit:""]}),(0,wp.jsx)("td",{className:"p-3",children:n.name}),(0,wp.jsx)("td",{className:"p-3",children:n.designation}),(0,wp.jsx)("td",{className:"p-3",children:c(e.dateTaken)}),(0,wp.jsx)("td",{className:"p-3",children:(0,wp.jsxs)("select",{value:o[e.id]||e.productCondition,onChange:t=>{return n=e.id,r=t.target.value,void l(e=>u(u({},e),{},{[n]:r}));var n,r},className:"w-full p-2 border border-gray-300 rounded-md",children:[(0,wp.jsx)("option",{children:"Good"}),(0,wp.jsx)("option",{children:"Normal"}),(0,wp.jsx)("option",{children:"Bad"}),(0,wp.jsx)("option",{children:"For Disposal"})]})}),(0,wp.jsx)("td",{className:"p-3 capitalize",children:e.status})]},e.id)})})]})}),(0,wp.jsx)("div",{className:"flex justify-end mt-6",children:(0,wp.jsx)("button",{onClick:async()=>{const e=n.filter(e=>o[e.id]);if(0===e.length)return void alert("Please update the condition of at least one item before sending for approval.");const r={caseworkerId:t.uid,caseworkerEmail:t.email,submittedAt:bp(),status:"pending",items:e.map(e=>u(u({},e),{},{newCondition:o[e.id]}))};try{await up(tm(kp,"annual_verification_requests"),r),alert("Annual verification request sent for approval."),l({})}catch(s){console.error("Error sending verification request: ",s),alert("Failed to send verification request.")}},className:"px-6 py-2 bg-yellow-500 text-white font-semibold rounded-md hover:bg-yellow-600",children:"SEND TO APPROVAL"})})]})}function Bp(){const[e,t]=(0,r.useState)([]);(0,r.useEffect)(()=>{const e=dp(Bm(tm(kp,"approval_requests"),Gm("status","in",["rejected","partially-approved"])),e=>{const n=[];e.forEach(e=>{const t=e.data();t.items.forEach(e=>{"rejected"===e.status&&n.push(u(u({},e),{},{vendorName:t.vendorName,billNumber:t.billNumber,billDate:t.billDate}))})}),t(n)});return()=>e()},[]);const n=e=>{if(!e)return"N/A";const[t,n,r]=e.split("-");return"".concat(r,"/").concat(n,"/").concat(t)};return(0,wp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md h-full overflow-y-auto",children:[(0,wp.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-6",children:"Rejected Cases"}),(0,wp.jsxs)("table",{className:"w-full text-left",children:[(0,wp.jsx)("thead",{className:"bg-gray-100 sticky top-0",children:(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Sl.No"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Vendor Name"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Bill Number"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Bill Date"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Material"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Quantity"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Cost"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Remarks"})]})}),(0,wp.jsx)("tbody",{children:0===e.length?(0,wp.jsx)("tr",{children:(0,wp.jsx)("td",{colSpan:"8",className:"text-center p-8 text-gray-500",children:"No rejected items found."})}):e.map((e,t)=>(0,wp.jsxs)("tr",{className:"border-b",children:[(0,wp.jsx)("td",{className:"p-3",children:t+1}),(0,wp.jsx)("td",{className:"p-3",children:e.vendorName}),(0,wp.jsx)("td",{className:"p-3",children:e.billNumber}),(0,wp.jsx)("td",{className:"p-3",children:n(e.billDate)}),(0,wp.jsx)("td",{className:"p-3",children:e.name}),(0,wp.jsxs)("td",{className:"p-3",children:[e.quantity," ",e.unit?e.unit:""]}),(0,wp.jsxs)("td",{className:"p-3",children:["\u20b9",e.cost]}),(0,wp.jsx)("td",{className:"p-3",children:e.remarks})]},"".concat(e.billNumber,"-").concat(e.id)))})]})]})}function Hp(){const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)({}),[i,a]=(0,r.useState)({}),o=e=>{if(!e)return"N/A";const t=e.toDate(),n=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0"),s=t.getFullYear();return"".concat(n,"/").concat(r,"/").concat(s)};return(0,r.useEffect)(()=>{const e=dp(tm(kp,"users"),e=>{const t={};e.forEach(e=>{t[e.id]=e.data()}),s(t)}),n=dp(tm(kp,"materials"),e=>{const t={};e.forEach(e=>{t[e.data().name]=e.data()}),a(t)}),r=dp(Bm(tm(kp,"distribution_requests")),e=>{const n=[];e.forEach(e=>{const t=e.data();t.items.forEach(e=>{"collected"===e.status&&n.push(u(u({},e),{},{consumerId:t.consumerId}))})}),t(n)});return()=>{e(),n(),r()}},[]),(0,wp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md h-full overflow-y-auto",children:[(0,wp.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-6",children:"Collected Consumer Items Report"}),(0,wp.jsxs)("table",{className:"w-full text-left",children:[(0,wp.jsx)("thead",{className:"bg-gray-100 sticky top-0",children:(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Sl.No"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Consumer Name"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Designation"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Date Taken"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Material"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Type"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Info"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Quantity"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Messenger Name"})]})}),(0,wp.jsx)("tbody",{children:0===e.length?(0,wp.jsx)("tr",{children:(0,wp.jsx)("td",{colSpan:"9",className:"text-center p-8 text-gray-500",children:"No collected items found."})}):e.map((e,t)=>{const r=n[e.consumerId]||{},s=i[e.name]||{};return(0,wp.jsxs)("tr",{className:"border-b",children:[(0,wp.jsx)("td",{className:"p-3",children:t+1}),(0,wp.jsx)("td",{className:"p-3",children:r.name||"N/A"}),(0,wp.jsx)("td",{className:"p-3",children:r.designation||"N/A"}),(0,wp.jsx)("td",{className:"p-3",children:o(e.dateTaken)}),(0,wp.jsx)("td",{className:"p-3",children:e.name}),(0,wp.jsx)("td",{className:"p-3",children:s.type||"N/A"}),(0,wp.jsx)("td",{className:"p-3",children:s.info||"N/A"}),(0,wp.jsxs)("td",{className:"p-3",children:[e.requiredQuantity," ",e.unit?e.unit:""]}),(0,wp.jsx)("td",{className:"p-3",children:e.messengerName||"N/A"})]},t)})})]})]})}function Gp(e){let{onConfirm:t,onCancel:n,title:r,message:s}=e;return(0,wp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,wp.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-2xl w-full max-w-sm",children:[(0,wp.jsx)("h2",{className:"text-xl font-bold mb-4 text-center",children:r||"Confirm Action"}),(0,wp.jsx)("p",{className:"text-center text-gray-600 mb-6",children:s||"Are you sure you want to proceed?"}),(0,wp.jsxs)("div",{className:"flex justify-center gap-4",children:[(0,wp.jsx)("button",{onClick:n,className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,wp.jsx)("button",{onClick:t,className:"px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Confirm"})]})]})})}function Wp(){const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)({}),[i,a]=(0,r.useState)({}),[o,l]=(0,r.useState)({});(0,r.useEffect)(()=>{const e=dp(tm(kp,"users"),e=>{const t={};e.forEach(e=>{t[e.id]=e.data()}),s(t)}),r=dp(Bm(tm(kp,"distribution_requests"),Gm("status","in",["approved","partially-approved"])),e=>{const r=[];e.forEach(e=>{const t=u({id:e.id},e.data());t.items.forEach((s,i)=>{if("approved"===s.status){const a=n[t.consumerId]||{};r.push(u(u({},s),{},{uniqueId:"".concat(e.id,"-").concat(i),itemIndex:i,requestId:t.id,consumerId:t.consumerId,section:t.section,messengerName:t.messengerName||a.name}))}})}),t(r)}),i=dp(Bm(tm(kp,"approval_requests")),e=>{const t={};e.forEach(e=>{"approved"!==e.data().status&&"partially-approved"!==e.data().status||e.data().items.forEach(e=>{"approved"===e.status&&"Returnable"===e.type&&(t[e.name]||(t[e.name]=[]),t[e.name].push({serialNumber:e.serialNumber,modelNumber:e.modelNumber}))})}),a(t)});return()=>{e(),r(),i()}},[n]);const c=async(e,t)=>{const{requestId:n,name:r,type:s,uniqueId:i,itemIndex:a,messengerName:l}=e,c=o[i]||{};if("Returnable"===s&&"collected"===t&&(!c.serialNumber||!c.modelNumber))return void alert("Please select a serial and model number for this returnable item.");const d=nm(kp,"distribution_requests",n);try{await vp(kp,async e=>{const n=await e.get(d);if(!n.exists())throw new Error("Document does not exist!");const r=n.data(),i=[...r.items];if(!(a>=0&&a<i.length))throw console.error("Invalid item index:",a),new Error("Could not find the item to update.");{const e=u(u({},i[a]),{},{status:t,dateTaken:"collected"===t?new Date:null,messengerName:"collected"===t?l:""});"Returnable"===s&&"collected"===t&&(e.serialNumber=c.serialNumber||"",e.modelNumber=c.modelNumber||""),i[a]=e}const o=i.every(e=>"collected"===e.status||"rejected"===e.status)?"completed":r.status;e.update(d,{items:i,status:o})}),alert("Item ".concat(r," has been marked as ").concat(t,"."))}catch(h){console.error("Transaction failed: ",h),alert("Failed to update item status. Please try again.")}},d=e.filter(e=>"Returnable"!==e.type),h=e.filter(e=>"Returnable"===e.type);return(0,wp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md h-full overflow-y-auto space-y-8",children:[(0,wp.jsxs)("div",{children:[(0,wp.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-6",children:"Approved Non-Returnable Requests"}),0===d.length?(0,wp.jsx)("p",{className:"text-gray-500 text-center mt-8",children:"No non-returnable items are currently pending handover."}):(0,wp.jsxs)("table",{className:"w-full text-left",children:[(0,wp.jsx)("thead",{className:"bg-gray-100 sticky top-0",children:(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Sl.No"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Consumer Name"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Designation"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Section"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Material"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Quantity"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Messenger Name"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Action"})]})}),(0,wp.jsx)("tbody",{children:d.map((e,t)=>{const r=n[e.consumerId]||{};return(0,wp.jsxs)("tr",{className:"border-b",children:[(0,wp.jsx)("td",{className:"p-3",children:t+1}),(0,wp.jsx)("td",{className:"p-3",children:r.name||"N/A"}),(0,wp.jsx)("td",{className:"p-3",children:r.designation||"N/A"}),(0,wp.jsx)("td",{className:"p-3",children:e.section||"N/A"}),(0,wp.jsx)("td",{className:"p-3",children:e.name}),(0,wp.jsxs)("td",{className:"p-3",children:[e.requiredQuantity," ",e.unit?e.unit:""]}),(0,wp.jsx)("td",{className:"p-3",children:(0,wp.jsx)("div",{className:"w-full p-2 bg-gray-100 border border-gray-300 rounded-md",children:e.messengerName||"N/A"})}),(0,wp.jsx)("td",{className:"p-3",children:(0,wp.jsxs)("div",{className:"flex gap-2",children:[(0,wp.jsx)("button",{onClick:()=>c(e,"collected"),className:"p-2 bg-green-500 text-white rounded-full hover:bg-green-600 w-8 h-8 flex items-center justify-center",title:"Confirm Collection",children:"\u2713"}),(0,wp.jsx)("button",{onClick:()=>c(e,"rejected"),className:"p-2 bg-red-500 text-white rounded-full hover:bg-red-600 w-8 h-8 flex items-center justify-center",title:"Reject Collection",children:"\u2717"})]})})]},e.uniqueId)})})]})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("h2",{className:"text-2xl font-semibold text-gray-700 mb-6",children:"Approved Returnable Requests"}),0===h.length?(0,wp.jsx)("p",{className:"text-gray-500 text-center mt-8",children:"No returnable items are currently pending handover."}):(0,wp.jsxs)("table",{className:"w-full text-left",children:[(0,wp.jsx)("thead",{className:"bg-gray-100 sticky top-0",children:(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Sl.No"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Consumer Name"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Designation"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Section"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Material"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Quantity"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Serial Number"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Model Number"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Messenger Name"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"Action"})]})}),(0,wp.jsx)("tbody",{children:h.map((e,t)=>{var r;const s=n[e.consumerId]||{},a=i[e.name]||[],d=o[e.uniqueId]?"".concat(o[e.uniqueId].serialNumber,"|").concat(o[e.uniqueId].modelNumber):"";return(0,wp.jsxs)("tr",{className:"border-b",children:[(0,wp.jsx)("td",{className:"p-3",children:t+1}),(0,wp.jsx)("td",{className:"p-3",children:s.name||"N/A"}),(0,wp.jsx)("td",{className:"p-3",children:s.designation||"N/A"}),(0,wp.jsx)("td",{className:"p-3",children:e.section||"N/A"}),(0,wp.jsx)("td",{className:"p-3",children:e.name}),(0,wp.jsxs)("td",{className:"p-3",children:[e.requiredQuantity," ",e.unit?e.unit:""]}),(0,wp.jsx)("td",{className:"p-3",children:(0,wp.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded-md",value:d,onChange:t=>((e,t)=>{const[n,r]=t.split("|");l(t=>u(u({},t),{},{[e]:{serialNumber:n,modelNumber:r}}))})(e.uniqueId,t.target.value),children:[(0,wp.jsx)("option",{value:"",children:"Select Serial No"}),a.map(e=>(0,wp.jsx)("option",{value:"".concat(e.serialNumber,"|").concat(e.modelNumber),children:e.serialNumber},e.serialNumber))]})}),(0,wp.jsx)("td",{className:"p-3",children:(0,wp.jsx)("input",{type:"text",readOnly:!0,value:(null===(r=o[e.uniqueId])||void 0===r?void 0:r.modelNumber)||"",className:"w-full p-2 bg-gray-100 border border-gray-300 rounded-md"})}),(0,wp.jsx)("td",{className:"p-3",children:(0,wp.jsx)("div",{className:"w-full p-2 bg-gray-100 border border-gray-300 rounded-md",children:e.messengerName||"N/A"})}),(0,wp.jsx)("td",{className:"p-3",children:(0,wp.jsxs)("div",{className:"flex gap-2",children:[(0,wp.jsx)("button",{onClick:()=>c(e,"collected"),className:"p-2 bg-green-500 text-white rounded-full hover:bg-green-600 w-8 h-8 flex items-center justify-center",title:"Confirm Collection",children:"\u2713"}),(0,wp.jsx)("button",{onClick:()=>c(e,"rejected"),className:"p-2 bg-red-500 text-white rounded-full hover:bg-red-600 w-8 h-8 flex items-center justify-center",title:"Reject Collection",children:"\u2717"})]})})]},e.uniqueId)})})]})]})]})}function Kp(e){let{user:t}=e;const[n,s]=(0,r.useState)(""),[i,a]=(0,r.useState)(""),[o,l]=(0,r.useState)(""),[c,d]=(0,r.useState)(""),[h,f]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),[g,y]=(0,r.useState)([]),[v,b]=(0,r.useState)(""),[w,x]=(0,r.useState)(""),[N,S]=(0,r.useState)(""),[E,k]=(0,r.useState)([]),[_,T]=(0,r.useState)([]),[C,I]=(0,r.useState)(!1),[j,A]=(0,r.useState)(!1),[P,R]=(0,r.useState)(null),[D,O]=(0,r.useState)(""),[L,M]=(0,r.useState)("0.00"),[F,U]=(0,r.useState)(null),[V,z]=(0,r.useState)(""),[q,B]=(0,r.useState)([]),[H,G]=(0,r.useState)(""),[W,K]=(0,r.useState)(!1),[Q,Y]=(0,r.useState)(""),[X,J]=(0,r.useState)("total"),[$,Z]=(0,r.useState)(""),[ee,te]=(0,r.useState)(!1),ne=g.find(e=>e.name===v),re=!v||!w||!N||!V;(0,r.useEffect)(()=>{const e=dp(tm(kp,"materials"),e=>{const t=e.docs.map(e=>u({id:e.id},e.data()));y(t)});return()=>e()},[]),(0,r.useEffect)(()=>{if(v&&g.length>0){const e=g.find(e=>e.name===v);if(e&&e.caseworkerUnit){const t=e.caseworkerUnit.split(",").map(e=>e.trim());B(t),z(t[0]||""),G(t.length>1?t[1]:t[0])}else B([]),z(""),G("")}else B([]),z(""),G("");K(!1),Y("")},[v,g]),(0,r.useEffect)(()=>{q.length>1&&V===q[0]?K(!0):(K(!1),Y(""))},[V,q]),(0,r.useEffect)(()=>{if(!t)return;const e=dp(Bm(tm(kp,"approval_requests"),Gm("caseworkerId","==",t.uid)),e=>{const t=[];e.forEach(e=>{const n=e.data();n.items.forEach(e=>{t.push(u(u({},e),{},{vendorName:n.vendorName,vendorPhone:n.vendorPhone,vendorAddress:n.vendorAddress,billNumber:n.billNumber,gstNumber:n.gstNumber,billDate:n.billDate,status:e.status||n.status}))})}),t.sort((e,t)=>{const n={approved:1,rejected:2,pending:3};return(n[e.status]||4)-(n[t.status]||4)}),T(t)});return()=>e()},[t]),(0,r.useEffect)(()=>{const e=E.reduce((e,t)=>e+parseFloat(t.cost||0),0);let t=0;t="total"===X?parseFloat(D)||0:E.reduce((e,t)=>e+(parseFloat(t.gst)||0),0),M((e+t).toFixed(2))},[D,E,X]);const se=()=>{b(""),x(""),S(""),z(""),Y(""),K(!1),U(null),Z("")},ie=e=>{if(!e)return"";const[t,n,r]=e.split("-");return"".concat(r,"/").concat(n,"/").concat(t)};return(0,wp.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8 h-full",children:[ee&&(0,wp.jsx)(Gp,{onConfirm:async()=>{try{const e="individual"===X?E.reduce((e,t)=>e+(parseFloat(t.gst)||0),0):parseFloat(D)||0,r=E.reduce((e,t)=>e+parseFloat(t.cost||0),0)+e;await up(tm(kp,"approval_requests"),{vendorName:n,vendorPhone:i,vendorAddress:o,billDate:c,billNumber:h,gstNumber:m,caseworkerId:t.uid,caseworkerEmail:t.email,items:E,gstAmount:e.toFixed(2),totalAmount:r.toFixed(2),status:"pending",submittedAt:bp()}),alert("Request submitted for approval successfully!"),k([]),s(""),a(""),l(""),d(""),f(""),p(""),O("")}catch(e){console.error("Error submitting request: ",e),alert("Failed to submit request. Please try again.")}finally{te(!1)}},onCancel:()=>te(!1),title:"Confirm Submission",message:"Are you sure you want to submit this procurement request for approval?"}),j&&(0,wp.jsx)(Qp,{data:P,onClose:()=>A(!1),onConfirm:e=>{k([...E,...e]),se()}}),(0,wp.jsxs)("div",{className:"lg:w-1/2 bg-white p-6 rounded-lg shadow-md overflow-y-auto",children:[(0,wp.jsx)("h2",{className:"text-2xl font-semibold mb-6 text-gray-700",children:"Material Entry Form"}),(0,wp.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n&&i&&o&&c&&h&&m&&0!==E.length?"total"!==X||D?te(!0):alert("Please enter the Total GST Amount before submitting."):alert("Please fill all vendor details and add at least one material record.")},className:"space-y-4",children:[(0,wp.jsxs)("div",{className:"p-4 border border-gray-200 rounded-md space-y-4",children:[(0,wp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Vendor Name"}),(0,wp.jsx)("input",{type:"text",placeholder:"Enter Vendor Name",className:"w-full p-2 border border-gray-300 rounded-md",value:n,onChange:e=>s(e.target.value),required:!0})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Vendor Phone"}),(0,wp.jsx)("input",{type:"text",pattern:"\\d*",maxLength:"10",placeholder:"Enter 10-digit Phone",className:"w-full p-2 border border-gray-300 rounded-md",value:i,onChange:e=>{const t=e.target.value.replace(/\D/g,"");a(t)},required:!0})]})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Vendor Address"}),(0,wp.jsx)("textarea",{placeholder:"Enter Address",className:"w-full p-2 border border-gray-300 rounded-md",value:o,onChange:e=>l(e.target.value),required:!0})]}),(0,wp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Bill Number"}),(0,wp.jsx)("input",{type:"text",placeholder:"Enter Bill Number",className:"w-full p-2 border border-gray-300 rounded-md",value:h,onChange:e=>f(e.target.value),required:!0})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Bill Date"}),(0,wp.jsx)("input",{type:"date",className:"w-full p-2 border border-gray-300 rounded-md",value:c,onChange:e=>{const t=new Date(e.target.value),n=new Date;n.setHours(0,0,0,0);new Date(t.getTime()+6e4*t.getTimezoneOffset())>n?(alert("Invalid date. Please do not select a future date."),d("")):d(e.target.value)},required:!0})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"GST Number"}),(0,wp.jsx)("input",{type:"text",placeholder:"Enter GST Number",className:"w-full p-2 border border-gray-300 rounded-md",value:m,onChange:e=>p(e.target.value),required:!0})]})]}),(0,wp.jsxs)("div",{className:"flex items-center gap-6 mt-2 mb-2",children:[(0,wp.jsxs)("label",{className:"flex items-center gap-2",children:[(0,wp.jsx)("input",{type:"radio",name:"gstMode",value:"total",checked:"total"===X,onChange:()=>J("total")}),"Total GST"]}),(0,wp.jsxs)("label",{className:"flex items-center gap-2",children:[(0,wp.jsx)("input",{type:"radio",name:"gstMode",value:"individual",checked:"individual"===X,onChange:()=>J("individual")}),"Individual GST per Item"]})]})]}),(0,wp.jsxs)("div",{className:"p-4 border border-gray-200 rounded-md space-y-4",children:[(0,wp.jsx)("h3",{className:"font-semibold text-gray-700",children:"Add Item"}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Material Name"}),(0,wp.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded-md",value:v,onChange:e=>b(e.target.value),children:[(0,wp.jsx)("option",{value:"",children:"Select Material"}),g.map(e=>(0,wp.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,wp.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,wp.jsx)("input",{type:"text",pattern:"\\d*",placeholder:"Number of Materials",className:"w-full p-2 border border-gray-300 rounded-md",value:w,onChange:e=>x(e.target.value.replace(/\D/g,""))}),(0,wp.jsxs)("select",{className:"w-full p-2 border border-gray-300 rounded-md",value:V,onChange:e=>z(e.target.value),disabled:!v,children:[(0,wp.jsx)("option",{value:"",children:"Select Unit"}),q.map(e=>(0,wp.jsx)("option",{value:e,children:e},e))]}),(0,wp.jsx)("input",{type:"text",placeholder:"Cost Per Material",className:"w-full p-2 border border-gray-300 rounded-md",value:N,onChange:e=>{const t=e.target.value.replace(/[^0-9.]/g,"").replace(/(\..*?)\..*/g,"$1");S(t)}})]}),W&&(0,wp.jsxs)("div",{className:"mt-4",children:[(0,wp.jsxs)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:["Number of ",H,"s per ",V]}),(0,wp.jsx)("input",{type:"text",pattern:"\\d*",placeholder:"e.g., 50",className:"w-full p-2 border border-gray-300 rounded-md",value:Q,onChange:e=>Y(e.target.value.replace(/\D/g,""))})]}),"individual"===X&&(0,wp.jsxs)("div",{className:"mt-4",children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"GST per Material"}),(0,wp.jsx)("input",{type:"text",placeholder:"GST per Material",className:"w-full p-2 border border-gray-300 rounded-md",value:$,onChange:e=>Z(e.target.value.replace(/[^0-9.]/g,"").replace(/(\..*?)\..*/g,"$1"))})]}),(0,wp.jsx)("div",{children:(0,wp.jsx)("button",{type:"button",onClick:()=>{if(!n||!i||!o||!c||!h||!m)return void alert("Please fill all vendor details before adding items.");if(re)return void alert("Please fill in material name, number, unit, and cost.");if(W&&(!Q||parseInt(Q)<=0))return void alert("Please enter a valid number of ".concat(H,"s per ").concat(V,"."));if("Returnable"===ne.type)return R({name:v,type:ne.type,info:ne.info,quantity:parseInt(w,10),costPerItem:parseFloat(N).toFixed(2),unit:H,consumerUnit:ne.consumerUnit}),void A(!0);const e=parseInt(w,10),t=W?e*parseInt(Q,10):e,r=e*parseFloat(N),s=u({id:F||Date.now(),name:v,type:ne.type,info:ne.info,quantity:t,unit:H,consumerUnit:ne.consumerUnit,cost:r.toFixed(2)},"individual"===X&&{gst:(parseFloat($||0)*e).toFixed(2)});k(F?E.map(e=>e.id===F?s:e):[...E,s]),se()},disabled:re,className:"w-full py-2 px-4 text-white font-semibold rounded-md transition-colors ".concat(re?"bg-gray-400 cursor-not-allowed":"bg-indigo-600 hover:bg-indigo-700"),children:F?"Update Item":"Add Item"})})]}),(0,wp.jsx)("hr",{className:"my-4"}),(0,wp.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,wp.jsx)("div",{children:"total"===X&&(0,wp.jsxs)(wp.Fragment,{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"GST Amount"}),(0,wp.jsx)("input",{type:"text",placeholder:"GST Amount",value:D,onChange:e=>{const t=e.target.value.replace(/[^0-9.]/g,"").replace(/(\..*?)\..*/g,"$1");O(t)},className:"w-full p-2 border border-gray-300 rounded-md"})]})}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"Total Amount (with GST)"}),(0,wp.jsx)("input",{type:"text",readOnly:!0,value:"\u20b9".concat(L),className:"w-full p-2 bg-gray-100 border border-gray-300 rounded-md",placeholder:"Total Amount"})]})]}),(0,wp.jsx)("div",{children:(0,wp.jsx)("button",{type:"submit",className:"w-full py-3 px-4 bg-indigo-600 text-white font-semibold rounded-md hover:bg-indigo-700 disabled:bg-gray-400",disabled:0===E.length,children:"Submit for Approval"})})]})]}),(0,wp.jsxs)("div",{className:"lg:w-1/2 bg-white p-6 rounded-lg shadow-md flex flex-col",children:[(0,wp.jsxs)("div",{className:"flex-shrink-0 flex justify-between items-center mb-6",children:[(0,wp.jsx)("h2",{className:"text-2xl font-semibold text-gray-700",children:"Material Records"}),(0,wp.jsx)("button",{onClick:()=>I(!0),className:"px-4 py-2 bg-gray-600 text-white rounded-md hover:bg-gray-700",children:"Export"})]}),(0,wp.jsx)("div",{className:"flex-grow overflow-auto",children:(0,wp.jsxs)("table",{className:"w-full text-left",children:[(0,wp.jsx)("thead",{className:"sticky top-0 bg-gray-100",children:(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"SL.NO"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"MATERIAL"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"TYPE"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"INFO"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"QTY"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"COST"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"STATUS"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold text-gray-600",children:"ACTION"})]})}),(0,wp.jsx)("tbody",{children:0===_.length&&0===E.length?(0,wp.jsx)("tr",{children:(0,wp.jsx)("td",{colSpan:"8",className:"text-center p-8 text-gray-500",children:"No records found."})}):(0,wp.jsxs)(wp.Fragment,{children:[_.map((e,t)=>(0,wp.jsxs)("tr",{className:"border-b border-gray-200 bg-gray-50 opacity-70",children:[(0,wp.jsx)("td",{className:"p-3",children:t+1}),(0,wp.jsxs)("td",{className:"p-3",children:[e.name,e.serialNumber&&(0,wp.jsxs)("span",{className:"block text-xs text-gray-500",children:["(",e.serialNumber," / ",e.modelNumber,")"]})]}),(0,wp.jsx)("td",{className:"p-3",children:e.type}),(0,wp.jsx)("td",{className:"p-3",children:e.info}),(0,wp.jsxs)("td",{className:"p-3",children:[e.quantity," ",e.unit?e.unit:""]}),(0,wp.jsxs)("td",{className:"p-3",children:["\u20b9",e.cost]}),(0,wp.jsx)("td",{className:"p-3 capitalize",children:e.status}),(0,wp.jsx)("td",{className:"p-3"})]},"".concat(e.id,"-").concat(t))),E.map((e,t)=>(0,wp.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-50",children:[(0,wp.jsx)("td",{className:"p-3",children:_.length+t+1}),(0,wp.jsxs)("td",{className:"p-3",children:[e.name,e.serialNumber&&(0,wp.jsxs)("span",{className:"block text-xs text-gray-500",children:["(",e.serialNumber," / ",e.modelNumber,")"]})]}),(0,wp.jsx)("td",{className:"p-3",children:e.type}),(0,wp.jsx)("td",{className:"p-3",children:e.info}),(0,wp.jsxs)("td",{className:"p-3",children:[e.quantity," ",e.unit?e.unit:""]}),(0,wp.jsxs)("td",{className:"p-3",children:["\u20b9",e.cost]}),(0,wp.jsx)("td",{className:"p-3 capitalize",children:"Pending"}),(0,wp.jsx)("td",{className:"p-3",children:(0,wp.jsxs)("div",{className:"flex gap-2",children:[(0,wp.jsx)("button",{type:"button",onClick:()=>{alert("Editing complex unit entries is not fully supported. Please delete and re-add the item.")},className:"text-xs px-2 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200",children:"Edit"}),(0,wp.jsx)("button",{type:"button",onClick:()=>{return t=e.id,void k(E.filter(e=>e.id!==t));var t},className:"text-xs px-2 py-1 bg-red-100 text-red-700 rounded-md hover:bg-red-200",children:"Delete"})]})})]},e.id))]})})]})})]}),C&&(0,wp.jsx)(Yp,{onClose:()=>I(!1),exportToPDF:()=>{if(!window.jspdf||!window.jspdf.jsPDF)return void alert("PDF export library is not loaded yet. Please try again in a moment.");const{jsPDF:e}=window.jspdf,t=new e({orientation:"landscape"}),r=[];[..._,...E].forEach((e,t)=>{const s=[t+1,e.vendorName||n,e.vendorPhone||i,e.vendorAddress||o,e.billNumber||h,e.gstNumber||m,ie(e.billDate||c),"".concat(e.name," ").concat(e.serialNumber?"(".concat(e.serialNumber,"/").concat(e.modelNumber,")"):""),e.type,e.info,"".concat(e.quantity," ").concat(e.unit||""),e.cost,e.status||"Pending"];r.push(s)}),t.text("Material Records",14,15),t.autoTable({head:[["SL","VENDOR","PHONE","ADDRESS","BILL NO","GST NO","BILL DATE","MATERIAL","TYPE","INFO","QTY","COST","STATUS"]],body:r,startY:20,theme:"grid",styles:{fontSize:8,cellPadding:1.5},headStyles:{fontSize:8,fillColor:[34,139,34],textColor:255},columnStyles:{3:{cellWidth:40},7:{cellWidth:35}}}),t.save("material_records.pdf")},exportToDoc:()=>{let e="<h1>Material Records</h1><table><thead><tr><th>SL.NO</th><th>VENDOR</th><th>PHONE</th><th>ADDRESS</th><th>BILL NO</th><th>GST NO</th><th>BILL DATE</th><th>MATERIAL</th><th>TYPE</th><th>INFO</th><th>QTY</th><th>COST</th><th>STATUS</th></tr></thead><tbody>";[..._,...E].forEach((t,r)=>{e+="<tr>\n            <td>".concat(r+1,"</td> \n            <td>").concat(t.vendorName||n,"</td> \n            <td>").concat(t.vendorPhone||i,"</td>\n            <td>").concat(t.vendorAddress||o,"</td> \n            <td>").concat(t.billNumber||h,"</td> \n            <td>").concat(t.gstNumber||m,"</td>\n            <td>").concat(ie(t.billDate||c),"</td> \n            <td>").concat(t.name," ").concat(t.serialNumber?"(".concat(t.serialNumber,"/").concat(t.modelNumber,")"):"","</td>\n            <td>").concat(t.type,"</td> \n            <td>").concat(t.info,"</td> \n            <td>").concat(t.quantity," ").concat(t.unit?t.unit:"","</td> \n            <td>").concat(t.cost,"</td> \n            <td>").concat(t.status||"Pending","</td>\n        </tr>")});const t=new Blob(["\ufeff","\n        <html xmlns:o='urn:schemas-microsoft-com:office:office' xmlns:w='urn:schemas-microsoft-com:office:word' xmlns='http://www.w3.org/TR/REC-html40'>\n        <head><meta charset='utf-8'><title>Material Records</title>\n        <style>\n            @page { size: A4 landscape; margin: 1.25cm; }\n            body { font-family: Arial, sans-serif; }\n            .container { text-align: center; }\n            h1 { text-align: center; font-size: 16pt; }\n            table { width: 100%; border-collapse: collapse; margin: 20px 0; }\n            th, td { border: 1px solid #dddddd; text-align: center; padding: 8px; font-size: 7pt; }\n            th { background-color: #f2f2f2; font-weight: bold; }\n        </style>\n        </head><body><div class=\"container\">"+e+"</tbody></table></div></body></html>"],{type:"application/msword"}),r=URL.createObjectURL(t),s=document.createElement("a");s.href=r,s.download="material_records.doc",document.body.appendChild(s),s.click(),document.body.removeChild(s)},exportToExcel:()=>{if(!window.XLSX)return void alert("Excel export library is not loaded yet. Please try again in a moment.");const e=[..._,...E].map((e,t)=>[t+1,e.vendorName||n,e.vendorPhone||i,e.vendorAddress||o,e.billNumber||h,e.gstNumber||m,ie(e.billDate||c),"".concat(e.name," ").concat(e.serialNumber?"(".concat(e.serialNumber,"/").concat(e.modelNumber,")"):""),e.type,e.info,"".concat(e.quantity," ").concat(e.unit||""),parseFloat(e.cost),e.status||"Pending"]),t=window.XLSX.utils.aoa_to_sheet([["SL.NO","VENDOR","VENDOR PHONE","VENDOR ADDRESS","BILL NUMBER","GST NUMBER","BILL DATE","MATERIAL","TYPE","INFO","QUANTITY","COST","STATUS"],...e]);t["!cols"]=[{wch:5},{wch:20},{wch:15},{wch:30},{wch:15},{wch:15},{wch:12},{wch:30},{wch:15},{wch:15},{wch:15},{wch:12},{wch:12}];const r={Sheets:{data:t},SheetNames:["data"]};window.XLSX.writeFile(r,"material_records.xlsx")}})]})}function Qp(e){let{data:t,onClose:n,onConfirm:s}=e;const{name:i,quantity:a,costPerItem:o,type:l,info:c,unit:u,consumerUnit:d}=t,[h,f]=(0,r.useState)(()=>Array.from({length:a},()=>({serialNumber:"",modelNumber:"",productCondition:"Good"}))),m=(e,t,n)=>{const r=[...h];r[e][t]=n,f(r)};return(0,wp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,wp.jsxs)("div",{className:"bg-white p-6 md:p-8 rounded-lg shadow-2xl w-full max-w-3xl flex flex-col",style:{maxHeight:"90vh"},children:[(0,wp.jsxs)("h2",{className:"text-2xl font-bold mb-6",children:["Enter Details for ",a," ",i,"s"]}),(0,wp.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,wp.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,wp.jsx)("thead",{className:"bg-gray-100 sticky top-0",children:(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"SL.NO"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"SERIAL NUMBER"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"MODEL NUMBER"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"CONDITION"})]})}),(0,wp.jsx)("tbody",{children:h.map((e,t)=>(0,wp.jsxs)("tr",{className:"border-b",children:[(0,wp.jsx)("td",{className:"p-2",children:t+1}),(0,wp.jsx)("td",{className:"p-2",children:(0,wp.jsx)("input",{type:"text",value:e.serialNumber,onChange:e=>m(t,"serialNumber",e.target.value),className:"w-full p-2 border border-gray-300 rounded-md"})}),(0,wp.jsx)("td",{className:"p-2",children:(0,wp.jsx)("input",{type:"text",value:e.modelNumber,onChange:e=>m(t,"modelNumber",e.target.value),className:"w-full p-2 border border-gray-300 rounded-md"})}),(0,wp.jsx)("td",{className:"p-2",children:(0,wp.jsxs)("select",{value:e.productCondition,onChange:e=>m(t,"productCondition",e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[(0,wp.jsx)("option",{children:"Good"}),(0,wp.jsx)("option",{children:"Normal"}),(0,wp.jsx)("option",{children:"Bad"}),(0,wp.jsx)("option",{children:"For Disposal"})]})})]},t))})]})}),(0,wp.jsxs)("div",{className:"flex justify-end pt-6 gap-4",children:[(0,wp.jsx)("button",{type:"button",onClick:n,className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,wp.jsx)("button",{type:"button",onClick:()=>{for(const t of h)if(!t.serialNumber||!t.modelNumber||!t.productCondition)return void alert("Please fill in all details for every item.");const e=h.map(e=>({id:Date.now()+Math.random(),name:i,type:l,info:c,quantity:1,unit:u,consumerUnit:d,cost:o,serialNumber:e.serialNumber,modelNumber:e.modelNumber,productCondition:e.productCondition}));s(e),n()},className:"px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Confirm & Add Items"})]})]})})}function Yp(e){let{onClose:t,exportToPDF:n,exportToDoc:r,exportToExcel:s}=e;return(0,wp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,wp.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-2xl w-full max-w-sm",children:[(0,wp.jsx)("h2",{className:"text-2xl font-bold mb-6 text-center",children:"Export Records"}),(0,wp.jsxs)("div",{className:"space-y-4",children:[(0,wp.jsx)("button",{onClick:n,className:"w-full px-4 py-2 bg-red-500 text-white rounded-md hover:bg-red-600",children:"Export as PDF"}),(0,wp.jsx)("button",{onClick:r,className:"w-full px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600",children:"Export as DOC"}),(0,wp.jsx)("button",{onClick:s,className:"w-full px-4 py-2 bg-green-500 text-white rounded-md hover:bg-green-600",children:"Export as Excel"})]}),(0,wp.jsx)("div",{className:"flex justify-center pt-6",children:(0,wp.jsx)("button",{type:"button",onClick:t,className:"px-6 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"})})]})})}function Xp(){const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)([]),[i,a]=(0,r.useState)(!0);return(0,r.useEffect)(()=>{const e=dp(Bm(tm(kp,"approval_requests")),e=>{dp(Bm(tm(kp,"distribution_requests")),n=>{const r=new Map,i=new Map;e.forEach(e=>{const t=e.data();"approved"!==t.status&&"partially-approved"!==t.status||t.items.forEach(e=>{if("approved"===e.status){const t=parseInt(e.quantity,10)||0;if("Returnable"===e.type){const n="".concat(e.name,"-").concat(e.serialNumber,"-").concat(e.modelNumber),r=i.get(n);r?r.quantity+=t:i.set(n,u(u({},e),{},{quantity:t}))}else{const n=r.get(e.name);n?n.quantity+=t:r.set(e.name,u(u({},e),{},{quantity:t}))}}})});const o=new Map;n.forEach(e=>{e.data().items.forEach(e=>{if(["pending","approved","collected"].includes(e.status)){const t=parseInt(e.requiredQuantity,10)||0,n="Returnable"===e.type?"".concat(e.name,"-").concat(e.serialNumber,"-").concat(e.modelNumber):e.name,r=o.get(n)||0;o.set(n,r+t)}})});const l=[];r.forEach((e,t)=>{const n=o.get(t)||0,r=e.quantity-n;r>0&&l.push(u(u({},e),{},{quantity:r}))});const c=[];i.forEach((e,t)=>{const n=o.get(t)||0,r=e.quantity-n;r>0&&c.push(u(u({},e),{},{quantity:r}))}),t(c),s(l),a(!1)})});return()=>e()},[]),i?(0,wp.jsx)("div",{className:"text-center p-8",children:"Loading stock..."}):(0,wp.jsxs)("div",{className:"space-y-8",children:[(0,wp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,wp.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Non-Returnable Materials"}),(0,wp.jsx)("div",{className:"overflow-x-auto",children:(0,wp.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,wp.jsx)("thead",{className:"bg-gray-100",children:(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"SL.NO"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"MATERIAL NAME"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"INFO"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"PRESENT QUANTITY"})]})}),(0,wp.jsx)("tbody",{children:n.length>0?n.map((e,t)=>(0,wp.jsxs)("tr",{className:"border-b",children:[(0,wp.jsx)("td",{className:"p-3",children:t+1}),(0,wp.jsx)("td",{className:"p-3",children:e.name}),(0,wp.jsx)("td",{className:"p-3",children:e.info}),(0,wp.jsxs)("td",{className:"p-3",children:[e.quantity," ",e.unit?e.unit:""]})]},e.name)):(0,wp.jsx)("tr",{children:(0,wp.jsx)("td",{colSpan:"4",className:"text-center p-8 text-gray-500",children:"No items in this category."})})})]})})]}),(0,wp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,wp.jsx)("h3",{className:"text-xl font-semibold mb-4",children:"Returnable Material"}),(0,wp.jsx)("div",{className:"overflow-x-auto",children:(0,wp.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,wp.jsx)("thead",{className:"bg-gray-100",children:(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"SL.NO"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"MATERIAL NAME"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"INFO"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"SERIAL NO"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"MODEL NO"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"PRESENT QUANTITY"})]})}),(0,wp.jsx)("tbody",{children:e.length>0?e.map((e,t)=>(0,wp.jsxs)("tr",{className:"border-b",children:[(0,wp.jsx)("td",{className:"p-3",children:t+1}),(0,wp.jsx)("td",{className:"p-3",children:e.name}),(0,wp.jsx)("td",{className:"p-3",children:e.info}),(0,wp.jsx)("td",{className:"p-3",children:e.serialNumber||"N/A"}),(0,wp.jsx)("td",{className:"p-3",children:e.modelNumber||"N/A"}),(0,wp.jsxs)("td",{className:"p-3",children:[e.quantity," ",e.unit?e.unit:""]})]},"".concat(e.name,"-").concat(e.serialNumber))):(0,wp.jsx)("tr",{children:(0,wp.jsx)("td",{colSpan:"6",className:"text-center p-8 text-gray-500",children:"No items in this category."})})})]})})]})]})}function Jp(e){let{user:t,userRole:n,onLogout:s}=e;const[i,a]=(0,r.useState)("consumerRequest"),[o,l]=(0,r.useState)(null),[c,u]=(0,r.useState)(!0);(0,r.useEffect)(()=>{if(!t)return;(async()=>{u(!0);try{const e=nm(kp,"users",t.uid),n=await ip(e);n.exists()?l(n.data().sections||[]):l([])}catch(e){console.error("Error fetching approver sections:",e),l([])}finally{u(!1)}})()},[t]);const d=e=>{let{tabId:t,children:n}=e;return(0,wp.jsx)("button",{onClick:()=>a(t),className:"px-4 py-2 text-sm font-medium rounded-t-lg transition-colors duration-200 focus:outline-none ".concat(i===t?"border-b-2 border-blue-600 text-blue-600":"text-gray-500 hover:text-gray-700"),children:n})};return(0,wp.jsxs)("div",{className:"flex flex-col h-screen p-4 md:p-8 bg-gray-50",children:[(0,wp.jsxs)("header",{className:"flex-shrink-0 flex justify-between items-center mb-6",children:[(0,wp.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Approval Portal"}),(0,wp.jsxs)("div",{className:"flex items-center gap-4",children:[(0,wp.jsx)("span",{className:"text-gray-600",children:t.email?t.email.split("@")[0]:""}),(0,wp.jsx)(Dp,{user:t,userRole:n,onLogout:s})]})]}),(0,wp.jsx)("nav",{className:"flex-shrink-0 border-b border-gray-200",children:(0,wp.jsxs)("div",{className:"flex space-x-4",children:[(0,wp.jsx)(d,{tabId:"caseWorkerRequest",children:"Case Worker Request"}),(0,wp.jsx)(d,{tabId:"consumerRequest",children:"Consumer Request"}),(0,wp.jsx)(d,{tabId:"existingItems",children:"Existing Items"}),(0,wp.jsx)(d,{tabId:"annualVerification",children:"Annual Verification"})]})}),(0,wp.jsx)("main",{className:"flex-grow overflow-y-auto pt-6",children:(()=>{if(c)return(0,wp.jsx)("div",{className:"text-center p-8",children:"Loading your details..."});switch(i){case"caseWorkerRequest":default:return(0,wp.jsx)(Zp,{});case"consumerRequest":return(0,wp.jsx)(eg,{approverSections:o});case"existingItems":return(0,wp.jsx)(Xp,{});case"annualVerification":return(0,wp.jsx)($p,{})}})()})]})}function $p(){const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)({}),[i,a]=(0,r.useState)({}),[o,l]=(0,r.useState)({});(0,r.useEffect)(()=>{const e=dp(tm(kp,"users"),e=>{const t={};e.forEach(e=>{t[e.id]=e.data()}),s(t)}),n=dp(Bm(tm(kp,"annual_verification_requests"),Gm("status","==","pending")),e=>{const n=e.docs.map(e=>u({id:e.id},e.data()));t(n);const r={};n.forEach(e=>{e.items.forEach(e=>{r[e.id]=e.newCondition})}),a(r)});return()=>{e(),n()}},[]);const c=async(e,t)=>{const{id:n,items:r}=e,s=nm(kp,"annual_verification_requests",n);try{await vp(kp,async e=>{const n=new Map;if("verified-changed"===t){const t=r.reduce((e,t)=>{const n=i[t.id]||t.newCondition;return e[t.distributionId]||(e[t.distributionId]=[]),e[t.distributionId].push(u(u({},t),{},{newCondition:n})),e},{}),s=Object.keys(t).map(n=>{const r=nm(kp,"distribution_requests",n);return e.get(r).then(e=>({id:n,ref:r,snapshot:e,itemsToUpdate:t[n]}))});(await Promise.all(s)).forEach(e=>{if(!e.snapshot.exists())throw new Error("Distribution document ".concat(e.id," not found!"));n.set(e.id,e)})}const a=r.map(e=>{const t=i[e.id]&&i[e.id]!==e.newCondition;return u(u({},e),{},{remarks:t?"Physically Verified and Changed":"",physicallyVerifiedDate:t&&o[e.id]||""})});e.update(s,{status:t,items:a}),"verified-changed"===t&&n.forEach(t=>{const n=t.snapshot.data().items.map(e=>{const n=t.itemsToUpdate.find(t=>t.serialNumber===e.serialNumber);return n?u(u({},e),{},{productCondition:n.newCondition}):e});e.update(t.ref,{items:n})})}),alert("Request has been successfully processed as ".concat(t,"."))}catch(a){console.error("Error processing verification request: ",a),alert("Failed to process the request. Please try again.")}},d=e=>{if(!e)return"N/A";return e.toDate().toLocaleDateString("en-GB")};return(0,wp.jsx)("div",{className:"space-y-6",children:0===e.length?(0,wp.jsx)("p",{className:"text-gray-500 text-center mt-8",children:"No pending annual verification requests."}):e.map(e=>{const t=e.items.some(e=>i[e.id]&&i[e.id]!==e.newCondition);return(0,wp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,wp.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Caseworker"}),(0,wp.jsx)("p",{className:"font-semibold",children:e.caseworkerEmail})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Date Submitted"}),(0,wp.jsx)("p",{className:"font-semibold",children:d(e.submittedAt)})]})]}),(0,wp.jsx)("div",{className:"overflow-x-auto",children:(0,wp.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,wp.jsx)("thead",{className:"bg-gray-100",children:(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"Sl.No"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"Material Name"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"Model"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"Serial Number"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"Consumer Name"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"Date of Taken"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"New Condition"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"Verified Date"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"Remarks"})]})}),(0,wp.jsx)("tbody",{children:e.items.map((e,t)=>{const r=n[e.consumerId]||{},s=i[e.id]&&i[e.id]!==e.newCondition;return(0,wp.jsxs)("tr",{className:"border-b",children:[(0,wp.jsx)("td",{className:"p-3",children:t+1}),(0,wp.jsx)("td",{className:"p-3",children:e.name}),(0,wp.jsx)("td",{className:"p-3",children:e.modelNumber}),(0,wp.jsx)("td",{className:"p-3",children:e.serialNumber}),(0,wp.jsx)("td",{className:"p-3",children:r.name||"N/A"}),(0,wp.jsx)("td",{className:"p-3",children:d(e.dateTaken)}),(0,wp.jsx)("td",{className:"p-3",children:(0,wp.jsxs)("select",{value:i[e.id]||e.newCondition,onChange:t=>{return n=e.id,r=t.target.value,void a(e=>u(u({},e),{},{[n]:r}));var n,r},className:"w-full p-2 border border-gray-300 rounded-md",children:[(0,wp.jsx)("option",{children:"Good"}),(0,wp.jsx)("option",{children:"Normal"}),(0,wp.jsx)("option",{children:"Bad"}),(0,wp.jsx)("option",{children:"For Disposal"})]})}),(0,wp.jsx)("td",{className:"p-3",children:s&&(0,wp.jsx)("input",{type:"date",className:"w-full p-2 border border-gray-300 rounded-md",value:o[e.id]||"",onChange:t=>((e,t)=>{const n=new Date(t),r=new Date;r.setHours(0,0,0,0),n>r?alert("Invalid date. Please do not select a future date."):l(n=>u(u({},n),{},{[e]:t}))})(e.id,t.target.value)})}),(0,wp.jsx)("td",{className:"p-3",children:s&&"Physically Verified and Changed"})]},e.id)})})]})}),(0,wp.jsxs)("div",{className:"flex justify-end mt-6 gap-4",children:[t&&(0,wp.jsx)("button",{onClick:()=>c(e,"verified-changed"),className:"px-6 py-2 bg-yellow-500 text-white font-semibold rounded-md hover:bg-yellow-600",children:"Verified and Changed"}),(0,wp.jsx)("button",{onClick:()=>c(e,"approved"),className:"px-6 py-2 bg-green-600 text-white font-semibold rounded-md hover:bg-green-700",children:"Approve"})]})]},e.id)})})}function Zp(){const[e,t]=(0,r.useState)([]),[n,s]=(0,r.useState)({});(0,r.useEffect)(()=>{const e=dp(Bm(tm(kp,"approval_requests"),Gm("status","==","pending")),e=>{const n=e.docs.map(e=>u({id:e.id},e.data()));t(n)});return()=>e()},[]);const i=(e,t,n)=>{s(r=>{var s;return u(u({},r),{},{[e]:u(u({},r[e]),{},{[t]:u(u({},null===(s=r[e])||void 0===s?void 0:s[t]),{},{status:n})})})})},a=e=>{if(!e)return"N/A";const[t,n,r]=e.split("-");return"".concat(r,"/").concat(n,"/").concat(t)};return(0,wp.jsx)("div",{className:"space-y-6",children:0===e.length?(0,wp.jsx)("p",{className:"text-gray-500 text-center mt-8",children:"No pending requests from Case Workers."}):e.map(e=>(0,wp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,wp.jsxs)("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Vendor Name"}),(0,wp.jsx)("p",{className:"font-semibold",children:e.vendorName})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Bill No."}),(0,wp.jsx)("p",{className:"font-semibold",children:e.billNumber})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Bill Date"}),(0,wp.jsx)("p",{className:"font-semibold",children:a(e.billDate)})]})]}),(0,wp.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,wp.jsx)("thead",{className:"bg-gray-100",children:(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"SL.NO"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"MATERIAL NAME"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"TYPE"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"QUANTITY"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"TOTAL COST WITH GST"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"APPROVAL / REJECT"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"REMARKS"})]})}),(0,wp.jsx)("tbody",{children:e.items.map((t,r)=>{var a;const o=(null===(a=n[e.id])||void 0===a?void 0:a[t.id])||{};return(0,wp.jsxs)("tr",{className:"border-b",children:[(0,wp.jsx)("td",{className:"p-3",children:r+1}),(0,wp.jsx)("td",{className:"p-3",children:t.name}),(0,wp.jsx)("td",{className:"p-3",children:t.type}),(0,wp.jsxs)("td",{className:"p-3",children:[t.quantity," ",t.unit?t.unit:""]}),(0,wp.jsxs)("td",{className:"p-3",children:["\u20b9",t.cost]}),(0,wp.jsx)("td",{className:"p-3",children:(0,wp.jsxs)("div",{className:"flex gap-2",children:[(0,wp.jsx)("button",{onClick:()=>i(e.id,t.id,"approved"),className:"p-1 w-7 h-7 flex items-center justify-center rounded-full ".concat("approved"===o.status?"bg-green-500 text-white":"bg-gray-200"),children:"\u2713"}),(0,wp.jsx)("button",{onClick:()=>i(e.id,t.id,"rejected"),className:"p-1 w-7 h-7 flex items-center justify-center rounded-full ".concat("rejected"===o.status?"bg-red-500 text-white":"bg-gray-200"),children:"\u2717"})]})}),(0,wp.jsx)("td",{className:"p-3",children:"rejected"===o.status&&(0,wp.jsx)("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded-md",value:o.remarks||"",onChange:n=>{return r=e.id,i=t.id,a=n.target.value,void s(e=>{var t;return u(u({},e),{},{[r]:u(u({},e[r]),{},{[i]:u(u({},null===(t=e[r])||void 0===t?void 0:t[i]),{},{remarks:a})})})});var r,i,a}})})]},t.id)})})]}),(0,wp.jsx)("div",{className:"flex justify-end mt-6",children:(0,wp.jsx)("button",{onClick:()=>(async e=>{const t=nm(kp,"approval_requests",e),r=n[e]||{};try{await vp(kp,async e=>{const n=await e.get(t);if(!n.exists())throw new Error("Document does not exist!");const s=n.data().items;let i=!0,a=!1;const o=s.map(e=>{const t=r[e.id];return!t||"approved"!==t.status&&"rejected"!==t.status?(i=!1,e):("approved"!==t.status&&(i=!1),"approved"===t.status&&(a=!0),u(u({},e),{},{status:t.status,remarks:t.remarks||""}))}),l=i?"approved":a?"partially-approved":"rejected";e.update(t,{items:o,status:l})}),alert("Approvals submitted successfully!")}catch(s){console.error("Error submitting approvals: ",s),alert("Failed to submit approvals. Please try again.")}})(e.id),className:"px-6 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700",children:"Confirm approval"})})]},e.id))})}function eg(e){let{approverSections:t}=e;const[n,s]=(0,r.useState)([]),[i,a]=(0,r.useState)({}),[o,l]=(0,r.useState)({}),[c,d]=(0,r.useState)(!0);(0,r.useEffect)(()=>{const e=dp(tm(kp,"users"),e=>{const t={};e.forEach(e=>{t[e.id]=e.data()}),a(t)});if(!t)return void d(!1);if(0===t.length)return s([]),void d(!1);const n=dp(Bm(tm(kp,"distribution_requests"),Gm("status","==","pending"),Gm("section","in",t)),e=>{const t=e.docs.map(e=>u({id:e.id},e.data()));s(t),d(!1)},e=>{console.error("Error fetching consumer requests:",e),d(!1)});return()=>{e(),n()}},[t]);const h=(e,t,n)=>{l(r=>{var s;return u(u({},r),{},{[e]:u(u({},r[e]),{},{[t]:u(u({},null===(s=r[e])||void 0===s?void 0:s[t]),{},{status:n})})})})},f=e=>{if(!e)return"N/A";const t=e.toDate(),n=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0"),s=t.getFullYear();return"".concat(n,"/").concat(r,"/").concat(s)};return(0,wp.jsx)("div",{className:"space-y-6",children:c?(0,wp.jsx)("p",{className:"text-gray-500 text-center mt-8",children:"Loading requests..."}):0===n.length?(0,wp.jsx)("p",{className:"text-gray-500 text-center mt-8",children:"No pending requests for your assigned sections."}):n.map(e=>{const t=i[e.consumerId]||{};return(0,wp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,wp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Consumer Name"}),(0,wp.jsx)("p",{className:"font-semibold",children:t.name||"N/A"})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Designation"}),(0,wp.jsx)("p",{className:"font-semibold",children:t.designation||"N/A"})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Requested Section"}),(0,wp.jsx)("p",{className:"font-semibold",children:e.section||"N/A"})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"text-sm font-medium text-gray-500",children:"Date"}),(0,wp.jsx)("p",{className:"font-semibold",children:f(e.submittedAt)})]})]}),(0,wp.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,wp.jsx)("thead",{className:"bg-gray-100",children:(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"SL.NO"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"MATERIAL"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"TYPE"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"QUANTITY"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"APPROVE / REJECT"}),(0,wp.jsx)("th",{className:"p-3 font-semibold",children:"REMARKS"})]})}),(0,wp.jsx)("tbody",{children:e.items.map((t,n)=>{var r;const s=(null===(r=o[e.id])||void 0===r?void 0:r[t.name])||{};return(0,wp.jsxs)("tr",{className:"border-b",children:[(0,wp.jsx)("td",{className:"p-3",children:n+1}),(0,wp.jsx)("td",{className:"p-3",children:t.name}),(0,wp.jsx)("td",{className:"p-3",children:t.type||"N/A"}),(0,wp.jsxs)("td",{className:"p-3",children:[t.requiredQuantity," ",t.unit?t.unit:""]}),(0,wp.jsx)("td",{className:"p-3",children:(0,wp.jsxs)("div",{className:"flex gap-2",children:[(0,wp.jsx)("button",{onClick:()=>h(e.id,t.name,"approved"),className:"p-1 w-7 h-7 flex items-center justify-center rounded-full ".concat("approved"===s.status?"bg-green-500 text-white":"bg-gray-200"),children:"\u2713"}),(0,wp.jsx)("button",{onClick:()=>h(e.id,t.name,"rejected"),className:"p-1 w-7 h-7 flex items-center justify-center rounded-full ".concat("rejected"===s.status?"bg-red-500 text-white":"bg-gray-200"),children:"\u2717"})]})}),(0,wp.jsx)("td",{className:"p-3",children:"rejected"===s.status&&(0,wp.jsx)("input",{type:"text",placeholder:"Add remarks...",className:"w-full p-2 border border-gray-300 rounded-md",value:s.remarks||"",onChange:n=>{return r=e.id,s=t.name,i=n.target.value,void l(e=>{var t;return u(u({},e),{},{[r]:u(u({},e[r]),{},{[s]:u(u({},null===(t=e[r])||void 0===t?void 0:t[s]),{},{remarks:i})})})});var r,s,i}})})]},n)})})]}),(0,wp.jsx)("div",{className:"flex justify-end mt-6",children:(0,wp.jsx)("button",{onClick:()=>(async e=>{const t=nm(kp,"distribution_requests",e),n=o[e]||{};try{await vp(kp,async e=>{const r=await e.get(t);if(!r.exists())throw new Error("Document does not exist!");const s=r.data().items;let i=!0,a=!1;const o=s.map(e=>{const t=n[e.name];return!t||"approved"!==t.status&&"rejected"!==t.status?(i=!1,e):("approved"!==t.status&&(i=!1),"approved"===t.status&&(a=!0),u(u({},e),{},{status:t.status,remarks:t.remarks||""}))}),l=i?"approved":a?"partially-approved":"rejected";e.update(t,{items:o,status:l})}),alert("Approvals submitted successfully!")}catch(r){console.error("Error submitting approvals: ",r),alert("Failed to submit approvals. Please try again.")}})(e.id),className:"px-6 py-2 bg-blue-600 text-white font-semibold rounded-md hover:bg-blue-700",children:"Confirm Approval"})})]},e.id)})})}function tg(e){let{onConfirm:t,onCancel:n,messengers:s,consumerName:i,consumerSections:a,onPrint:o,items:l}=e;const[c,u]=(0,r.useState)(i||""),[d,h]=(0,r.useState)("");(0,r.useEffect)(()=>{a&&a.length>0&&h(a[0])},[a]);return(0,wp.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center z-50 p-4",children:(0,wp.jsxs)("div",{className:"bg-white p-8 rounded-lg shadow-2xl w-full max-w-sm",children:[(0,wp.jsx)("h2",{className:"text-xl font-bold mb-4 text-center",children:"Confirm Submission"}),(0,wp.jsx)("p",{className:"text-center text-gray-600 mb-6",children:"Please specify the section and collector for this request."}),(0,wp.jsxs)("div",{className:"space-y-4",children:[(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{htmlFor:"section",className:"block text-sm font-medium text-gray-700 mb-1",children:"Section"}),(0,wp.jsxs)("select",{id:"section",value:d,onChange:e=>h(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[(0,wp.jsx)("option",{value:"",children:"Select a Section"}),(a||[]).map(e=>(0,wp.jsx)("option",{value:e,children:e},e))]})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{htmlFor:"messenger",className:"block text-sm font-medium text-gray-700 mb-1",children:"Collector's Name"}),(0,wp.jsxs)("select",{id:"messenger",value:c,onChange:e=>u(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",children:[i&&(0,wp.jsxs)("option",{value:i,children:[i," (Myself)"]}),s.map(e=>(0,wp.jsx)("option",{value:e.name,children:e.name},e.id))]})]})]}),(0,wp.jsxs)("div",{className:"flex justify-center gap-4 mt-6",children:[(0,wp.jsx)("button",{onClick:n,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:"Cancel"}),(0,wp.jsxs)("button",{onClick:()=>{d&&c?o(l,c,d):alert("Please select a section and collector before printing.")},className:"px-4 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 flex items-center gap-2",children:[(0,wp.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,wp.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}),"Print"]}),(0,wp.jsx)("button",{onClick:()=>{d?c?t(c,d):alert("Please select a collector."):alert("Please select a section for the request.")},className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:"Confirm"})]})]})})}function ng(e){var t;let{user:n,onLogout:s}=e;const[a,o]=(0,r.useState)({}),[l,c]=(0,r.useState)([]),[d,h]=(0,r.useState)([]),[f,m]=(0,r.useState)([]),[p,g]=(0,r.useState)({}),[y,v]=(0,r.useState)(""),[b,w]=(0,r.useState)(""),[x,N]=(0,r.useState)(null),[S,E]=(0,r.useState)([]),[k,_]=(0,r.useState)([]),[T,C]=(0,r.useState)(!1),[I,j]=(0,r.useState)(!1),[A,P]=(0,r.useState)([]),[R,D]=(0,r.useState)(""),[O,L]=(0,r.useState)([]);const M=e=>{if(!e)return"N/A";const t=e.toDate(),n=String(t.getDate()).padStart(2,"0"),r=String(t.getMonth()+1).padStart(2,"0"),s=t.getFullYear();return"".concat(n,"/").concat(r,"/").concat(s)},F=e=>{if(!e)return"N/A";const[t,n,r]=e.split("-");return"".concat(r,"/").concat(n,"/").concat(t)};(0,r.useEffect)(()=>{const e=dp(tm(kp,"users"),e=>{const t={};e.forEach(e=>{t[e.id]=e.data()}),o(t)}),t=dp(Bm(tm(kp,"approval_requests")),e=>{const t={};e.forEach(e=>{e.data().items.forEach(n=>{n.serialNumber&&(t[n.serialNumber]=e.data().billDate)})}),g(t)});return()=>{e(),t()}},[]),(0,r.useEffect)(()=>{const e=dp(Bm(tm(kp,"approval_requests"),Gm("status","in",["approved","partially-approved"])),e=>{const t=new Map;e.forEach(e=>{e.data().items.forEach(e=>{if("approved"===e.status){const n=parseInt(e.quantity,10);if(t.has(e.name)){t.get(e.name).quantity+=n}else t.set(e.name,u(u({},e),{},{quantity:n}))}})}),c(Array.from(t.values()))});return e},[]),(0,r.useEffect)(()=>{const e=dp(Bm(tm(kp,"distribution_requests")),e=>{const t=new Map;e.forEach(e=>{e.data().items.forEach(e=>{if("rejected"!==e.status){const n=parseInt(e.requiredQuantity,10)||0;if(t.has(e.name)){t.get(e.name).quantity+=n}else t.set(e.name,{name:e.name,quantity:n})}})}),h(Array.from(t.values()))});return e},[]),(0,r.useEffect)(()=>{if(!n)return;const e=dp(Bm(tm(kp,"distribution_requests"),Gm("consumerId","==",n.uid)),e=>{const t=e.docs.map(e=>u({id:e.id},e.data()));_(t);const n=t.some(e=>"pending"===e.status);C(n)}),t=dp(Bm(tm(kp,"users"),Gm("role","==","messenger")),e=>{const t=e.docs.map(e=>u({id:e.id},e.data()));P(t)}),r=dp(nm(kp,"users",n.uid),e=>{if(e.exists()){const t=e.data();D(t.name),L(t.sections||[])}});return()=>{e(),t(),r()}},[n]),(0,r.useEffect)(()=>{if(!n)return;if(T)return void E([]);const e=dp(Bm(tm(kp,"users/".concat(n.uid,"/pending_requests"))),e=>{const t=e.docs.map(e=>u({id:e.id},e.data()));E(t)});return e},[n,T]),(0,r.useEffect)(()=>{const e=new Map;l.forEach(t=>{e.set(t.name,u({},t))}),d.forEach(t=>{e.has(t.name)&&(e.get(t.name).quantity-=t.quantity)});const t=Array.from(e.values()).filter(e=>e.quantity>0);m(t)},[l,d]);const U=f.find(e=>e.name===y),V=S.filter(e=>e.name===y&&e.id!==x).reduce((e,t)=>e+parseInt(t.requiredQuantity,10),0),z=((null===U||void 0===U?void 0:U.quantity)||0)-V,q=f.filter(e=>!S.some(t=>t.name===e.name)||x&&y===e.name),B=T?(null===(t=k.find(e=>"pending"===e.status))||void 0===t?void 0:t.items)||[]:S,H=k.filter(e=>"pending"!==e.status).flatMap(e=>e.items.map(t=>u(u({},t),{},{requestId:e.id,requestStatus:e.status,dateOfPurchase:p[t.serialNumber]||null}))).filter(e=>"pending"!==e.status),G=H.filter(e=>"Returnable"!==e.type),W=H.filter(e=>"Returnable"===e.type),K=(e,t,n)=>{let r="N/A",s=e.remarks||"---";switch(e.status){case"collected":r="Collected",s="---";break;case"approved":r="Approved",s="Ready for collection";break;case"rejected":r="Rejected";break;default:r=e.status}return(0,wp.jsxs)("tr",{className:"border-b",children:[(0,wp.jsx)("td",{className:"p-3",children:t+1}),(0,wp.jsx)("td",{className:"p-3",children:e.name}),n&&(0,wp.jsx)("td",{className:"p-3",children:e.serialNumber||"N/A"}),n&&(0,wp.jsx)("td",{className:"p-3",children:e.modelNumber||"N/A"}),n&&(0,wp.jsx)("td",{className:"p-3",children:F(e.dateOfPurchase)}),(0,wp.jsx)("td",{className:"p-3",children:M(e.dateTaken)}),(0,wp.jsxs)("td",{className:"p-3",children:[e.requiredQuantity||e.quantity," ",e.unit?e.unit:""]}),(0,wp.jsx)("td",{className:"p-3",children:r}),(0,wp.jsx)("td",{className:"p-3",children:s}),n&&(0,wp.jsx)("td",{className:"p-3",children:"---"})]},"".concat(e.requestId,"-").concat(t))};return(0,wp.jsxs)("div",{className:"flex flex-col h-screen p-4 md:p-8",children:[I&&(0,wp.jsx)(tg,{onConfirm:async(e,t)=>{try{await up(tm(kp,"distribution_requests"),{consumerId:n.uid,consumerEmail:n.email,messengerName:e,section:t,items:S.map(e=>{let{id:t}=e;return i(e,xp)}),status:"pending",submittedAt:bp()});const r=Bm(tm(kp,"users/".concat(n.uid,"/pending_requests"))),s=await op(r),a=[];s.forEach(e=>{a.push(cp(e.ref))}),await Promise.all(a),alert("Distribution request sent for approval!")}catch(r){console.error("Error sending distribution request: ",r),alert("Failed to send request. Please try again.")}finally{j(!1)}},onCancel:()=>j(!1),messengers:A,consumerName:R,consumerSections:O,items:S,onPrint:async(e,t,r)=>{if("undefined"===typeof window.html2canvas||"undefined"===typeof window.jspdf||!window.jspdf.jsPDF)return void alert("Printing libraries are not yet loaded. Please wait a moment and try again.");const s=a[n.uid]||{};let i={};if(t===s.name)i=s;else{const e=Bm(tm(kp,"users"),Gm("name","==",t),Gm("role","==","messenger")),n=await op(e);n.empty||(i=n.docs[0].data())}const o=s.name||"[Name]",l=s.designation||"[Designation]",c=r||"[Section]",u=i.name||"[Messenger Name]",d=i.designation||"[Messenger\u2019s Designation]",h=(new Date).toLocaleDateString("en-GB"),f=e.map((e,t)=>'\n            <tr>\n                <td style="border: 1px solid #ccc; padding: 8px; text-align: center; vertical-align: middle;">'.concat(t+1,'</td>\n                <td style="border: 1px solid #ccc; padding: 8px; text-align: center; vertical-align: middle;">').concat(e.name,'</td>\n                <td style="border: 1px solid #ccc; padding: 8px; text-align: center; vertical-align: middle;">').concat(e.requiredQuantity,"</td>\n            </tr>\n        ")).join(""),m='\n            <div id="pdf-render-content" style="width: 210mm; background-color: white; color: black; padding: 15mm; font-family: \'Noto Sans Kannada\', sans-serif;">\n                <h2 style="text-align: left; font-size: 18px; margin-bottom: 25px; font-weight: bold;">\u0ca8\u0cbf\u0cb5\u0cc7\u0ca6\u0ca8\u0cc6:</h2>\n                <p style="font-size: 14px; line-height: 1.6; text-align: justify;">\n                    '.concat(o,", ").concat(l," \u0c86\u0ca6 \u0ca8\u0ca8\u0c97\u0cc6 ").concat(c,' \u0cb6\u0cbe\u0c96\u0cc6\u0caf \u0c89\u0ca6\u0ccd\u0ca6\u0cc7\u0cb6\u0c95\u0ccd\u0c95\u0cbe\u0c97\u0cbf \u0c88 \u0c95\u0cc6\u0cb3\u0c95\u0c82\u0ca1 \u0cb2\u0cc7\u0c96\u0ca8 / \u0cb2\u0cc7\u0c96\u0ca8\u0cc7\u0ca4\u0cb0 \u0cb8\u0cbe\u0cae\u0c97\u0ccd\u0cb0\u0cbf\u0c97\u0cb3\u0ca8\u0ccd\u0ca8\u0cc1 \u0c92\u0ca6\u0c97\u0cbf\u0cb8\u0cb2\u0cc1 \u0c95\u0ccb\u0cb0\u0cbf\u0ca6\u0cc6.\n                </p>\n                <div style="display: flex; justify-content: center; width: 100%; margin-top: 20px; margin-bottom: 20px;">\n                     <table style="width: 100%; border-collapse: collapse; font-size: 14px;">\n                        <thead>\n                            <tr style="background-color: #008080; color: white;">\n                                <th style="border: 1px solid #ccc; padding: 10px; font-weight: bold; text-align: center; vertical-align: middle;">Sl. No.</th>\n                                <th style="border: 1px solid #ccc; padding: 10px; font-weight: bold; text-align: center; vertical-align: middle;">Material Name</th>\n                                <th style="border: 1px solid #ccc; padding: 10px; font-weight: bold; text-align: center; vertical-align: middle;">Total Numbers</th>\n                            </tr>\n                        </thead>\n                        <tbody>\n                            ').concat(f,'\n                        </tbody>\n                    </table>\n                </div>\n                <p style="font-size: 14px; line-height: 1.6; margin-top: 20px; text-align: justify;">\n                    \u0cae\u0cc7\u0cb2\u0ccd\u0c95\u0c82\u0ca1 \u0cb8\u0cbe\u0cae\u0c97\u0ccd\u0cb0\u0cbf\u0c97\u0cb3\u0ca8\u0ccd\u0ca8\u0cc1 ').concat(u,", ").concat(d,' \u0cb0\u0cb5\u0cb0 \u0cb9\u0cb8\u0ccd\u0ca4 \u0ca8\u0cc0\u0ca1\u0cb2\u0cc1 \u0c95\u0ccb\u0cb0\u0cbf\u0ca6\u0cc6.\n                </p>\n                <div style="margin-top: 50px; display: flex; justify-content: space-between; font-size: 14px;">\n                    <div>Date: ').concat(h,'</div>\n                    <div style="text-align: right;">\n                        <div>').concat(o,"</div>\n                        <div>").concat(l,"</div>\n                    </div>\n                </div>\n            </div>\n        "),p=document.createElement("div");p.style.position="absolute",p.style.left="-9999px",p.innerHTML=m,document.body.appendChild(p);try{const e=(await window.html2canvas(document.getElementById("pdf-render-content"),{scale:2})).toDataURL("image/png"),{jsPDF:t}=window.jspdf,n=new t({orientation:"p",unit:"mm",format:"a4"}),r=n.getImageProperties(e),s=n.internal.pageSize.getWidth(),i=r.height*s/r.width;n.addImage(e,"PNG",0,0,s,i),n.save("\u0ca8\u0cbf\u0cb5\u0cc7\u0ca6\u0ca8\u0cc6.pdf")}catch(g){console.error("Error generating PDF from HTML:",g),alert("An error occurred while creating the PDF. Please try again.")}finally{document.body.removeChild(p)}}}),(0,wp.jsxs)("header",{className:"flex-shrink-0 flex justify-between items-center mb-8",children:[(0,wp.jsx)("h1",{className:"text-3xl font-bold text-gray-800",children:"Consumer Portal"}),(0,wp.jsxs)("div",{className:"flex items-center gap-4",children:[(0,wp.jsx)("span",{className:"text-gray-600",children:n.email}),(0,wp.jsx)(Dp,{user:n,onLogout:s})]})]}),(0,wp.jsxs)("main",{className:"flex-grow grid grid-cols-2 gap-8 overflow-y-auto",children:[(0,wp.jsxs)("div",{className:"flex flex-col gap-8",children:[(0,wp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[(0,wp.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Request Materials"}),(0,wp.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[(0,wp.jsxs)("div",{className:"md:col-span-1",children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Material"}),(0,wp.jsxs)("select",{value:y,onChange:e=>v(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",disabled:T,children:[(0,wp.jsx)("option",{value:"",children:"Select Material"}),q.map(e=>(0,wp.jsx)("option",{value:e.name,children:e.name},e.id))]})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity Available"}),(0,wp.jsx)("input",{type:"text",readOnly:!0,value:"".concat(z," ").concat((null===U||void 0===U?void 0:U.consumerUnit)||""),className:"w-full p-2 bg-gray-100 border border-gray-300 rounded-md"})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Required Quantity"}),(0,wp.jsx)("input",{type:"number",value:b,onChange:e=>w(e.target.value),className:"w-full p-2 border border-gray-300 rounded-md",min:"1",disabled:T})]})]}),(0,wp.jsx)("div",{className:"mt-4 flex justify-end gap-4",children:(0,wp.jsx)("button",{onClick:async()=>{if(!y||!b||parseInt(b,10)<=0)return void alert("Please select a material and enter a valid quantity.");const e=f.find(e=>e.name===y);if(!e)return void alert("Selected material details not found. Please try again.");const t=S.filter(e=>e.name===y&&e.id!==x).reduce((e,t)=>e+parseInt(t.requiredQuantity,10),0),r=(e?e.quantity:0)-t;if(parseInt(b,10)>r)return void alert("Required quantity (".concat(b,") cannot be more than the available quantity of ").concat(r,"."));const s={name:y,requiredQuantity:b,status:"Pending",type:e.type,info:e.info,unit:e.consumerUnit||e.unit,serialNumber:e.serialNumber||"",modelNumber:e.modelNumber||""};try{if(x){const e=nm(kp,"users/".concat(n.uid,"/pending_requests"),x);await lp(e,s)}else await up(tm(kp,"users/".concat(n.uid,"/pending_requests")),s)}catch(i){console.error("Error saving pending request:",i),alert("Could not save the item. Please try again.")}v(""),w(""),N(null)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",disabled:T,children:x?"Update Item":"Add More"})})]}),(0,wp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md flex-grow flex flex-col",children:[(0,wp.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Pending Lists"}),(0,wp.jsx)("div",{className:"flex-grow overflow-y-auto",children:(0,wp.jsxs)("table",{className:"w-full text-left",children:[(0,wp.jsx)("thead",{children:(0,wp.jsxs)("tr",{className:"bg-gray-100",children:[(0,wp.jsx)("th",{className:"p-3",children:"Sl.No"}),(0,wp.jsx)("th",{className:"p-3",children:"Material"}),(0,wp.jsx)("th",{className:"p-3",children:"Required Quantity"}),(0,wp.jsx)("th",{className:"p-3",children:"Status"}),(0,wp.jsx)("th",{className:"p-3",children:"Action"})]})}),(0,wp.jsxs)("tbody",{children:[B.map((e,t)=>(0,wp.jsxs)("tr",{className:"border-b",children:[(0,wp.jsx)("td",{className:"p-3",children:t+1}),(0,wp.jsx)("td",{className:"p-3",children:e.name}),(0,wp.jsxs)("td",{className:"p-3",children:[e.requiredQuantity," ",e.unit?e.unit:""]}),(0,wp.jsx)("td",{className:"p-3 capitalize",children:T?"Pending Approval":e.status}),(0,wp.jsx)("td",{className:"p-3",children:!T&&(0,wp.jsxs)("div",{className:"flex gap-2",children:[(0,wp.jsx)("button",{onClick:()=>{return N((t=e).id),v(t.name),void w(t.requiredQuantity);var t},className:"text-sm px-2 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200",children:"Edit"}),(0,wp.jsx)("button",{onClick:()=>(async e=>{try{await cp(nm(kp,"users/".concat(n.uid,"/pending_requests"),e))}catch(t){console.error("Error deleting pending request:",t),alert("Could not delete the item. Please try again.")}})(e.id),className:"text-sm px-2 py-1 bg-red-100 text-red-700 rounded-md hover:bg-red-200",children:"Delete"})]})})]},e.id||t)),0===B.length&&(0,wp.jsx)("tr",{children:(0,wp.jsx)("td",{colSpan:"5",className:"text-center p-8 text-gray-500",children:"No items in pending list."})})]})]})}),(0,wp.jsx)("div",{className:"mt-4 flex justify-end",children:(0,wp.jsx)("button",{onClick:()=>{0!==S.length?j(!0):alert("Please add at least one item to the list before submitting.")},className:"px-6 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",disabled:0===S.length||T,children:"Send for Approval"})})]})]}),(0,wp.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-md flex flex-col",children:[(0,wp.jsx)("h2",{className:"text-2xl font-semibold mb-4",children:"Record Table"}),(0,wp.jsxs)("div",{className:"flex-grow overflow-y-auto space-y-6",children:[(0,wp.jsxs)("div",{children:[(0,wp.jsx)("h3",{className:"text-xl font-semibold mb-3",children:"Non-Returnable"}),(0,wp.jsxs)("table",{className:"w-full text-left",children:[(0,wp.jsx)("thead",{className:"bg-gray-100",children:(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold",children:"SL. NO"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold",children:"MATERIAL"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold",children:"DATE TAKEN"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold",children:"QUANTITY"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold",children:"STATUS"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold",children:"REMARKS"})]})}),(0,wp.jsx)("tbody",{children:G.length>0?G.map((e,t)=>K(e,t,!1)):(0,wp.jsx)("tr",{children:(0,wp.jsx)("td",{colSpan:"6",className:"text-center p-8 text-gray-500",children:"No non-returnable records found."})})})]})]}),(0,wp.jsxs)("div",{children:[(0,wp.jsx)("h3",{className:"text-xl font-semibold mb-3",children:"Returnable"}),(0,wp.jsxs)("table",{className:"w-full text-left",children:[(0,wp.jsx)("thead",{className:"bg-gray-100",children:(0,wp.jsxs)("tr",{children:[(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold",children:"SL. NO"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold",children:"MATERIAL"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold",children:"SERIAL NO"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold",children:"MODEL NO"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold",children:"DATE OF PURCHASE"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold",children:"DATE TAKEN"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold",children:"QUANTITY"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold",children:"STATUS"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold",children:"REMARKS"}),(0,wp.jsx)("th",{className:"p-3 text-sm font-semibold",children:"DATE OF RETURN"})]})}),(0,wp.jsx)("tbody",{children:W.length>0?W.map((e,t)=>K(e,t,!0)):(0,wp.jsx)("tr",{children:(0,wp.jsx)("td",{colSpan:"10",className:"text-center p-8 text-gray-500",children:"No returnable records found."})})})]})]})]})]})]})]})}const rg=e=>{e&&e instanceof Function&&n.e(453).then(n.bind(n,453)).then(t=>{let{getCLS:n,getFID:r,getFCP:s,getLCP:i,getTTFB:a}=t;n(e),r(e),s(e),i(e),a(e)})};s.createRoot(document.getElementById("root")).render((0,wp.jsx)(r.StrictMode,{children:(0,wp.jsx)(_p,{})})),rg()})();
//# sourceMappingURL=main.e30d1653.js.map